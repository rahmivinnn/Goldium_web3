import{s as Eu,j as vu,k as Br,r as Kt,g as fr,m as Su,B as Qe,P as qo}from"./index-X-i2ZII2.js";import{p as yn}from"./index-BAMY2Nnw.js";var ua={},so=Eu.Buffer,Ho=so.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Au(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function Ru(e){var t=Au(e);if(typeof t!="string"&&(so.isEncoding===Ho||!Ho(e)))throw new Error("Unknown encoding: "+e);return t||e}ua.StringDecoder=Dr;function Dr(e){this.encoding=Ru(e);var t;switch(this.encoding){case"utf16le":this.text=Cu,this.end=Pu,t=4;break;case"utf8":this.fillLast=Ou,t=4;break;case"base64":this.text=Lu,this.end=Mu,t=3;break;default:this.write=Bu,this.end=Du;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=so.allocUnsafe(t)}Dr.prototype.write=function(e){if(e.length===0)return"";var t,r;if(this.lastNeed){if(t=this.fillLast(e),t===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""};Dr.prototype.end=Nu;Dr.prototype.text=xu;Dr.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};function ai(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function Iu(e,t,r){var n=t.length-1;if(n<r)return 0;var i=ai(t[n]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--n<r||i===-2?0:(i=ai(t[n]),i>=0?(i>0&&(e.lastNeed=i-2),i):--n<r||i===-2?0:(i=ai(t[n]),i>=0?(i>0&&(i===2?i=0:e.lastNeed=i-3),i):0))}function Tu(e,t,r){if((t[0]&192)!==128)return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if((t[1]&192)!==128)return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&(t[2]&192)!==128)return e.lastNeed=2,"�"}}function Ou(e){var t=this.lastTotal-this.lastNeed,r=Tu(this,e);if(r!==void 0)return r;if(this.lastNeed<=e.length)return e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length}function xu(e,t){var r=Iu(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)}function Nu(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t}function Cu(e,t){if((e.length-t)%2===0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function Pu(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function Lu(e,t){var r=(e.length-t)%3;return r===0?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function Mu(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function Bu(e){return e.toString(this.encoding)}function Du(e){return e&&e.length?this.write(e):""}const $u={},ku=Object.freeze(Object.defineProperty({__proto__:null,default:$u},Symbol.toStringTag,{value:"Module"})),Uu=vu(ku);var ju=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,li=Math.ceil,He=Math.floor,De="[BigNumber Error] ",Go=De+"Number primitive has more than 15 significant digits: ",Ze=1e14,oe=14,ui=9007199254740991,ci=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],St=1e7,Te=1e9;function ca(e){var t,r,n,i=I.prototype={constructor:I,toString:null,valueOf:null},o=new I(1),s=20,l=4,d=-7,c=21,v=-1e7,R=1e7,B=!1,M=1,k=0,m={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},T="0123456789abcdefghijklmnopqrstuvwxyz",N=!0;function I(a,f){var b,E,_,g,C,u,w,S,A=this;if(!(A instanceof I))return new I(a,f);if(f==null){if(a&&a._isBigNumber===!0){A.s=a.s,!a.c||a.e>R?A.c=A.e=null:a.e<v?A.c=[A.e=0]:(A.e=a.e,A.c=a.c.slice());return}if((u=typeof a=="number")&&a*0==0){if(A.s=1/a<0?(a=-a,-1):1,a===~~a){for(g=0,C=a;C>=10;C/=10,g++);g>R?A.c=A.e=null:(A.e=g,A.c=[a]);return}S=String(a)}else{if(!ju.test(S=String(a)))return n(A,S,u);A.s=S.charCodeAt(0)==45?(S=S.slice(1),-1):1}(g=S.indexOf("."))>-1&&(S=S.replace(".","")),(C=S.search(/e/i))>0?(g<0&&(g=C),g+=+S.slice(C+1),S=S.substring(0,C)):g<0&&(g=S.length)}else{if(be(f,2,T.length,"Base"),f==10&&N)return A=new I(a),G(A,s+A.e+1,l);if(S=String(a),u=typeof a=="number"){if(a*0!=0)return n(A,S,u,f);if(A.s=1/a<0?(S=S.slice(1),-1):1,I.DEBUG&&S.replace(/^0\.0*|\./,"").length>15)throw Error(Go+a)}else A.s=S.charCodeAt(0)===45?(S=S.slice(1),-1):1;for(b=T.slice(0,f),g=C=0,w=S.length;C<w;C++)if(b.indexOf(E=S.charAt(C))<0){if(E=="."){if(C>g){g=w;continue}}else if(!_&&(S==S.toUpperCase()&&(S=S.toLowerCase())||S==S.toLowerCase()&&(S=S.toUpperCase()))){_=!0,C=-1,g=0;continue}return n(A,String(a),u,f)}u=!1,S=r(S,f,10,A.s),(g=S.indexOf("."))>-1?S=S.replace(".",""):g=S.length}for(C=0;S.charCodeAt(C)===48;C++);for(w=S.length;S.charCodeAt(--w)===48;);if(S=S.slice(C,++w)){if(w-=C,u&&I.DEBUG&&w>15&&(a>ui||a!==He(a)))throw Error(Go+A.s*a);if((g=g-C-1)>R)A.c=A.e=null;else if(g<v)A.c=[A.e=0];else{if(A.e=g,A.c=[],C=(g+1)%oe,g<0&&(C+=oe),C<w){for(C&&A.c.push(+S.slice(0,C)),w-=oe;C<w;)A.c.push(+S.slice(C,C+=oe));C=oe-(S=S.slice(C)).length}else C-=w;for(;C--;S+="0");A.c.push(+S)}}else A.c=[A.e=0]}I.clone=ca,I.ROUND_UP=0,I.ROUND_DOWN=1,I.ROUND_CEIL=2,I.ROUND_FLOOR=3,I.ROUND_HALF_UP=4,I.ROUND_HALF_DOWN=5,I.ROUND_HALF_EVEN=6,I.ROUND_HALF_CEIL=7,I.ROUND_HALF_FLOOR=8,I.EUCLID=9,I.config=I.set=function(a){var f,b;if(a!=null)if(typeof a=="object"){if(a.hasOwnProperty(f="DECIMAL_PLACES")&&(b=a[f],be(b,0,Te,f),s=b),a.hasOwnProperty(f="ROUNDING_MODE")&&(b=a[f],be(b,0,8,f),l=b),a.hasOwnProperty(f="EXPONENTIAL_AT")&&(b=a[f],b&&b.pop?(be(b[0],-Te,0,f),be(b[1],0,Te,f),d=b[0],c=b[1]):(be(b,-Te,Te,f),d=-(c=b<0?-b:b))),a.hasOwnProperty(f="RANGE"))if(b=a[f],b&&b.pop)be(b[0],-Te,-1,f),be(b[1],1,Te,f),v=b[0],R=b[1];else if(be(b,-Te,Te,f),b)v=-(R=b<0?-b:b);else throw Error(De+f+" cannot be zero: "+b);if(a.hasOwnProperty(f="CRYPTO"))if(b=a[f],b===!!b)if(b)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))B=b;else throw B=!b,Error(De+"crypto unavailable");else B=b;else throw Error(De+f+" not true or false: "+b);if(a.hasOwnProperty(f="MODULO_MODE")&&(b=a[f],be(b,0,9,f),M=b),a.hasOwnProperty(f="POW_PRECISION")&&(b=a[f],be(b,0,Te,f),k=b),a.hasOwnProperty(f="FORMAT"))if(b=a[f],typeof b=="object")m=b;else throw Error(De+f+" not an object: "+b);if(a.hasOwnProperty(f="ALPHABET"))if(b=a[f],typeof b=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(b))N=b.slice(0,10)=="0123456789",T=b;else throw Error(De+f+" invalid: "+b)}else throw Error(De+"Object expected: "+a);return{DECIMAL_PLACES:s,ROUNDING_MODE:l,EXPONENTIAL_AT:[d,c],RANGE:[v,R],CRYPTO:B,MODULO_MODE:M,POW_PRECISION:k,FORMAT:m,ALPHABET:T}},I.isBigNumber=function(a){if(!a||a._isBigNumber!==!0)return!1;if(!I.DEBUG)return!0;var f,b,E=a.c,_=a.e,g=a.s;e:if({}.toString.call(E)=="[object Array]"){if((g===1||g===-1)&&_>=-Te&&_<=Te&&_===He(_)){if(E[0]===0){if(_===0&&E.length===1)return!0;break e}if(f=(_+1)%oe,f<1&&(f+=oe),String(E[0]).length==f){for(f=0;f<E.length;f++)if(b=E[f],b<0||b>=Ze||b!==He(b))break e;if(b!==0)return!0}}}else if(E===null&&_===null&&(g===null||g===1||g===-1))return!0;throw Error(De+"Invalid BigNumber: "+a)},I.maximum=I.max=function(){return K(arguments,-1)},I.minimum=I.min=function(){return K(arguments,1)},I.random=function(){var a=9007199254740992,f=Math.random()*a&2097151?function(){return He(Math.random()*a)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(b){var E,_,g,C,u,w=0,S=[],A=new I(o);if(b==null?b=s:be(b,0,Te),C=li(b/oe),B)if(crypto.getRandomValues){for(E=crypto.getRandomValues(new Uint32Array(C*=2));w<C;)u=E[w]*131072+(E[w+1]>>>11),u>=9e15?(_=crypto.getRandomValues(new Uint32Array(2)),E[w]=_[0],E[w+1]=_[1]):(S.push(u%1e14),w+=2);w=C/2}else if(crypto.randomBytes){for(E=crypto.randomBytes(C*=7);w<C;)u=(E[w]&31)*281474976710656+E[w+1]*1099511627776+E[w+2]*4294967296+E[w+3]*16777216+(E[w+4]<<16)+(E[w+5]<<8)+E[w+6],u>=9e15?crypto.randomBytes(7).copy(E,w):(S.push(u%1e14),w+=7);w=C/7}else throw B=!1,Error(De+"crypto unavailable");if(!B)for(;w<C;)u=f(),u<9e15&&(S[w++]=u%1e14);for(C=S[--w],b%=oe,C&&b&&(u=ci[oe-b],S[w]=He(C/u)*u);S[w]===0;S.pop(),w--);if(w<0)S=[g=0];else{for(g=-1;S[0]===0;S.splice(0,1),g-=oe);for(w=1,u=S[0];u>=10;u/=10,w++);w<oe&&(g-=oe-w)}return A.e=g,A.c=S,A}}(),I.sum=function(){for(var a=1,f=arguments,b=new I(f[0]);a<f.length;)b=b.plus(f[a++]);return b},r=function(){var a="0123456789";function f(b,E,_,g){for(var C,u=[0],w,S=0,A=b.length;S<A;){for(w=u.length;w--;u[w]*=E);for(u[0]+=g.indexOf(b.charAt(S++)),C=0;C<u.length;C++)u[C]>_-1&&(u[C+1]==null&&(u[C+1]=0),u[C+1]+=u[C]/_|0,u[C]%=_)}return u.reverse()}return function(b,E,_,g,C){var u,w,S,A,D,W,F,X,j=b.indexOf("."),re=s,te=l;for(j>=0&&(A=k,k=0,b=b.replace(".",""),X=new I(E),W=X.pow(b.length-j),k=A,X.c=f(ft(We(W.c),W.e,"0"),10,_,a),X.e=X.c.length),F=f(b,E,_,C?(u=T,a):(u=a,T)),S=A=F.length;F[--A]==0;F.pop());if(!F[0])return u.charAt(0);if(j<0?--S:(W.c=F,W.e=S,W.s=g,W=t(W,X,re,te,_),F=W.c,D=W.r,S=W.e),w=S+re+1,j=F[w],A=_/2,D=D||w<0||F[w+1]!=null,D=te<4?(j!=null||D)&&(te==0||te==(W.s<0?3:2)):j>A||j==A&&(te==4||D||te==6&&F[w-1]&1||te==(W.s<0?8:7)),w<1||!F[0])b=D?ft(u.charAt(1),-re,u.charAt(0)):u.charAt(0);else{if(F.length=w,D)for(--_;++F[--w]>_;)F[w]=0,w||(++S,F=[1].concat(F));for(A=F.length;!F[--A];);for(j=0,b="";j<=A;b+=u.charAt(F[j++]));b=ft(b,S,u.charAt(0))}return b}}(),t=function(){function a(E,_,g){var C,u,w,S,A=0,D=E.length,W=_%St,F=_/St|0;for(E=E.slice();D--;)w=E[D]%St,S=E[D]/St|0,C=F*w+S*W,u=W*w+C%St*St+A,A=(u/g|0)+(C/St|0)+F*S,E[D]=u%g;return A&&(E=[A].concat(E)),E}function f(E,_,g,C){var u,w;if(g!=C)w=g>C?1:-1;else for(u=w=0;u<g;u++)if(E[u]!=_[u]){w=E[u]>_[u]?1:-1;break}return w}function b(E,_,g,C){for(var u=0;g--;)E[g]-=u,u=E[g]<_[g]?1:0,E[g]=u*C+E[g]-_[g];for(;!E[0]&&E.length>1;E.splice(0,1));}return function(E,_,g,C,u){var w,S,A,D,W,F,X,j,re,te,ie,se,Ee,Ae,Re,_e,me,O=E.s==_.s?1:-1,P=E.c,U=_.c;if(!P||!P[0]||!U||!U[0])return new I(!E.s||!_.s||(P?U&&P[0]==U[0]:!U)?NaN:P&&P[0]==0||!U?O*0:O/0);for(j=new I(O),re=j.c=[],S=E.e-_.e,O=g+S+1,u||(u=Ze,S=Ge(E.e/oe)-Ge(_.e/oe),O=O/oe|0),A=0;U[A]==(P[A]||0);A++);if(U[A]>(P[A]||0)&&S--,O<0)re.push(1),D=!0;else{for(Ae=P.length,_e=U.length,A=0,O+=2,W=He(u/(U[0]+1)),W>1&&(U=a(U,W,u),P=a(P,W,u),_e=U.length,Ae=P.length),Ee=_e,te=P.slice(0,_e),ie=te.length;ie<_e;te[ie++]=0);me=U.slice(),me=[0].concat(me),Re=U[0],U[1]>=u/2&&Re++;do{if(W=0,w=f(U,te,_e,ie),w<0){if(se=te[0],_e!=ie&&(se=se*u+(te[1]||0)),W=He(se/Re),W>1)for(W>=u&&(W=u-1),F=a(U,W,u),X=F.length,ie=te.length;f(F,te,X,ie)==1;)W--,b(F,_e<X?me:U,X,u),X=F.length,w=1;else W==0&&(w=W=1),F=U.slice(),X=F.length;if(X<ie&&(F=[0].concat(F)),b(te,F,ie,u),ie=te.length,w==-1)for(;f(U,te,_e,ie)<1;)W++,b(te,_e<ie?me:U,ie,u),ie=te.length}else w===0&&(W++,te=[0]);re[A++]=W,te[0]?te[ie++]=P[Ee]||0:(te=[P[Ee]],ie=1)}while((Ee++<Ae||te[0]!=null)&&O--);D=te[0]!=null,re[0]||re.splice(0,1)}if(u==Ze){for(A=1,O=re[0];O>=10;O/=10,A++);G(j,g+(j.e=A+S*oe-1)+1,C,D)}else j.e=S,j.r=+D;return j}}();function L(a,f,b,E){var _,g,C,u,w;if(b==null?b=l:be(b,0,8),!a.c)return a.toString();if(_=a.c[0],C=a.e,f==null)w=We(a.c),w=E==1||E==2&&(C<=d||C>=c)?on(w,C):ft(w,C,"0");else if(a=G(new I(a),f,b),g=a.e,w=We(a.c),u=w.length,E==1||E==2&&(f<=g||g<=d)){for(;u<f;w+="0",u++);w=on(w,g)}else if(f-=C+(E===2&&g>C),w=ft(w,g,"0"),g+1>u){if(--f>0)for(w+=".";f--;w+="0");}else if(f+=g-u,f>0)for(g+1==u&&(w+=".");f--;w+="0");return a.s<0&&_?"-"+w:w}function K(a,f){for(var b,E,_=1,g=new I(a[0]);_<a.length;_++)E=new I(a[_]),(!E.s||(b=Bt(g,E))===f||b===0&&g.s===f)&&(g=E);return g}function H(a,f,b){for(var E=1,_=f.length;!f[--_];f.pop());for(_=f[0];_>=10;_/=10,E++);return(b=E+b*oe-1)>R?a.c=a.e=null:b<v?a.c=[a.e=0]:(a.e=b,a.c=f),a}n=function(){var a=/^(-?)0([xbo])(?=\w[\w.]*$)/i,f=/^([^.]+)\.$/,b=/^\.([^.]+)$/,E=/^-?(Infinity|NaN)$/,_=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(g,C,u,w){var S,A=u?C:C.replace(_,"");if(E.test(A))g.s=isNaN(A)?null:A<0?-1:1;else{if(!u&&(A=A.replace(a,function(D,W,F){return S=(F=F.toLowerCase())=="x"?16:F=="b"?2:8,!w||w==S?W:D}),w&&(S=w,A=A.replace(f,"$1").replace(b,"0.$1")),C!=A))return new I(A,S);if(I.DEBUG)throw Error(De+"Not a"+(w?" base "+w:"")+" number: "+C);g.s=null}g.c=g.e=null}}();function G(a,f,b,E){var _,g,C,u,w,S,A,D=a.c,W=ci;if(D){e:{for(_=1,u=D[0];u>=10;u/=10,_++);if(g=f-_,g<0)g+=oe,C=f,w=D[S=0],A=He(w/W[_-C-1]%10);else if(S=li((g+1)/oe),S>=D.length)if(E){for(;D.length<=S;D.push(0));w=A=0,_=1,g%=oe,C=g-oe+1}else break e;else{for(w=u=D[S],_=1;u>=10;u/=10,_++);g%=oe,C=g-oe+_,A=C<0?0:He(w/W[_-C-1]%10)}if(E=E||f<0||D[S+1]!=null||(C<0?w:w%W[_-C-1]),E=b<4?(A||E)&&(b==0||b==(a.s<0?3:2)):A>5||A==5&&(b==4||E||b==6&&(g>0?C>0?w/W[_-C]:0:D[S-1])%10&1||b==(a.s<0?8:7)),f<1||!D[0])return D.length=0,E?(f-=a.e+1,D[0]=W[(oe-f%oe)%oe],a.e=-f||0):D[0]=a.e=0,a;if(g==0?(D.length=S,u=1,S--):(D.length=S+1,u=W[oe-g],D[S]=C>0?He(w/W[_-C]%W[C])*u:0),E)for(;;)if(S==0){for(g=1,C=D[0];C>=10;C/=10,g++);for(C=D[0]+=u,u=1;C>=10;C/=10,u++);g!=u&&(a.e++,D[0]==Ze&&(D[0]=1));break}else{if(D[S]+=u,D[S]!=Ze)break;D[S--]=0,u=1}for(g=D.length;D[--g]===0;D.pop());}a.e>R?a.c=a.e=null:a.e<v&&(a.c=[a.e=0])}return a}function V(a){var f,b=a.e;return b===null?a.toString():(f=We(a.c),f=b<=d||b>=c?on(f,b):ft(f,b,"0"),a.s<0?"-"+f:f)}return i.absoluteValue=i.abs=function(){var a=new I(this);return a.s<0&&(a.s=1),a},i.comparedTo=function(a,f){return Bt(this,new I(a,f))},i.decimalPlaces=i.dp=function(a,f){var b,E,_,g=this;if(a!=null)return be(a,0,Te),f==null?f=l:be(f,0,8),G(new I(g),a+g.e+1,f);if(!(b=g.c))return null;if(E=((_=b.length-1)-Ge(this.e/oe))*oe,_=b[_])for(;_%10==0;_/=10,E--);return E<0&&(E=0),E},i.dividedBy=i.div=function(a,f){return t(this,new I(a,f),s,l)},i.dividedToIntegerBy=i.idiv=function(a,f){return t(this,new I(a,f),0,1)},i.exponentiatedBy=i.pow=function(a,f){var b,E,_,g,C,u,w,S,A,D=this;if(a=new I(a),a.c&&!a.isInteger())throw Error(De+"Exponent not an integer: "+V(a));if(f!=null&&(f=new I(f)),u=a.e>14,!D.c||!D.c[0]||D.c[0]==1&&!D.e&&D.c.length==1||!a.c||!a.c[0])return A=new I(Math.pow(+V(D),u?a.s*(2-nn(a)):+V(a))),f?A.mod(f):A;if(w=a.s<0,f){if(f.c?!f.c[0]:!f.s)return new I(NaN);E=!w&&D.isInteger()&&f.isInteger(),E&&(D=D.mod(f))}else{if(a.e>9&&(D.e>0||D.e<-1||(D.e==0?D.c[0]>1||u&&D.c[1]>=24e7:D.c[0]<8e13||u&&D.c[0]<=9999975e7)))return g=D.s<0&&nn(a)?-0:0,D.e>-1&&(g=1/g),new I(w?1/g:g);k&&(g=li(k/oe+2))}for(u?(b=new I(.5),w&&(a.s=1),S=nn(a)):(_=Math.abs(+V(a)),S=_%2),A=new I(o);;){if(S){if(A=A.times(D),!A.c)break;g?A.c.length>g&&(A.c.length=g):E&&(A=A.mod(f))}if(_){if(_=He(_/2),_===0)break;S=_%2}else if(a=a.times(b),G(a,a.e+1,1),a.e>14)S=nn(a);else{if(_=+V(a),_===0)break;S=_%2}D=D.times(D),g?D.c&&D.c.length>g&&(D.c.length=g):E&&(D=D.mod(f))}return E?A:(w&&(A=o.div(A)),f?A.mod(f):g?G(A,k,l,C):A)},i.integerValue=function(a){var f=new I(this);return a==null?a=l:be(a,0,8),G(f,f.e+1,a)},i.isEqualTo=i.eq=function(a,f){return Bt(this,new I(a,f))===0},i.isFinite=function(){return!!this.c},i.isGreaterThan=i.gt=function(a,f){return Bt(this,new I(a,f))>0},i.isGreaterThanOrEqualTo=i.gte=function(a,f){return(f=Bt(this,new I(a,f)))===1||f===0},i.isInteger=function(){return!!this.c&&Ge(this.e/oe)>this.c.length-2},i.isLessThan=i.lt=function(a,f){return Bt(this,new I(a,f))<0},i.isLessThanOrEqualTo=i.lte=function(a,f){return(f=Bt(this,new I(a,f)))===-1||f===0},i.isNaN=function(){return!this.s},i.isNegative=function(){return this.s<0},i.isPositive=function(){return this.s>0},i.isZero=function(){return!!this.c&&this.c[0]==0},i.minus=function(a,f){var b,E,_,g,C=this,u=C.s;if(a=new I(a,f),f=a.s,!u||!f)return new I(NaN);if(u!=f)return a.s=-f,C.plus(a);var w=C.e/oe,S=a.e/oe,A=C.c,D=a.c;if(!w||!S){if(!A||!D)return A?(a.s=-f,a):new I(D?C:NaN);if(!A[0]||!D[0])return D[0]?(a.s=-f,a):new I(A[0]?C:l==3?-0:0)}if(w=Ge(w),S=Ge(S),A=A.slice(),u=w-S){for((g=u<0)?(u=-u,_=A):(S=w,_=D),_.reverse(),f=u;f--;_.push(0));_.reverse()}else for(E=(g=(u=A.length)<(f=D.length))?u:f,u=f=0;f<E;f++)if(A[f]!=D[f]){g=A[f]<D[f];break}if(g&&(_=A,A=D,D=_,a.s=-a.s),f=(E=D.length)-(b=A.length),f>0)for(;f--;A[b++]=0);for(f=Ze-1;E>u;){if(A[--E]<D[E]){for(b=E;b&&!A[--b];A[b]=f);--A[b],A[E]+=Ze}A[E]-=D[E]}for(;A[0]==0;A.splice(0,1),--S);return A[0]?H(a,A,S):(a.s=l==3?-1:1,a.c=[a.e=0],a)},i.modulo=i.mod=function(a,f){var b,E,_=this;return a=new I(a,f),!_.c||!a.s||a.c&&!a.c[0]?new I(NaN):!a.c||_.c&&!_.c[0]?new I(_):(M==9?(E=a.s,a.s=1,b=t(_,a,0,3),a.s=E,b.s*=E):b=t(_,a,0,M),a=_.minus(b.times(a)),!a.c[0]&&M==1&&(a.s=_.s),a)},i.multipliedBy=i.times=function(a,f){var b,E,_,g,C,u,w,S,A,D,W,F,X,j,re,te=this,ie=te.c,se=(a=new I(a,f)).c;if(!ie||!se||!ie[0]||!se[0])return!te.s||!a.s||ie&&!ie[0]&&!se||se&&!se[0]&&!ie?a.c=a.e=a.s=null:(a.s*=te.s,!ie||!se?a.c=a.e=null:(a.c=[0],a.e=0)),a;for(E=Ge(te.e/oe)+Ge(a.e/oe),a.s*=te.s,w=ie.length,D=se.length,w<D&&(X=ie,ie=se,se=X,_=w,w=D,D=_),_=w+D,X=[];_--;X.push(0));for(j=Ze,re=St,_=D;--_>=0;){for(b=0,W=se[_]%re,F=se[_]/re|0,C=w,g=_+C;g>_;)S=ie[--C]%re,A=ie[C]/re|0,u=F*S+A*W,S=W*S+u%re*re+X[g]+b,b=(S/j|0)+(u/re|0)+F*A,X[g--]=S%j;X[g]=b}return b?++E:X.splice(0,1),H(a,X,E)},i.negated=function(){var a=new I(this);return a.s=-a.s||null,a},i.plus=function(a,f){var b,E=this,_=E.s;if(a=new I(a,f),f=a.s,!_||!f)return new I(NaN);if(_!=f)return a.s=-f,E.minus(a);var g=E.e/oe,C=a.e/oe,u=E.c,w=a.c;if(!g||!C){if(!u||!w)return new I(_/0);if(!u[0]||!w[0])return w[0]?a:new I(u[0]?E:_*0)}if(g=Ge(g),C=Ge(C),u=u.slice(),_=g-C){for(_>0?(C=g,b=w):(_=-_,b=u),b.reverse();_--;b.push(0));b.reverse()}for(_=u.length,f=w.length,_-f<0&&(b=w,w=u,u=b,f=_),_=0;f;)_=(u[--f]=u[f]+w[f]+_)/Ze|0,u[f]=Ze===u[f]?0:u[f]%Ze;return _&&(u=[_].concat(u),++C),H(a,u,C)},i.precision=i.sd=function(a,f){var b,E,_,g=this;if(a!=null&&a!==!!a)return be(a,1,Te),f==null?f=l:be(f,0,8),G(new I(g),a,f);if(!(b=g.c))return null;if(_=b.length-1,E=_*oe+1,_=b[_]){for(;_%10==0;_/=10,E--);for(_=b[0];_>=10;_/=10,E++);}return a&&g.e+1>E&&(E=g.e+1),E},i.shiftedBy=function(a){return be(a,-ui,ui),this.times("1e"+a)},i.squareRoot=i.sqrt=function(){var a,f,b,E,_,g=this,C=g.c,u=g.s,w=g.e,S=s+4,A=new I("0.5");if(u!==1||!C||!C[0])return new I(!u||u<0&&(!C||C[0])?NaN:C?g:1/0);if(u=Math.sqrt(+V(g)),u==0||u==1/0?(f=We(C),(f.length+w)%2==0&&(f+="0"),u=Math.sqrt(+f),w=Ge((w+1)/2)-(w<0||w%2),u==1/0?f="5e"+w:(f=u.toExponential(),f=f.slice(0,f.indexOf("e")+1)+w),b=new I(f)):b=new I(u+""),b.c[0]){for(w=b.e,u=w+S,u<3&&(u=0);;)if(_=b,b=A.times(_.plus(t(g,_,S,1))),We(_.c).slice(0,u)===(f=We(b.c)).slice(0,u))if(b.e<w&&--u,f=f.slice(u-3,u+1),f=="9999"||!E&&f=="4999"){if(!E&&(G(_,_.e+s+2,0),_.times(_).eq(g))){b=_;break}S+=4,u+=4,E=1}else{(!+f||!+f.slice(1)&&f.charAt(0)=="5")&&(G(b,b.e+s+2,1),a=!b.times(b).eq(g));break}}return G(b,b.e+s+1,l,a)},i.toExponential=function(a,f){return a!=null&&(be(a,0,Te),a++),L(this,a,f,1)},i.toFixed=function(a,f){return a!=null&&(be(a,0,Te),a=a+this.e+1),L(this,a,f)},i.toFormat=function(a,f,b){var E,_=this;if(b==null)a!=null&&f&&typeof f=="object"?(b=f,f=null):a&&typeof a=="object"?(b=a,a=f=null):b=m;else if(typeof b!="object")throw Error(De+"Argument not an object: "+b);if(E=_.toFixed(a,f),_.c){var g,C=E.split("."),u=+b.groupSize,w=+b.secondaryGroupSize,S=b.groupSeparator||"",A=C[0],D=C[1],W=_.s<0,F=W?A.slice(1):A,X=F.length;if(w&&(g=u,u=w,w=g,X-=g),u>0&&X>0){for(g=X%u||u,A=F.substr(0,g);g<X;g+=u)A+=S+F.substr(g,u);w>0&&(A+=S+F.slice(g)),W&&(A="-"+A)}E=D?A+(b.decimalSeparator||"")+((w=+b.fractionGroupSize)?D.replace(new RegExp("\\d{"+w+"}\\B","g"),"$&"+(b.fractionGroupSeparator||"")):D):A}return(b.prefix||"")+E+(b.suffix||"")},i.toFraction=function(a){var f,b,E,_,g,C,u,w,S,A,D,W,F=this,X=F.c;if(a!=null&&(u=new I(a),!u.isInteger()&&(u.c||u.s!==1)||u.lt(o)))throw Error(De+"Argument "+(u.isInteger()?"out of range: ":"not an integer: ")+V(u));if(!X)return new I(F);for(f=new I(o),S=b=new I(o),E=w=new I(o),W=We(X),g=f.e=W.length-F.e-1,f.c[0]=ci[(C=g%oe)<0?oe+C:C],a=!a||u.comparedTo(f)>0?g>0?f:S:u,C=R,R=1/0,u=new I(W),w.c[0]=0;A=t(u,f,0,1),_=b.plus(A.times(E)),_.comparedTo(a)!=1;)b=E,E=_,S=w.plus(A.times(_=S)),w=_,f=u.minus(A.times(_=f)),u=_;return _=t(a.minus(b),E,0,1),w=w.plus(_.times(S)),b=b.plus(_.times(E)),w.s=S.s=F.s,g=g*2,D=t(S,E,g,l).minus(F).abs().comparedTo(t(w,b,g,l).minus(F).abs())<1?[S,E]:[w,b],R=C,D},i.toNumber=function(){return+V(this)},i.toPrecision=function(a,f){return a!=null&&be(a,1,Te),L(this,a,f,2)},i.toString=function(a){var f,b=this,E=b.s,_=b.e;return _===null?E?(f="Infinity",E<0&&(f="-"+f)):f="NaN":(a==null?f=_<=d||_>=c?on(We(b.c),_):ft(We(b.c),_,"0"):a===10&&N?(b=G(new I(b),s+_+1,l),f=ft(We(b.c),b.e,"0")):(be(a,2,T.length,"Base"),f=r(ft(We(b.c),_,"0"),10,a,E,!0)),E<0&&b.c[0]&&(f="-"+f)),f},i.valueOf=i.toJSON=function(){return V(this)},i._isBigNumber=!0,i[Symbol.toStringTag]="BigNumber",i[Symbol.for("nodejs.util.inspect.custom")]=i.valueOf,e!=null&&I.set(e),I}function Ge(e){var t=e|0;return e>0||e===t?t:t-1}function We(e){for(var t,r,n=1,i=e.length,o=e[0]+"";n<i;){for(t=e[n++]+"",r=oe-t.length;r--;t="0"+t);o+=t}for(i=o.length;o.charCodeAt(--i)===48;);return o.slice(0,i+1||1)}function Bt(e,t){var r,n,i=e.c,o=t.c,s=e.s,l=t.s,d=e.e,c=t.e;if(!s||!l)return null;if(r=i&&!i[0],n=o&&!o[0],r||n)return r?n?0:-l:s;if(s!=l)return s;if(r=s<0,n=d==c,!i||!o)return n?0:!i^r?1:-1;if(!n)return d>c^r?1:-1;for(l=(d=i.length)<(c=o.length)?d:c,s=0;s<l;s++)if(i[s]!=o[s])return i[s]>o[s]^r?1:-1;return d==c?0:d>c^r?1:-1}function be(e,t,r,n){if(e<t||e>r||e!==He(e))throw Error(De+(n||"Argument")+(typeof e=="number"?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function nn(e){var t=e.c.length-1;return Ge(e.e/oe)==t&&e.c[t]%2!=0}function on(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function ft(e,t,r){var n,i;if(t<0){for(i=r+".";++t;i+=r);e=i+e}else if(n=e.length,++t>n){for(i=r,t-=n;--t;i+=r);e+=i}else t<n&&(e=e.slice(0,t)+"."+e.slice(t));return e}ca();function Nr(e){"@babel/helpers - typeof";return Nr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nr(e)}function Wu(e,t){if(Nr(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Nr(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fu(e){var t=Wu(e,"string");return Nr(t)=="symbol"?t:t+""}function ee(e,t,r){return(t=Fu(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ve(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zo(Object(r),!0).forEach(function(n){ee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zo(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var fa={exports:{}},fi={exports:{}};let qu=class extends Error{constructor(t){if(!Array.isArray(t))throw new TypeError(`Expected input to be an Array, got ${typeof t}`);let r="";for(let n=0;n<t.length;n++)r+=`    ${t[n].stack}
`;super(r),this.name="AggregateError",this.errors=t}};var ye={AggregateError:qu,ArrayIsArray(e){return Array.isArray(e)},ArrayPrototypeIncludes(e,t){return e.includes(t)},ArrayPrototypeIndexOf(e,t){return e.indexOf(t)},ArrayPrototypeJoin(e,t){return e.join(t)},ArrayPrototypeMap(e,t){return e.map(t)},ArrayPrototypePop(e,t){return e.pop(t)},ArrayPrototypePush(e,t){return e.push(t)},ArrayPrototypeSlice(e,t,r){return e.slice(t,r)},Error,FunctionPrototypeCall(e,t,...r){return e.call(t,...r)},FunctionPrototypeSymbolHasInstance(e,t){return Function.prototype[Symbol.hasInstance].call(e,t)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(e,t){return Object.defineProperties(e,t)},ObjectDefineProperty(e,t,r){return Object.defineProperty(e,t,r)},ObjectGetOwnPropertyDescriptor(e,t){return Object.getOwnPropertyDescriptor(e,t)},ObjectKeys(e){return Object.keys(e)},ObjectSetPrototypeOf(e,t){return Object.setPrototypeOf(e,t)},Promise,PromisePrototypeCatch(e,t){return e.catch(t)},PromisePrototypeThen(e,t,r){return e.then(t,r)},PromiseReject(e){return Promise.reject(e)},PromiseResolve(e){return Promise.resolve(e)},ReflectApply:Reflect.apply,RegExpPrototypeTest(e,t){return e.test(t)},SafeSet:Set,String,StringPrototypeSlice(e,t,r){return e.slice(t,r)},StringPrototypeToLowerCase(e){return e.toLowerCase()},StringPrototypeToUpperCase(e){return e.toUpperCase()},StringPrototypeTrim(e){return e.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(e,t,r){return e.set(t,r)},Boolean,Uint8Array},da={exports:{}},ha={format(e,...t){return e.replace(/%([sdifj])/g,function(...[r,n]){const i=t.shift();return n==="f"?i.toFixed(6):n==="j"?JSON.stringify(i):n==="s"&&typeof i=="object"?`${i.constructor!==Object?i.constructor.name:""} {}`.trim():i.toString()})},inspect(e){switch(typeof e){case"string":if(e.includes("'"))if(e.includes('"')){if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}else return`"${e}"`;return`'${e}'`;case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}}};const{format:Hu,inspect:_n}=ha,{AggregateError:Gu}=ye,zu=globalThis.AggregateError||Gu,Vu=Symbol("kIsNodeError"),Ku=["string","function","number","object","Function","Object","boolean","bigint","symbol"],Yu=/^([A-Z][a-z0-9]*)+$/,Ju="__node_internal_",In={};function Ft(e,t){if(!e)throw new In.ERR_INTERNAL_ASSERTION(t)}function Vo(e){let t="",r=e.length;const n=e[0]==="-"?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function Zu(e,t,r){if(typeof t=="function")return Ft(t.length<=r.length,`Code: ${e}; The provided arguments length (${r.length}) does not match the required ones (${t.length}).`),t(...r);const n=(t.match(/%[dfijoOs]/g)||[]).length;return Ft(n===r.length,`Code: ${e}; The provided arguments length (${r.length}) does not match the required ones (${n}).`),r.length===0?t:Hu(t,...r)}function Ne(e,t,r){r||(r=Error);class n extends r{constructor(...o){super(Zu(e,t,o))}toString(){return`${this.name} [${e}]: ${this.message}`}}Object.defineProperties(n.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${e}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),n.prototype.code=e,n.prototype[Vu]=!0,In[e]=n}function Ko(e){const t=Ju+e.name;return Object.defineProperty(e,"name",{value:t}),e}function Xu(e,t){if(e&&t&&e!==t){if(Array.isArray(t.errors))return t.errors.push(e),t;const r=new zu([t,e],t.message);return r.code=t.code,r}return e||t}let Qu=class extends Error{constructor(t="The operation was aborted",r=void 0){if(r!==void 0&&typeof r!="object")throw new In.ERR_INVALID_ARG_TYPE("options","Object",r);super(t,r),this.code="ABORT_ERR",this.name="AbortError"}};Ne("ERR_ASSERTION","%s",Error);Ne("ERR_INVALID_ARG_TYPE",(e,t,r)=>{Ft(typeof e=="string","'name' must be a string"),Array.isArray(t)||(t=[t]);let n="The ";e.endsWith(" argument")?n+=`${e} `:n+=`"${e}" ${e.includes(".")?"property":"argument"} `,n+="must be ";const i=[],o=[],s=[];for(const d of t)Ft(typeof d=="string","All expected entries have to be of type string"),Ku.includes(d)?i.push(d.toLowerCase()):Yu.test(d)?o.push(d):(Ft(d!=="object",'The value "object" should be written as "Object"'),s.push(d));if(o.length>0){const d=i.indexOf("object");d!==-1&&(i.splice(i,d,1),o.push("Object"))}if(i.length>0){switch(i.length){case 1:n+=`of type ${i[0]}`;break;case 2:n+=`one of type ${i[0]} or ${i[1]}`;break;default:{const d=i.pop();n+=`one of type ${i.join(", ")}, or ${d}`}}(o.length>0||s.length>0)&&(n+=" or ")}if(o.length>0){switch(o.length){case 1:n+=`an instance of ${o[0]}`;break;case 2:n+=`an instance of ${o[0]} or ${o[1]}`;break;default:{const d=o.pop();n+=`an instance of ${o.join(", ")}, or ${d}`}}s.length>0&&(n+=" or ")}switch(s.length){case 0:break;case 1:s[0].toLowerCase()!==s[0]&&(n+="an "),n+=`${s[0]}`;break;case 2:n+=`one of ${s[0]} or ${s[1]}`;break;default:{const d=s.pop();n+=`one of ${s.join(", ")}, or ${d}`}}if(r==null)n+=`. Received ${r}`;else if(typeof r=="function"&&r.name)n+=`. Received function ${r.name}`;else if(typeof r=="object"){var l;if((l=r.constructor)!==null&&l!==void 0&&l.name)n+=`. Received an instance of ${r.constructor.name}`;else{const d=_n(r,{depth:-1});n+=`. Received ${d}`}}else{let d=_n(r,{colors:!1});d.length>25&&(d=`${d.slice(0,25)}...`),n+=`. Received type ${typeof r} (${d})`}return n},TypeError);Ne("ERR_INVALID_ARG_VALUE",(e,t,r="is invalid")=>{let n=_n(t);return n.length>128&&(n=n.slice(0,128)+"..."),`The ${e.includes(".")?"property":"argument"} '${e}' ${r}. Received ${n}`},TypeError);Ne("ERR_INVALID_RETURN_VALUE",(e,t,r)=>{var n;const i=r!=null&&(n=r.constructor)!==null&&n!==void 0&&n.name?`instance of ${r.constructor.name}`:`type ${typeof r}`;return`Expected ${e} to be returned from the "${t}" function but got ${i}.`},TypeError);Ne("ERR_MISSING_ARGS",(...e)=>{Ft(e.length>0,"At least one arg needs to be specified");let t;const r=e.length;switch(e=(Array.isArray(e)?e:[e]).map(n=>`"${n}"`).join(" or "),r){case 1:t+=`The ${e[0]} argument`;break;case 2:t+=`The ${e[0]} and ${e[1]} arguments`;break;default:{const n=e.pop();t+=`The ${e.join(", ")}, and ${n} arguments`}break}return`${t} must be specified`},TypeError);Ne("ERR_OUT_OF_RANGE",(e,t,r)=>{Ft(t,'Missing "range" argument');let n;if(Number.isInteger(r)&&Math.abs(r)>2**32)n=Vo(String(r));else if(typeof r=="bigint"){n=String(r);const i=BigInt(2)**BigInt(32);(r>i||r<-i)&&(n=Vo(n)),n+="n"}else n=_n(r);return`The value of "${e}" is out of range. It must be ${t}. Received ${n}`},RangeError);Ne("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);Ne("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);Ne("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);Ne("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);Ne("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);Ne("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Ne("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);Ne("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);Ne("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);Ne("ERR_STREAM_WRITE_AFTER_END","write after end",Error);Ne("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);var Le={AbortError:Qu,aggregateTwoErrors:Ko(Xu),hideStackFrames:Ko,codes:In},Sr={exports:{}},Yo;function Cr(){if(Yo)return Sr.exports;Yo=1;const{AbortController:e,AbortSignal:t}=typeof self<"u"?self:typeof window<"u"?window:void 0;return Sr.exports=e,Sr.exports.AbortSignal=t,Sr.exports.default=e,Sr.exports}(function(e){const t=Kt,{format:r,inspect:n}=ha,{codes:{ERR_INVALID_ARG_TYPE:i}}=Le,{kResistStopPropagation:o,AggregateError:s,SymbolDispose:l}=ye,d=globalThis.AbortSignal||Cr().AbortSignal,c=globalThis.AbortController||Cr().AbortController,v=Object.getPrototypeOf(async function(){}).constructor,R=globalThis.Blob||t.Blob,B=typeof R<"u"?function(T){return T instanceof R}:function(T){return!1},M=(m,T)=>{if(m!==void 0&&(m===null||typeof m!="object"||!("aborted"in m)))throw new i(T,"AbortSignal",m)},k=(m,T)=>{if(typeof m!="function")throw new i(T,"Function",m)};e.exports={AggregateError:s,kEmptyObject:Object.freeze({}),once(m){let T=!1;return function(...N){T||(T=!0,m.apply(this,N))}},createDeferredPromise:function(){let m,T;return{promise:new Promise((I,L)=>{m=I,T=L}),resolve:m,reject:T}},promisify(m){return new Promise((T,N)=>{m((I,...L)=>I?N(I):T(...L))})},debuglog(){return function(){}},format:r,inspect:n,types:{isAsyncFunction(m){return m instanceof v},isArrayBufferView(m){return ArrayBuffer.isView(m)}},isBlob:B,deprecate(m,T){return m},addAbortListener:Br.addAbortListener||function(T,N){if(T===void 0)throw new i("signal","AbortSignal",T);M(T,"signal"),k(N,"listener");let I;return T.aborted?queueMicrotask(()=>N()):(T.addEventListener("abort",N,{__proto__:null,once:!0,[o]:!0}),I=()=>{T.removeEventListener("abort",N)}),{__proto__:null,[l](){var L;(L=I)===null||L===void 0||L()}}},AbortSignalAny:d.any||function(T){if(T.length===1)return T[0];const N=new c,I=()=>N.abort();return T.forEach(L=>{M(L,"signals"),L.addEventListener("abort",I,{once:!0})}),N.signal.addEventListener("abort",()=>{T.forEach(L=>L.removeEventListener("abort",I))},{once:!0}),N.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")})(da);var ke=da.exports,ao={};const{ArrayIsArray:lo,ArrayPrototypeIncludes:ga,ArrayPrototypeJoin:pa,ArrayPrototypeMap:ec,NumberIsInteger:uo,NumberIsNaN:tc,NumberMAX_SAFE_INTEGER:rc,NumberMIN_SAFE_INTEGER:nc,NumberParseInt:ic,ObjectPrototypeHasOwnProperty:oc,RegExpPrototypeExec:wa,String:sc,StringPrototypeToUpperCase:ac,StringPrototypeTrim:lc}=ye,{hideStackFrames:Ke,codes:{ERR_SOCKET_BAD_PORT:uc,ERR_INVALID_ARG_TYPE:Pe,ERR_INVALID_ARG_VALUE:dr,ERR_OUT_OF_RANGE:Ht,ERR_UNKNOWN_SIGNAL:Jo}}=Le,{normalizeEncoding:cc}=ke,{isAsyncFunction:fc,isArrayBufferView:dc}=ke.types,Zo={};function hc(e){return e===(e|0)}function gc(e){return e===e>>>0}const pc=/^[0-7]+$/,wc="must be a 32-bit unsigned integer or an octal string";function bc(e,t,r){if(typeof e>"u"&&(e=r),typeof e=="string"){if(wa(pc,e)===null)throw new dr(t,e,wc);e=ic(e,8)}return ba(e,t),e}const yc=Ke((e,t,r=nc,n=rc)=>{if(typeof e!="number")throw new Pe(t,"number",e);if(!uo(e))throw new Ht(t,"an integer",e);if(e<r||e>n)throw new Ht(t,`>= ${r} && <= ${n}`,e)}),_c=Ke((e,t,r=-2147483648,n=2147483647)=>{if(typeof e!="number")throw new Pe(t,"number",e);if(!uo(e))throw new Ht(t,"an integer",e);if(e<r||e>n)throw new Ht(t,`>= ${r} && <= ${n}`,e)}),ba=Ke((e,t,r=!1)=>{if(typeof e!="number")throw new Pe(t,"number",e);if(!uo(e))throw new Ht(t,"an integer",e);const n=r?1:0,i=4294967295;if(e<n||e>i)throw new Ht(t,`>= ${n} && <= ${i}`,e)});function co(e,t){if(typeof e!="string")throw new Pe(t,"string",e)}function mc(e,t,r=void 0,n){if(typeof e!="number")throw new Pe(t,"number",e);if(r!=null&&e<r||n!=null&&e>n||(r!=null||n!=null)&&tc(e))throw new Ht(t,`${r!=null?`>= ${r}`:""}${r!=null&&n!=null?" && ":""}${n!=null?`<= ${n}`:""}`,e)}const Ec=Ke((e,t,r)=>{if(!ga(r,e)){const i="must be one of: "+pa(ec(r,o=>typeof o=="string"?`'${o}'`:sc(o)),", ");throw new dr(t,e,i)}});function ya(e,t){if(typeof e!="boolean")throw new Pe(t,"boolean",e)}function di(e,t,r){return e==null||!oc(e,t)?r:e[t]}const vc=Ke((e,t,r=null)=>{const n=di(r,"allowArray",!1),i=di(r,"allowFunction",!1);if(!di(r,"nullable",!1)&&e===null||!n&&lo(e)||typeof e!="object"&&(!i||typeof e!="function"))throw new Pe(t,"Object",e)}),Sc=Ke((e,t)=>{if(e!=null&&typeof e!="object"&&typeof e!="function")throw new Pe(t,"a dictionary",e)}),Tn=Ke((e,t,r=0)=>{if(!lo(e))throw new Pe(t,"Array",e);if(e.length<r){const n=`must be longer than ${r}`;throw new dr(t,e,n)}});function Ac(e,t){Tn(e,t);for(let r=0;r<e.length;r++)co(e[r],`${t}[${r}]`)}function Rc(e,t){Tn(e,t);for(let r=0;r<e.length;r++)ya(e[r],`${t}[${r}]`)}function Ic(e,t){Tn(e,t);for(let r=0;r<e.length;r++){const n=e[r],i=`${t}[${r}]`;if(n==null)throw new Pe(i,"AbortSignal",n);_a(n,i)}}function Tc(e,t="signal"){if(co(e,t),Zo[e]===void 0)throw Zo[ac(e)]!==void 0?new Jo(e+" (signals must use all capital letters)"):new Jo(e)}const Oc=Ke((e,t="buffer")=>{if(!dc(e))throw new Pe(t,["Buffer","TypedArray","DataView"],e)});function xc(e,t){const r=cc(t),n=e.length;if(r==="hex"&&n%2!==0)throw new dr("encoding",t,`is invalid for data of length ${n}`)}function Nc(e,t="Port",r=!0){if(typeof e!="number"&&typeof e!="string"||typeof e=="string"&&lc(e).length===0||+e!==+e>>>0||e>65535||e===0&&!r)throw new uc(t,e,r);return e|0}const _a=Ke((e,t)=>{if(e!==void 0&&(e===null||typeof e!="object"||!("aborted"in e)))throw new Pe(t,"AbortSignal",e)}),Cc=Ke((e,t)=>{if(typeof e!="function")throw new Pe(t,"Function",e)}),Pc=Ke((e,t)=>{if(typeof e!="function"||fc(e))throw new Pe(t,"Function",e)}),Lc=Ke((e,t)=>{if(e!==void 0)throw new Pe(t,"undefined",e)});function Mc(e,t,r){if(!ga(r,e))throw new Pe(t,`('${pa(r,"|")}')`,e)}const Bc=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function Xo(e,t){if(typeof e>"u"||!wa(Bc,e))throw new dr(t,e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function Dc(e){if(typeof e=="string")return Xo(e,"hints"),e;if(lo(e)){const t=e.length;let r="";if(t===0)return r;for(let n=0;n<t;n++){const i=e[n];Xo(i,"hints"),r+=i,n!==t-1&&(r+=", ")}return r}throw new dr("hints",e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}var $r={isInt32:hc,isUint32:gc,parseFileMode:bc,validateArray:Tn,validateStringArray:Ac,validateBooleanArray:Rc,validateAbortSignalArray:Ic,validateBoolean:ya,validateBuffer:Oc,validateDictionary:Sc,validateEncoding:xc,validateFunction:Cc,validateInt32:_c,validateInteger:yc,validateNumber:mc,validateObject:vc,validateOneOf:Ec,validatePlainFunction:Pc,validatePort:Nc,validateSignalName:Tc,validateString:co,validateUint32:ba,validateUndefined:Lc,validateUnion:Mc,validateAbortSignal:_a,validateLinkHeaderValue:Dc},fo={exports:{}},ma={exports:{}},Se=ma.exports={},rt,nt;function Di(){throw new Error("setTimeout has not been defined")}function $i(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?rt=setTimeout:rt=Di}catch{rt=Di}try{typeof clearTimeout=="function"?nt=clearTimeout:nt=$i}catch{nt=$i}})();function Ea(e){if(rt===setTimeout)return setTimeout(e,0);if((rt===Di||!rt)&&setTimeout)return rt=setTimeout,setTimeout(e,0);try{return rt(e,0)}catch{try{return rt.call(null,e,0)}catch{return rt.call(this,e,0)}}}function $c(e){if(nt===clearTimeout)return clearTimeout(e);if((nt===$i||!nt)&&clearTimeout)return nt=clearTimeout,clearTimeout(e);try{return nt(e)}catch{try{return nt.call(null,e)}catch{return nt.call(this,e)}}}var wt=[],nr=!1,Ut,gn=-1;function kc(){!nr||!Ut||(nr=!1,Ut.length?wt=Ut.concat(wt):gn=-1,wt.length&&va())}function va(){if(!nr){var e=Ea(kc);nr=!0;for(var t=wt.length;t;){for(Ut=wt,wt=[];++gn<t;)Ut&&Ut[gn].run();gn=-1,t=wt.length}Ut=null,nr=!1,$c(e)}}Se.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];wt.push(new Sa(e,t)),wt.length===1&&!nr&&Ea(va)};function Sa(e,t){this.fun=e,this.array=t}Sa.prototype.run=function(){this.fun.apply(null,this.array)};Se.title="browser";Se.browser=!0;Se.env={};Se.argv=[];Se.version="";Se.versions={};function mt(){}Se.on=mt;Se.addListener=mt;Se.once=mt;Se.off=mt;Se.removeListener=mt;Se.removeAllListeners=mt;Se.emit=mt;Se.prependListener=mt;Se.prependOnceListener=mt;Se.listeners=function(e){return[]};Se.binding=function(e){throw new Error("process.binding is not supported")};Se.cwd=function(){return"/"};Se.chdir=function(e){throw new Error("process.chdir is not supported")};Se.umask=function(){return 0};var Yt=ma.exports;const{SymbolAsyncIterator:Qo,SymbolIterator:es,SymbolFor:Jt}=ye,Aa=Jt("nodejs.stream.destroyed"),Ra=Jt("nodejs.stream.errored"),ki=Jt("nodejs.stream.readable"),Ui=Jt("nodejs.stream.writable"),Ia=Jt("nodejs.stream.disturbed"),Uc=Jt("nodejs.webstream.isClosedPromise"),jc=Jt("nodejs.webstream.controllerErrorFunction");function On(e,t=!1){var r;return!!(e&&typeof e.pipe=="function"&&typeof e.on=="function"&&(!t||typeof e.pause=="function"&&typeof e.resume=="function")&&(!e._writableState||((r=e._readableState)===null||r===void 0?void 0:r.readable)!==!1)&&(!e._writableState||e._readableState))}function xn(e){var t;return!!(e&&typeof e.write=="function"&&typeof e.on=="function"&&(!e._readableState||((t=e._writableState)===null||t===void 0?void 0:t.writable)!==!1))}function Wc(e){return!!(e&&typeof e.pipe=="function"&&e._readableState&&typeof e.on=="function"&&typeof e.write=="function")}function at(e){return e&&(e._readableState||e._writableState||typeof e.write=="function"&&typeof e.on=="function"||typeof e.pipe=="function"&&typeof e.on=="function")}function Ta(e){return!!(e&&!at(e)&&typeof e.pipeThrough=="function"&&typeof e.getReader=="function"&&typeof e.cancel=="function")}function Oa(e){return!!(e&&!at(e)&&typeof e.getWriter=="function"&&typeof e.abort=="function")}function xa(e){return!!(e&&!at(e)&&typeof e.readable=="object"&&typeof e.writable=="object")}function Fc(e){return Ta(e)||Oa(e)||xa(e)}function qc(e,t){return e==null?!1:t===!0?typeof e[Qo]=="function":t===!1?typeof e[es]=="function":typeof e[Qo]=="function"||typeof e[es]=="function"}function Nn(e){if(!at(e))return null;const t=e._writableState,r=e._readableState,n=t||r;return!!(e.destroyed||e[Aa]||n!=null&&n.destroyed)}function Na(e){if(!xn(e))return null;if(e.writableEnded===!0)return!0;const t=e._writableState;return t!=null&&t.errored?!1:typeof(t==null?void 0:t.ended)!="boolean"?null:t.ended}function Hc(e,t){if(!xn(e))return null;if(e.writableFinished===!0)return!0;const r=e._writableState;return r!=null&&r.errored?!1:typeof(r==null?void 0:r.finished)!="boolean"?null:!!(r.finished||t===!1&&r.ended===!0&&r.length===0)}function Gc(e){if(!On(e))return null;if(e.readableEnded===!0)return!0;const t=e._readableState;return!t||t.errored?!1:typeof(t==null?void 0:t.ended)!="boolean"?null:t.ended}function Ca(e,t){if(!On(e))return null;const r=e._readableState;return r!=null&&r.errored?!1:typeof(r==null?void 0:r.endEmitted)!="boolean"?null:!!(r.endEmitted||t===!1&&r.ended===!0&&r.length===0)}function Pa(e){return e&&e[ki]!=null?e[ki]:typeof(e==null?void 0:e.readable)!="boolean"?null:Nn(e)?!1:On(e)&&e.readable&&!Ca(e)}function La(e){return e&&e[Ui]!=null?e[Ui]:typeof(e==null?void 0:e.writable)!="boolean"?null:Nn(e)?!1:xn(e)&&e.writable&&!Na(e)}function zc(e,t){return at(e)?Nn(e)?!0:!((t==null?void 0:t.readable)!==!1&&Pa(e)||(t==null?void 0:t.writable)!==!1&&La(e)):null}function Vc(e){var t,r;return at(e)?e.writableErrored?e.writableErrored:(t=(r=e._writableState)===null||r===void 0?void 0:r.errored)!==null&&t!==void 0?t:null:null}function Kc(e){var t,r;return at(e)?e.readableErrored?e.readableErrored:(t=(r=e._readableState)===null||r===void 0?void 0:r.errored)!==null&&t!==void 0?t:null:null}function Yc(e){if(!at(e))return null;if(typeof e.closed=="boolean")return e.closed;const t=e._writableState,r=e._readableState;return typeof(t==null?void 0:t.closed)=="boolean"||typeof(r==null?void 0:r.closed)=="boolean"?(t==null?void 0:t.closed)||(r==null?void 0:r.closed):typeof e._closed=="boolean"&&Ma(e)?e._closed:null}function Ma(e){return typeof e._closed=="boolean"&&typeof e._defaultKeepAlive=="boolean"&&typeof e._removedConnection=="boolean"&&typeof e._removedContLen=="boolean"}function Ba(e){return typeof e._sent100=="boolean"&&Ma(e)}function Jc(e){var t;return typeof e._consuming=="boolean"&&typeof e._dumped=="boolean"&&((t=e.req)===null||t===void 0?void 0:t.upgradeOrConnect)===void 0}function Zc(e){if(!at(e))return null;const t=e._writableState,r=e._readableState,n=t||r;return!n&&Ba(e)||!!(n&&n.autoDestroy&&n.emitClose&&n.closed===!1)}function Xc(e){var t;return!!(e&&((t=e[Ia])!==null&&t!==void 0?t:e.readableDidRead||e.readableAborted))}function Qc(e){var t,r,n,i,o,s,l,d,c,v;return!!(e&&((t=(r=(n=(i=(o=(s=e[Ra])!==null&&s!==void 0?s:e.readableErrored)!==null&&o!==void 0?o:e.writableErrored)!==null&&i!==void 0?i:(l=e._readableState)===null||l===void 0?void 0:l.errorEmitted)!==null&&n!==void 0?n:(d=e._writableState)===null||d===void 0?void 0:d.errorEmitted)!==null&&r!==void 0?r:(c=e._readableState)===null||c===void 0?void 0:c.errored)!==null&&t!==void 0?t:!((v=e._writableState)===null||v===void 0)&&v.errored))}var Et={isDestroyed:Nn,kIsDestroyed:Aa,isDisturbed:Xc,kIsDisturbed:Ia,isErrored:Qc,kIsErrored:Ra,isReadable:Pa,kIsReadable:ki,kIsClosedPromise:Uc,kControllerErrorFunction:jc,kIsWritable:Ui,isClosed:Yc,isDuplexNodeStream:Wc,isFinished:zc,isIterable:qc,isReadableNodeStream:On,isReadableStream:Ta,isReadableEnded:Gc,isReadableFinished:Ca,isReadableErrored:Kc,isNodeStream:at,isWebStream:Fc,isWritable:La,isWritableNodeStream:xn,isWritableStream:Oa,isWritableEnded:Na,isWritableFinished:Hc,isWritableErrored:Vc,isServerRequest:Jc,isServerResponse:Ba,willEmitClose:Zc,isTransformStream:xa};const It=Yt,{AbortError:Da,codes:ef}=Le,{ERR_INVALID_ARG_TYPE:tf,ERR_STREAM_PREMATURE_CLOSE:ts}=ef,{kEmptyObject:ji,once:Wi}=ke,{validateAbortSignal:rf,validateFunction:nf,validateObject:of,validateBoolean:sf}=$r,{Promise:af,PromisePrototypeThen:lf,SymbolDispose:$a}=ye,{isClosed:uf,isReadable:rs,isReadableNodeStream:hi,isReadableStream:cf,isReadableFinished:ns,isReadableErrored:is,isWritable:os,isWritableNodeStream:ss,isWritableStream:ff,isWritableFinished:as,isWritableErrored:ls,isNodeStream:df,willEmitClose:hf,kIsClosedPromise:gf}=Et;let ir;function pf(e){return e.setHeader&&typeof e.abort=="function"}const Fi=()=>{};function ka(e,t,r){var n,i;if(arguments.length===2?(r=t,t=ji):t==null?t=ji:of(t,"options"),nf(r,"callback"),rf(t.signal,"options.signal"),r=Wi(r),cf(e)||ff(e))return wf(e,t,r);if(!df(e))throw new tf("stream",["ReadableStream","WritableStream","Stream"],e);const o=(n=t.readable)!==null&&n!==void 0?n:hi(e),s=(i=t.writable)!==null&&i!==void 0?i:ss(e),l=e._writableState,d=e._readableState,c=()=>{e.writable||B()};let v=hf(e)&&hi(e)===o&&ss(e)===s,R=as(e,!1);const B=()=>{R=!0,e.destroyed&&(v=!1),!(v&&(!e.readable||o))&&(!o||M)&&r.call(e)};let M=ns(e,!1);const k=()=>{M=!0,e.destroyed&&(v=!1),!(v&&(!e.writable||s))&&(!s||R)&&r.call(e)},m=H=>{r.call(e,H)};let T=uf(e);const N=()=>{T=!0;const H=ls(e)||is(e);if(H&&typeof H!="boolean")return r.call(e,H);if(o&&!M&&hi(e,!0)&&!ns(e,!1))return r.call(e,new ts);if(s&&!R&&!as(e,!1))return r.call(e,new ts);r.call(e)},I=()=>{T=!0;const H=ls(e)||is(e);if(H&&typeof H!="boolean")return r.call(e,H);r.call(e)},L=()=>{e.req.on("finish",B)};pf(e)?(e.on("complete",B),v||e.on("abort",N),e.req?L():e.on("request",L)):s&&!l&&(e.on("end",c),e.on("close",c)),!v&&typeof e.aborted=="boolean"&&e.on("aborted",N),e.on("end",k),e.on("finish",B),t.error!==!1&&e.on("error",m),e.on("close",N),T?It.nextTick(N):l!=null&&l.errorEmitted||d!=null&&d.errorEmitted?v||It.nextTick(I):(!o&&(!v||rs(e))&&(R||os(e)===!1)||!s&&(!v||os(e))&&(M||rs(e)===!1)||d&&e.req&&e.aborted)&&It.nextTick(I);const K=()=>{r=Fi,e.removeListener("aborted",N),e.removeListener("complete",B),e.removeListener("abort",N),e.removeListener("request",L),e.req&&e.req.removeListener("finish",B),e.removeListener("end",c),e.removeListener("close",c),e.removeListener("finish",B),e.removeListener("end",k),e.removeListener("error",m),e.removeListener("close",N)};if(t.signal&&!T){const H=()=>{const G=r;K(),G.call(e,new Da(void 0,{cause:t.signal.reason}))};if(t.signal.aborted)It.nextTick(H);else{ir=ir||ke.addAbortListener;const G=ir(t.signal,H),V=r;r=Wi((...a)=>{G[$a](),V.apply(e,a)})}}return K}function wf(e,t,r){let n=!1,i=Fi;if(t.signal)if(i=()=>{n=!0,r.call(e,new Da(void 0,{cause:t.signal.reason}))},t.signal.aborted)It.nextTick(i);else{ir=ir||ke.addAbortListener;const s=ir(t.signal,i),l=r;r=Wi((...d)=>{s[$a](),l.apply(e,d)})}const o=(...s)=>{n||It.nextTick(()=>r.apply(e,s))};return lf(e[gf].promise,o,o),Fi}function bf(e,t){var r;let n=!1;return t===null&&(t=ji),(r=t)!==null&&r!==void 0&&r.cleanup&&(sf(t.cleanup,"cleanup"),n=t.cleanup),new af((i,o)=>{const s=ka(e,t,l=>{n&&s(),l?o(l):i()})})}fo.exports=ka;fo.exports.finished=bf;var Nt=fo.exports;const ot=Yt,{aggregateTwoErrors:yf,codes:{ERR_MULTIPLE_CALLBACK:_f},AbortError:mf}=Le,{Symbol:Ua}=ye,{kIsDestroyed:Ef,isDestroyed:vf,isFinished:Sf,isServerRequest:Af}=Et,ja=Ua("kDestroy"),qi=Ua("kConstruct");function Wa(e,t,r){e&&(e.stack,t&&!t.errored&&(t.errored=e),r&&!r.errored&&(r.errored=e))}function Rf(e,t){const r=this._readableState,n=this._writableState,i=n||r;return n!=null&&n.destroyed||r!=null&&r.destroyed?(typeof t=="function"&&t(),this):(Wa(e,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),i.constructed?us(this,e,t):this.once(ja,function(o){us(this,yf(o,e),t)}),this)}function us(e,t,r){let n=!1;function i(o){if(n)return;n=!0;const s=e._readableState,l=e._writableState;Wa(o,l,s),l&&(l.closed=!0),s&&(s.closed=!0),typeof r=="function"&&r(o),o?ot.nextTick(If,e,o):ot.nextTick(Fa,e)}try{e._destroy(t||null,i)}catch(o){i(o)}}function If(e,t){Hi(e,t),Fa(e)}function Fa(e){const t=e._readableState,r=e._writableState;r&&(r.closeEmitted=!0),t&&(t.closeEmitted=!0),(r!=null&&r.emitClose||t!=null&&t.emitClose)&&e.emit("close")}function Hi(e,t){const r=e._readableState,n=e._writableState;n!=null&&n.errorEmitted||r!=null&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),e.emit("error",t))}function Tf(){const e=this._readableState,t=this._writableState;e&&(e.constructed=!0,e.closed=!1,e.closeEmitted=!1,e.destroyed=!1,e.errored=null,e.errorEmitted=!1,e.reading=!1,e.ended=e.readable===!1,e.endEmitted=e.readable===!1),t&&(t.constructed=!0,t.destroyed=!1,t.closed=!1,t.closeEmitted=!1,t.errored=null,t.errorEmitted=!1,t.finalCalled=!1,t.prefinished=!1,t.ended=t.writable===!1,t.ending=t.writable===!1,t.finished=t.writable===!1)}function Gi(e,t,r){const n=e._readableState,i=e._writableState;if(i!=null&&i.destroyed||n!=null&&n.destroyed)return this;n!=null&&n.autoDestroy||i!=null&&i.autoDestroy?e.destroy(t):t&&(t.stack,i&&!i.errored&&(i.errored=t),n&&!n.errored&&(n.errored=t),r?ot.nextTick(Hi,e,t):Hi(e,t))}function Of(e,t){if(typeof e._construct!="function")return;const r=e._readableState,n=e._writableState;r&&(r.constructed=!1),n&&(n.constructed=!1),e.once(qi,t),!(e.listenerCount(qi)>1)&&ot.nextTick(xf,e)}function xf(e){let t=!1;function r(n){if(t){Gi(e,n??new _f);return}t=!0;const i=e._readableState,o=e._writableState,s=o||i;i&&(i.constructed=!0),o&&(o.constructed=!0),s.destroyed?e.emit(ja,n):n?Gi(e,n,!0):ot.nextTick(Nf,e)}try{e._construct(n=>{ot.nextTick(r,n)})}catch(n){ot.nextTick(r,n)}}function Nf(e){e.emit(qi)}function cs(e){return(e==null?void 0:e.setHeader)&&typeof e.abort=="function"}function qa(e){e.emit("close")}function Cf(e,t){e.emit("error",t),ot.nextTick(qa,e)}function Pf(e,t){!e||vf(e)||(!t&&!Sf(e)&&(t=new mf),Af(e)?(e.socket=null,e.destroy(t)):cs(e)?e.abort():cs(e.req)?e.req.abort():typeof e.destroy=="function"?e.destroy(t):typeof e.close=="function"?e.close():t?ot.nextTick(Cf,e,t):ot.nextTick(qa,e),e.destroyed||(e[Ef]=!0))}var hr={construct:Of,destroyer:Pf,destroy:Rf,undestroy:Tf,errorOrDestroy:Gi};const{ArrayIsArray:Lf,ObjectSetPrototypeOf:Ha}=ye,{EventEmitter:Cn}=Br;function Pn(e){Cn.call(this,e)}Ha(Pn.prototype,Cn.prototype);Ha(Pn,Cn);Pn.prototype.pipe=function(e,t){const r=this;function n(v){e.writable&&e.write(v)===!1&&r.pause&&r.pause()}r.on("data",n);function i(){r.readable&&r.resume&&r.resume()}e.on("drain",i),!e._isStdio&&(!t||t.end!==!1)&&(r.on("end",s),r.on("close",l));let o=!1;function s(){o||(o=!0,e.end())}function l(){o||(o=!0,typeof e.destroy=="function"&&e.destroy())}function d(v){c(),Cn.listenerCount(this,"error")===0&&this.emit("error",v)}zi(r,"error",d),zi(e,"error",d);function c(){r.removeListener("data",n),e.removeListener("drain",i),r.removeListener("end",s),r.removeListener("close",l),r.removeListener("error",d),e.removeListener("error",d),r.removeListener("end",c),r.removeListener("close",c),e.removeListener("close",c)}return r.on("end",c),r.on("close",c),e.on("close",c),e.emit("pipe",r),e};function zi(e,t,r){if(typeof e.prependListener=="function")return e.prependListener(t,r);!e._events||!e._events[t]?e.on(t,r):Lf(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]}var ho={Stream:Pn,prependListener:zi},Ga={exports:{}};(function(e){const{SymbolDispose:t}=ye,{AbortError:r,codes:n}=Le,{isNodeStream:i,isWebStream:o,kControllerErrorFunction:s}=Et,l=Nt,{ERR_INVALID_ARG_TYPE:d}=n;let c;const v=(R,B)=>{if(typeof R!="object"||!("aborted"in R))throw new d(B,"AbortSignal",R)};e.exports.addAbortSignal=function(B,M){if(v(B,"signal"),!i(M)&&!o(M))throw new d("stream",["ReadableStream","WritableStream","Stream"],M);return e.exports.addAbortSignalNoValidate(B,M)},e.exports.addAbortSignalNoValidate=function(R,B){if(typeof R!="object"||!("aborted"in R))return B;const M=i(B)?()=>{B.destroy(new r(void 0,{cause:R.reason}))}:()=>{B[s](new r(void 0,{cause:R.reason}))};if(R.aborted)M();else{c=c||ke.addAbortListener;const k=c(R,M);l(B,k[t])}return B}})(Ga);var Ln=Ga.exports;const{StringPrototypeSlice:fs,SymbolIterator:Mf,TypedArrayPrototypeSet:sn,Uint8Array:Bf}=ye,{Buffer:gi}=Kt,{inspect:Df}=ke;var $f=class{constructor(){this.head=null,this.tail=null,this.length=0}push(t){const r={data:t,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}unshift(t){const r={data:t,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}shift(){if(this.length===0)return;const t=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,t}clear(){this.head=this.tail=null,this.length=0}join(t){if(this.length===0)return"";let r=this.head,n=""+r.data;for(;(r=r.next)!==null;)n+=t+r.data;return n}concat(t){if(this.length===0)return gi.alloc(0);const r=gi.allocUnsafe(t>>>0);let n=this.head,i=0;for(;n;)sn(r,n.data,i),i+=n.data.length,n=n.next;return r}consume(t,r){const n=this.head.data;if(t<n.length){const i=n.slice(0,t);return this.head.data=n.slice(t),i}return t===n.length?this.shift():r?this._getString(t):this._getBuffer(t)}first(){return this.head.data}*[Mf](){for(let t=this.head;t;t=t.next)yield t.data}_getString(t){let r="",n=this.head,i=0;do{const o=n.data;if(t>o.length)r+=o,t-=o.length;else{t===o.length?(r+=o,++i,n.next?this.head=n.next:this.head=this.tail=null):(r+=fs(o,0,t),this.head=n,n.data=fs(o,t));break}++i}while((n=n.next)!==null);return this.length-=i,r}_getBuffer(t){const r=gi.allocUnsafe(t),n=t;let i=this.head,o=0;do{const s=i.data;if(t>s.length)sn(r,s,n-t),t-=s.length;else{t===s.length?(sn(r,s,n-t),++o,i.next?this.head=i.next:this.head=this.tail=null):(sn(r,new Bf(s.buffer,s.byteOffset,t),n-t),this.head=i,i.data=s.slice(t));break}++o}while((i=i.next)!==null);return this.length-=o,r}[Symbol.for("nodejs.util.inspect.custom")](t,r){return Df(this,{...r,depth:0,customInspect:!1})}};const{MathFloor:kf,NumberIsInteger:Uf}=ye,{validateInteger:jf}=$r,{ERR_INVALID_ARG_VALUE:Wf}=Le.codes;let za=16*1024,Va=16;function Ff(e,t,r){return e.highWaterMark!=null?e.highWaterMark:t?e[r]:null}function Ka(e){return e?Va:za}function qf(e,t){jf(t,"value",0),e?Va=t:za=t}function Hf(e,t,r,n){const i=Ff(t,n,r);if(i!=null){if(!Uf(i)||i<0){const o=n?`options.${r}`:"options.highWaterMark";throw new Wf(o,i)}return kf(i)}return Ka(e.objectMode)}var Mn={getHighWaterMark:Hf,getDefaultHighWaterMark:Ka,setDefaultHighWaterMark:qf};const ds=Yt,{PromisePrototypeThen:Gf,SymbolAsyncIterator:hs,SymbolIterator:gs}=ye,{Buffer:zf}=Kt,{ERR_INVALID_ARG_TYPE:Vf,ERR_STREAM_NULL_VALUES:Kf}=Le.codes;function Yf(e,t,r){let n;if(typeof t=="string"||t instanceof zf)return new e({objectMode:!0,...r,read(){this.push(t),this.push(null)}});let i;if(t&&t[hs])i=!0,n=t[hs]();else if(t&&t[gs])i=!1,n=t[gs]();else throw new Vf("iterable",["Iterable"],t);const o=new e({objectMode:!0,highWaterMark:1,...r});let s=!1;o._read=function(){s||(s=!0,d())},o._destroy=function(c,v){Gf(l(c),()=>ds.nextTick(v,c),R=>ds.nextTick(v,R||c))};async function l(c){const v=c!=null,R=typeof n.throw=="function";if(v&&R){const{value:B,done:M}=await n.throw(c);if(await B,M)return}if(typeof n.return=="function"){const{value:B}=await n.return();await B}}async function d(){for(;;){try{const{value:c,done:v}=i?await n.next():n.next();if(v)o.push(null);else{const R=c&&typeof c.then=="function"?await c:c;if(R===null)throw s=!1,new Kf;if(o.push(R))continue;s=!1}}catch(c){o.destroy(c)}break}}return o}var Ya=Yf,pi,ps;function Bn(){if(ps)return pi;ps=1;const e=Yt,{ArrayPrototypeIndexOf:t,NumberIsInteger:r,NumberIsNaN:n,NumberParseInt:i,ObjectDefineProperties:o,ObjectKeys:s,ObjectSetPrototypeOf:l,Promise:d,SafeSet:c,SymbolAsyncDispose:v,SymbolAsyncIterator:R,Symbol:B}=ye;pi=ne,ne.ReadableState=Ue;const{EventEmitter:M}=Br,{Stream:k,prependListener:m}=ho,{Buffer:T}=Kt,{addAbortSignal:N}=Ln,I=Nt;let L=ke.debuglog("stream",h=>{L=h});const K=$f,H=hr,{getHighWaterMark:G,getDefaultHighWaterMark:V}=Mn,{aggregateTwoErrors:a,codes:{ERR_INVALID_ARG_TYPE:f,ERR_METHOD_NOT_IMPLEMENTED:b,ERR_OUT_OF_RANGE:E,ERR_STREAM_PUSH_AFTER_EOF:_,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:g},AbortError:C}=Le,{validateObject:u}=$r,w=B("kPaused"),{StringDecoder:S}=ua,A=Ya;l(ne.prototype,k.prototype),l(ne,k);const D=()=>{},{errorOrDestroy:W}=H,F=1,X=2,j=4,re=8,te=16,ie=32,se=64,Ee=128,Ae=256,Re=512,_e=1024,me=2048,O=4096,P=8192,U=16384,Y=32768,Q=65536,ce=1<<17,ge=1<<18;function le(h){return{enumerable:!1,get(){return(this.state&h)!==0},set(y){y?this.state|=h:this.state&=~h}}}o(Ue.prototype,{objectMode:le(F),ended:le(X),endEmitted:le(j),reading:le(re),constructed:le(te),sync:le(ie),needReadable:le(se),emittedReadable:le(Ee),readableListening:le(Ae),resumeScheduled:le(Re),errorEmitted:le(_e),emitClose:le(me),autoDestroy:le(O),destroyed:le(P),closed:le(U),closeEmitted:le(Y),multiAwaitDrain:le(Q),readingMore:le(ce),dataEmitted:le(ge)});function Ue(h,y,q){typeof q!="boolean"&&(q=y instanceof yt()),this.state=me|O|te|ie,h&&h.objectMode&&(this.state|=F),q&&h&&h.readableObjectMode&&(this.state|=F),this.highWaterMark=h?G(this,h,"readableHighWaterMark",q):V(!1),this.buffer=new K,this.length=0,this.pipes=[],this.flowing=null,this[w]=null,h&&h.emitClose===!1&&(this.state&=~me),h&&h.autoDestroy===!1&&(this.state&=~O),this.errored=null,this.defaultEncoding=h&&h.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,h&&h.encoding&&(this.decoder=new S(h.encoding),this.encoding=h.encoding)}function ne(h){if(!(this instanceof ne))return new ne(h);const y=this instanceof yt();this._readableState=new Ue(h,this,y),h&&(typeof h.read=="function"&&(this._read=h.read),typeof h.destroy=="function"&&(this._destroy=h.destroy),typeof h.construct=="function"&&(this._construct=h.construct),h.signal&&!y&&N(h.signal,this)),k.call(this,h),H.construct(this,()=>{this._readableState.needReadable&&Pt(this,this._readableState)})}ne.prototype.destroy=H.destroy,ne.prototype._undestroy=H.undestroy,ne.prototype._destroy=function(h,y){y(h)},ne.prototype[M.captureRejectionSymbol]=function(h){this.destroy(h)},ne.prototype[v]=function(){let h;return this.destroyed||(h=this.readableEnded?null:new C,this.destroy(h)),new d((y,q)=>I(this,z=>z&&z!==h?q(z):y(null)))},ne.prototype.push=function(h,y){return xe(this,h,y,!1)},ne.prototype.unshift=function(h,y){return xe(this,h,y,!0)};function xe(h,y,q,z){L("readableAddChunk",y);const J=h._readableState;let Ie;if(J.state&F||(typeof y=="string"?(q=q||J.defaultEncoding,J.encoding!==q&&(z&&J.encoding?y=T.from(y,q).toString(J.encoding):(y=T.from(y,q),q=""))):y instanceof T?q="":k._isUint8Array(y)?(y=k._uint8ArrayToBuffer(y),q=""):y!=null&&(Ie=new f("chunk",["string","Buffer","Uint8Array"],y))),Ie)W(h,Ie);else if(y===null)J.state&=~re,er(h,J);else if(J.state&F||y&&y.length>0)if(z)if(J.state&j)W(h,new g);else{if(J.destroyed||J.errored)return!1;Qt(h,J,y,!0)}else if(J.ended)W(h,new _);else{if(J.destroyed||J.errored)return!1;J.state&=~re,J.decoder&&!q?(y=J.decoder.write(y),J.objectMode||y.length!==0?Qt(h,J,y,!1):Pt(h,J)):Qt(h,J,y,!1)}else z||(J.state&=~re,Pt(h,J));return!J.ended&&(J.length<J.highWaterMark||J.length===0)}function Qt(h,y,q,z){y.flowing&&y.length===0&&!y.sync&&h.listenerCount("data")>0?(y.state&Q?y.awaitDrainWriters.clear():y.awaitDrainWriters=null,y.dataEmitted=!0,h.emit("data",q)):(y.length+=y.objectMode?1:q.length,z?y.buffer.unshift(q):y.buffer.push(q),y.state&se&&Ct(h)),Pt(h,y)}ne.prototype.isPaused=function(){const h=this._readableState;return h[w]===!0||h.flowing===!1},ne.prototype.setEncoding=function(h){const y=new S(h);this._readableState.decoder=y,this._readableState.encoding=this._readableState.decoder.encoding;const q=this._readableState.buffer;let z="";for(const J of q)z+=y.write(J);return q.clear(),z!==""&&q.push(z),this._readableState.length=z.length,this};const Fr=1073741824;function zn(h){if(h>Fr)throw new E("size","<= 1GiB",h);return h--,h|=h>>>1,h|=h>>>2,h|=h>>>4,h|=h>>>8,h|=h>>>16,h++,h}function qr(h,y){return h<=0||y.length===0&&y.ended?0:y.state&F?1:n(h)?y.flowing&&y.length?y.buffer.first().length:y.length:h<=y.length?h:y.ended?y.length:0}ne.prototype.read=function(h){L("read",h),h===void 0?h=NaN:r(h)||(h=i(h,10));const y=this._readableState,q=h;if(h>y.highWaterMark&&(y.highWaterMark=zn(h)),h!==0&&(y.state&=~Ee),h===0&&y.needReadable&&((y.highWaterMark!==0?y.length>=y.highWaterMark:y.length>0)||y.ended))return L("read: emitReadable",y.length,y.ended),y.length===0&&y.ended?br(this):Ct(this),null;if(h=qr(h,y),h===0&&y.ended)return y.length===0&&br(this),null;let z=(y.state&se)!==0;if(L("need readable",z),(y.length===0||y.length-h<y.highWaterMark)&&(z=!0,L("length less than watermark",z)),y.ended||y.reading||y.destroyed||y.errored||!y.constructed)z=!1,L("reading, ended or constructing",z);else if(z){L("do read"),y.state|=re|ie,y.length===0&&(y.state|=se);try{this._read(y.highWaterMark)}catch(Ie){W(this,Ie)}y.state&=~ie,y.reading||(h=qr(q,y))}let J;return h>0?J=vt(h,y):J=null,J===null?(y.needReadable=y.length<=y.highWaterMark,h=0):(y.length-=h,y.multiAwaitDrain?y.awaitDrainWriters.clear():y.awaitDrainWriters=null),y.length===0&&(y.ended||(y.needReadable=!0),q!==h&&y.ended&&br(this)),J!==null&&!y.errorEmitted&&!y.closeEmitted&&(y.dataEmitted=!0,this.emit("data",J)),J};function er(h,y){if(L("onEofChunk"),!y.ended){if(y.decoder){const q=y.decoder.end();q&&q.length&&(y.buffer.push(q),y.length+=y.objectMode?1:q.length)}y.ended=!0,y.sync?Ct(h):(y.needReadable=!1,y.emittedReadable=!0,pr(h))}}function Ct(h){const y=h._readableState;L("emitReadable",y.needReadable,y.emittedReadable),y.needReadable=!1,y.emittedReadable||(L("emitReadable",y.flowing),y.emittedReadable=!0,e.nextTick(pr,h))}function pr(h){const y=h._readableState;L("emitReadable_",y.destroyed,y.length,y.ended),!y.destroyed&&!y.errored&&(y.length||y.ended)&&(h.emit("readable"),y.emittedReadable=!1),y.needReadable=!y.flowing&&!y.ended&&y.length<=y.highWaterMark,wr(h)}function Pt(h,y){!y.readingMore&&y.constructed&&(y.readingMore=!0,e.nextTick(Hr,h,y))}function Hr(h,y){for(;!y.reading&&!y.ended&&(y.length<y.highWaterMark||y.flowing&&y.length===0);){const q=y.length;if(L("maybeReadMore read 0"),h.read(0),q===y.length)break}y.readingMore=!1}ne.prototype._read=function(h){throw new b("_read()")},ne.prototype.pipe=function(h,y){const q=this,z=this._readableState;z.pipes.length===1&&(z.multiAwaitDrain||(z.multiAwaitDrain=!0,z.awaitDrainWriters=new c(z.awaitDrainWriters?[z.awaitDrainWriters]:[]))),z.pipes.push(h),L("pipe count=%d opts=%j",z.pipes.length,y);const Ie=(!y||y.end!==!1)&&h!==e.stdout&&h!==e.stderr?Yr:Lt;z.endEmitted?e.nextTick(Ie):q.once("end",Ie),h.on("unpipe",Me);function Me(ct,Ye){L("onunpipe"),ct===q&&Ye&&Ye.hasUnpiped===!1&&(Ye.hasUnpiped=!0,Jn())}function Yr(){L("onend"),h.end()}let Be,Jr=!1;function Jn(){L("cleanup"),h.removeListener("close",et),h.removeListener("finish",mr),Be&&h.removeListener("drain",Be),h.removeListener("error",_r),h.removeListener("unpipe",Me),q.removeListener("end",Yr),q.removeListener("end",Lt),q.removeListener("data",Xr),Jr=!0,Be&&z.awaitDrainWriters&&(!h._writableState||h._writableState.needDrain)&&Be()}function Zr(){Jr||(z.pipes.length===1&&z.pipes[0]===h?(L("false write response, pause",0),z.awaitDrainWriters=h,z.multiAwaitDrain=!1):z.pipes.length>1&&z.pipes.includes(h)&&(L("false write response, pause",z.awaitDrainWriters.size),z.awaitDrainWriters.add(h)),q.pause()),Be||(Be=Vn(q,h),h.on("drain",Be))}q.on("data",Xr);function Xr(ct){L("ondata");const Ye=h.write(ct);L("dest.write",Ye),Ye===!1&&Zr()}function _r(ct){if(L("onerror",ct),Lt(),h.removeListener("error",_r),h.listenerCount("error")===0){const Ye=h._writableState||h._readableState;Ye&&!Ye.errorEmitted?W(h,ct):h.emit("error",ct)}}m(h,"error",_r);function et(){h.removeListener("finish",mr),Lt()}h.once("close",et);function mr(){L("onfinish"),h.removeListener("close",et),Lt()}h.once("finish",mr);function Lt(){L("unpipe"),q.unpipe(h)}return h.emit("pipe",q),h.writableNeedDrain===!0?Zr():z.flowing||(L("pipe resume"),q.resume()),h};function Vn(h,y){return function(){const z=h._readableState;z.awaitDrainWriters===y?(L("pipeOnDrain",1),z.awaitDrainWriters=null):z.multiAwaitDrain&&(L("pipeOnDrain",z.awaitDrainWriters.size),z.awaitDrainWriters.delete(y)),(!z.awaitDrainWriters||z.awaitDrainWriters.size===0)&&h.listenerCount("data")&&h.resume()}}ne.prototype.unpipe=function(h){const y=this._readableState,q={hasUnpiped:!1};if(y.pipes.length===0)return this;if(!h){const J=y.pipes;y.pipes=[],this.pause();for(let Ie=0;Ie<J.length;Ie++)J[Ie].emit("unpipe",this,{hasUnpiped:!1});return this}const z=t(y.pipes,h);return z===-1?this:(y.pipes.splice(z,1),y.pipes.length===0&&this.pause(),h.emit("unpipe",this,q),this)},ne.prototype.on=function(h,y){const q=k.prototype.on.call(this,h,y),z=this._readableState;return h==="data"?(z.readableListening=this.listenerCount("readable")>0,z.flowing!==!1&&this.resume()):h==="readable"&&!z.endEmitted&&!z.readableListening&&(z.readableListening=z.needReadable=!0,z.flowing=!1,z.emittedReadable=!1,L("on readable",z.length,z.reading),z.length?Ct(this):z.reading||e.nextTick(lt,this)),q},ne.prototype.addListener=ne.prototype.on,ne.prototype.removeListener=function(h,y){const q=k.prototype.removeListener.call(this,h,y);return h==="readable"&&e.nextTick(Gr,this),q},ne.prototype.off=ne.prototype.removeListener,ne.prototype.removeAllListeners=function(h){const y=k.prototype.removeAllListeners.apply(this,arguments);return(h==="readable"||h===void 0)&&e.nextTick(Gr,this),y};function Gr(h){const y=h._readableState;y.readableListening=h.listenerCount("readable")>0,y.resumeScheduled&&y[w]===!1?y.flowing=!0:h.listenerCount("data")>0?h.resume():y.readableListening||(y.flowing=null)}function lt(h){L("readable nexttick read 0"),h.read(0)}ne.prototype.resume=function(){const h=this._readableState;return h.flowing||(L("resume"),h.flowing=!h.readableListening,tr(this,h)),h[w]=!1,this};function tr(h,y){y.resumeScheduled||(y.resumeScheduled=!0,e.nextTick(Kn,h,y))}function Kn(h,y){L("resume",y.reading),y.reading||h.read(0),y.resumeScheduled=!1,h.emit("resume"),wr(h),y.flowing&&!y.reading&&h.read(0)}ne.prototype.pause=function(){return L("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(L("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[w]=!0,this};function wr(h){const y=h._readableState;for(L("flow",y.flowing);y.flowing&&h.read()!==null;);}ne.prototype.wrap=function(h){let y=!1;h.on("data",z=>{!this.push(z)&&h.pause&&(y=!0,h.pause())}),h.on("end",()=>{this.push(null)}),h.on("error",z=>{W(this,z)}),h.on("close",()=>{this.destroy()}),h.on("destroy",()=>{this.destroy()}),this._read=()=>{y&&h.resume&&(y=!1,h.resume())};const q=s(h);for(let z=1;z<q.length;z++){const J=q[z];this[J]===void 0&&typeof h[J]=="function"&&(this[J]=h[J].bind(h))}return this},ne.prototype[R]=function(){return zr(this)},ne.prototype.iterator=function(h){return h!==void 0&&u(h,"options"),zr(this,h)};function zr(h,y){typeof h.read!="function"&&(h=ne.wrap(h,{objectMode:!0}));const q=Vr(h,y);return q.stream=h,q}async function*Vr(h,y){let q=D;function z(Me){this===h?(q(),q=D):q=Me}h.on("readable",z);let J;const Ie=I(h,{writable:!1},Me=>{J=Me?a(J,Me):null,q(),q=D});try{for(;;){const Me=h.destroyed?null:h.read();if(Me!==null)yield Me;else{if(J)throw J;if(J===null)return;await new d(z)}}}catch(Me){throw J=a(J,Me),J}finally{(J||(y==null?void 0:y.destroyOnReturn)!==!1)&&(J===void 0||h._readableState.autoDestroy)?H.destroyer(h,null):(h.off("readable",z),Ie())}}o(ne.prototype,{readable:{__proto__:null,get(){const h=this._readableState;return!!h&&h.readable!==!1&&!h.destroyed&&!h.errorEmitted&&!h.endEmitted},set(h){this._readableState&&(this._readableState.readable=!!h)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(h){this._readableState&&(this._readableState.flowing=h)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(h){this._readableState&&(this._readableState.destroyed=h)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),o(Ue.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[w]!==!1},set(h){this[w]=!!h}}}),ne._fromList=vt;function vt(h,y){if(y.length===0)return null;let q;return y.objectMode?q=y.buffer.shift():!h||h>=y.length?(y.decoder?q=y.buffer.join(""):y.buffer.length===1?q=y.buffer.first():q=y.buffer.concat(y.length),y.buffer.clear()):q=y.buffer.consume(h,y.decoder),q}function br(h){const y=h._readableState;L("endReadable",y.endEmitted),y.endEmitted||(y.ended=!0,e.nextTick(ut,y,h))}function ut(h,y){if(L("endReadableNT",h.endEmitted,h.length),!h.errored&&!h.closeEmitted&&!h.endEmitted&&h.length===0){if(h.endEmitted=!0,y.emit("end"),y.writable&&y.allowHalfOpen===!1)e.nextTick(Yn,y);else if(h.autoDestroy){const q=y._writableState;(!q||q.autoDestroy&&(q.finished||q.writable===!1))&&y.destroy()}}}function Yn(h){h.writable&&!h.writableEnded&&!h.destroyed&&h.end()}ne.from=function(h,y){return A(ne,h,y)};let yr;function Kr(){return yr===void 0&&(yr={}),yr}return ne.fromWeb=function(h,y){return Kr().newStreamReadableFromReadableStream(h,y)},ne.toWeb=function(h,y){return Kr().newReadableStreamFromStreamReadable(h,y)},ne.wrap=function(h,y){var q,z;return new ne({objectMode:(q=(z=h.readableObjectMode)!==null&&z!==void 0?z:h.objectMode)!==null&&q!==void 0?q:!0,...y,destroy(J,Ie){H.destroyer(h,J),Ie(J)}}).wrap(h)},pi}var wi,ws;function go(){if(ws)return wi;ws=1;const e=Yt,{ArrayPrototypeSlice:t,Error:r,FunctionPrototypeSymbolHasInstance:n,ObjectDefineProperty:i,ObjectDefineProperties:o,ObjectSetPrototypeOf:s,StringPrototypeToLowerCase:l,Symbol:d,SymbolHasInstance:c}=ye;wi=u,u.WritableState=g;const{EventEmitter:v}=Br,R=ho.Stream,{Buffer:B}=Kt,M=hr,{addAbortSignal:k}=Ln,{getHighWaterMark:m,getDefaultHighWaterMark:T}=Mn,{ERR_INVALID_ARG_TYPE:N,ERR_METHOD_NOT_IMPLEMENTED:I,ERR_MULTIPLE_CALLBACK:L,ERR_STREAM_CANNOT_PIPE:K,ERR_STREAM_DESTROYED:H,ERR_STREAM_ALREADY_FINISHED:G,ERR_STREAM_NULL_VALUES:V,ERR_STREAM_WRITE_AFTER_END:a,ERR_UNKNOWN_ENCODING:f}=Le.codes,{errorOrDestroy:b}=M;s(u.prototype,R.prototype),s(u,R);function E(){}const _=d("kOnFinished");function g(O,P,U){typeof U!="boolean"&&(U=P instanceof yt()),this.objectMode=!!(O&&O.objectMode),U&&(this.objectMode=this.objectMode||!!(O&&O.writableObjectMode)),this.highWaterMark=O?m(this,O,"writableHighWaterMark",U):T(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const Y=!!(O&&O.decodeStrings===!1);this.decodeStrings=!Y,this.defaultEncoding=O&&O.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=W.bind(void 0,P),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,C(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!O||O.emitClose!==!1,this.autoDestroy=!O||O.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[_]=[]}function C(O){O.buffered=[],O.bufferedIndex=0,O.allBuffers=!0,O.allNoop=!0}g.prototype.getBuffer=function(){return t(this.buffered,this.bufferedIndex)},i(g.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function u(O){const P=this instanceof yt();if(!P&&!n(u,this))return new u(O);this._writableState=new g(O,this,P),O&&(typeof O.write=="function"&&(this._write=O.write),typeof O.writev=="function"&&(this._writev=O.writev),typeof O.destroy=="function"&&(this._destroy=O.destroy),typeof O.final=="function"&&(this._final=O.final),typeof O.construct=="function"&&(this._construct=O.construct),O.signal&&k(O.signal,this)),R.call(this,O),M.construct(this,()=>{const U=this._writableState;U.writing||re(this,U),Ee(this,U)})}i(u,c,{__proto__:null,value:function(O){return n(this,O)?!0:this!==u?!1:O&&O._writableState instanceof g}}),u.prototype.pipe=function(){b(this,new K)};function w(O,P,U,Y){const Q=O._writableState;if(typeof U=="function")Y=U,U=Q.defaultEncoding;else{if(!U)U=Q.defaultEncoding;else if(U!=="buffer"&&!B.isEncoding(U))throw new f(U);typeof Y!="function"&&(Y=E)}if(P===null)throw new V;if(!Q.objectMode)if(typeof P=="string")Q.decodeStrings!==!1&&(P=B.from(P,U),U="buffer");else if(P instanceof B)U="buffer";else if(R._isUint8Array(P))P=R._uint8ArrayToBuffer(P),U="buffer";else throw new N("chunk",["string","Buffer","Uint8Array"],P);let ce;return Q.ending?ce=new a:Q.destroyed&&(ce=new H("write")),ce?(e.nextTick(Y,ce),b(O,ce,!0),ce):(Q.pendingcb++,S(O,Q,P,U,Y))}u.prototype.write=function(O,P,U){return w(this,O,P,U)===!0},u.prototype.cork=function(){this._writableState.corked++},u.prototype.uncork=function(){const O=this._writableState;O.corked&&(O.corked--,O.writing||re(this,O))},u.prototype.setDefaultEncoding=function(P){if(typeof P=="string"&&(P=l(P)),!B.isEncoding(P))throw new f(P);return this._writableState.defaultEncoding=P,this};function S(O,P,U,Y,Q){const ce=P.objectMode?1:U.length;P.length+=ce;const ge=P.length<P.highWaterMark;return ge||(P.needDrain=!0),P.writing||P.corked||P.errored||!P.constructed?(P.buffered.push({chunk:U,encoding:Y,callback:Q}),P.allBuffers&&Y!=="buffer"&&(P.allBuffers=!1),P.allNoop&&Q!==E&&(P.allNoop=!1)):(P.writelen=ce,P.writecb=Q,P.writing=!0,P.sync=!0,O._write(U,Y,P.onwrite),P.sync=!1),ge&&!P.errored&&!P.destroyed}function A(O,P,U,Y,Q,ce,ge){P.writelen=Y,P.writecb=ge,P.writing=!0,P.sync=!0,P.destroyed?P.onwrite(new H("write")):U?O._writev(Q,P.onwrite):O._write(Q,ce,P.onwrite),P.sync=!1}function D(O,P,U,Y){--P.pendingcb,Y(U),j(P),b(O,U)}function W(O,P){const U=O._writableState,Y=U.sync,Q=U.writecb;if(typeof Q!="function"){b(O,new L);return}U.writing=!1,U.writecb=null,U.length-=U.writelen,U.writelen=0,P?(P.stack,U.errored||(U.errored=P),O._readableState&&!O._readableState.errored&&(O._readableState.errored=P),Y?e.nextTick(D,O,U,P,Q):D(O,U,P,Q)):(U.buffered.length>U.bufferedIndex&&re(O,U),Y?U.afterWriteTickInfo!==null&&U.afterWriteTickInfo.cb===Q?U.afterWriteTickInfo.count++:(U.afterWriteTickInfo={count:1,cb:Q,stream:O,state:U},e.nextTick(F,U.afterWriteTickInfo)):X(O,U,1,Q))}function F({stream:O,state:P,count:U,cb:Y}){return P.afterWriteTickInfo=null,X(O,P,U,Y)}function X(O,P,U,Y){for(!P.ending&&!O.destroyed&&P.length===0&&P.needDrain&&(P.needDrain=!1,O.emit("drain"));U-- >0;)P.pendingcb--,Y();P.destroyed&&j(P),Ee(O,P)}function j(O){if(O.writing)return;for(let Q=O.bufferedIndex;Q<O.buffered.length;++Q){var P;const{chunk:ce,callback:ge}=O.buffered[Q],le=O.objectMode?1:ce.length;O.length-=le,ge((P=O.errored)!==null&&P!==void 0?P:new H("write"))}const U=O[_].splice(0);for(let Q=0;Q<U.length;Q++){var Y;U[Q]((Y=O.errored)!==null&&Y!==void 0?Y:new H("end"))}C(O)}function re(O,P){if(P.corked||P.bufferProcessing||P.destroyed||!P.constructed)return;const{buffered:U,bufferedIndex:Y,objectMode:Q}=P,ce=U.length-Y;if(!ce)return;let ge=Y;if(P.bufferProcessing=!0,ce>1&&O._writev){P.pendingcb-=ce-1;const le=P.allNoop?E:ne=>{for(let xe=ge;xe<U.length;++xe)U[xe].callback(ne)},Ue=P.allNoop&&ge===0?U:t(U,ge);Ue.allBuffers=P.allBuffers,A(O,P,!0,P.length,Ue,"",le),C(P)}else{do{const{chunk:le,encoding:Ue,callback:ne}=U[ge];U[ge++]=null;const xe=Q?1:le.length;A(O,P,!1,xe,le,Ue,ne)}while(ge<U.length&&!P.writing);ge===U.length?C(P):ge>256?(U.splice(0,ge),P.bufferedIndex=0):P.bufferedIndex=ge}P.bufferProcessing=!1}u.prototype._write=function(O,P,U){if(this._writev)this._writev([{chunk:O,encoding:P}],U);else throw new I("_write()")},u.prototype._writev=null,u.prototype.end=function(O,P,U){const Y=this._writableState;typeof O=="function"?(U=O,O=null,P=null):typeof P=="function"&&(U=P,P=null);let Q;if(O!=null){const ce=w(this,O,P);ce instanceof r&&(Q=ce)}return Y.corked&&(Y.corked=1,this.uncork()),Q||(!Y.errored&&!Y.ending?(Y.ending=!0,Ee(this,Y,!0),Y.ended=!0):Y.finished?Q=new G("end"):Y.destroyed&&(Q=new H("end"))),typeof U=="function"&&(Q||Y.finished?e.nextTick(U,Q):Y[_].push(U)),this};function te(O){return O.ending&&!O.destroyed&&O.constructed&&O.length===0&&!O.errored&&O.buffered.length===0&&!O.finished&&!O.writing&&!O.errorEmitted&&!O.closeEmitted}function ie(O,P){let U=!1;function Y(Q){if(U){b(O,Q??L());return}if(U=!0,P.pendingcb--,Q){const ce=P[_].splice(0);for(let ge=0;ge<ce.length;ge++)ce[ge](Q);b(O,Q,P.sync)}else te(P)&&(P.prefinished=!0,O.emit("prefinish"),P.pendingcb++,e.nextTick(Ae,O,P))}P.sync=!0,P.pendingcb++;try{O._final(Y)}catch(Q){Y(Q)}P.sync=!1}function se(O,P){!P.prefinished&&!P.finalCalled&&(typeof O._final=="function"&&!P.destroyed?(P.finalCalled=!0,ie(O,P)):(P.prefinished=!0,O.emit("prefinish")))}function Ee(O,P,U){te(P)&&(se(O,P),P.pendingcb===0&&(U?(P.pendingcb++,e.nextTick((Y,Q)=>{te(Q)?Ae(Y,Q):Q.pendingcb--},O,P)):te(P)&&(P.pendingcb++,Ae(O,P))))}function Ae(O,P){P.pendingcb--,P.finished=!0;const U=P[_].splice(0);for(let Y=0;Y<U.length;Y++)U[Y]();if(O.emit("finish"),P.autoDestroy){const Y=O._readableState;(!Y||Y.autoDestroy&&(Y.endEmitted||Y.readable===!1))&&O.destroy()}}o(u.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(O){this._writableState&&(this._writableState.destroyed=O)}},writable:{__proto__:null,get(){const O=this._writableState;return!!O&&O.writable!==!1&&!O.destroyed&&!O.errored&&!O.ending&&!O.ended},set(O){this._writableState&&(this._writableState.writable=!!O)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const O=this._writableState;return O?!O.destroyed&&!O.ending&&O.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const Re=M.destroy;u.prototype.destroy=function(O,P){const U=this._writableState;return!U.destroyed&&(U.bufferedIndex<U.buffered.length||U[_].length)&&e.nextTick(j,U),Re.call(this,O,P),this},u.prototype._undestroy=M.undestroy,u.prototype._destroy=function(O,P){P(O)},u.prototype[v.captureRejectionSymbol]=function(O){this.destroy(O)};let _e;function me(){return _e===void 0&&(_e={}),_e}return u.fromWeb=function(O,P){return me().newStreamWritableFromWritableStream(O,P)},u.toWeb=function(O){return me().newWritableStreamFromStreamWritable(O)},wi}var bi,bs;function Jf(){if(bs)return bi;bs=1;const e=Yt,t=Kt,{isReadable:r,isWritable:n,isIterable:i,isNodeStream:o,isReadableNodeStream:s,isWritableNodeStream:l,isDuplexNodeStream:d,isReadableStream:c,isWritableStream:v}=Et,R=Nt,{AbortError:B,codes:{ERR_INVALID_ARG_TYPE:M,ERR_INVALID_RETURN_VALUE:k}}=Le,{destroyer:m}=hr,T=yt(),N=Bn(),I=go(),{createDeferredPromise:L}=ke,K=Ya,H=globalThis.Blob||t.Blob,G=typeof H<"u"?function(g){return g instanceof H}:function(g){return!1},V=globalThis.AbortController||Cr().AbortController,{FunctionPrototypeCall:a}=ye;class f extends T{constructor(g){super(g),(g==null?void 0:g.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(g==null?void 0:g.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}bi=function _(g,C){if(d(g))return g;if(s(g))return E({readable:g});if(l(g))return E({writable:g});if(o(g))return E({writable:!1,readable:!1});if(c(g))return E({readable:N.fromWeb(g)});if(v(g))return E({writable:I.fromWeb(g)});if(typeof g=="function"){const{value:w,write:S,final:A,destroy:D}=b(g);if(i(w))return K(f,w,{objectMode:!0,write:S,final:A,destroy:D});const W=w==null?void 0:w.then;if(typeof W=="function"){let F;const X=a(W,w,j=>{if(j!=null)throw new k("nully","body",j)},j=>{m(F,j)});return F=new f({objectMode:!0,readable:!1,write:S,final(j){A(async()=>{try{await X,e.nextTick(j,null)}catch(re){e.nextTick(j,re)}})},destroy:D})}throw new k("Iterable, AsyncIterable or AsyncFunction",C,w)}if(G(g))return _(g.arrayBuffer());if(i(g))return K(f,g,{objectMode:!0,writable:!1});if(c(g==null?void 0:g.readable)&&v(g==null?void 0:g.writable))return f.fromWeb(g);if(typeof(g==null?void 0:g.writable)=="object"||typeof(g==null?void 0:g.readable)=="object"){const w=g!=null&&g.readable?s(g==null?void 0:g.readable)?g==null?void 0:g.readable:_(g.readable):void 0,S=g!=null&&g.writable?l(g==null?void 0:g.writable)?g==null?void 0:g.writable:_(g.writable):void 0;return E({readable:w,writable:S})}const u=g==null?void 0:g.then;if(typeof u=="function"){let w;return a(u,g,S=>{S!=null&&w.push(S),w.push(null)},S=>{m(w,S)}),w=new f({objectMode:!0,writable:!1,read(){}})}throw new M(C,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],g)};function b(_){let{promise:g,resolve:C}=L();const u=new V,w=u.signal;return{value:_(async function*(){for(;;){const A=g;g=null;const{chunk:D,done:W,cb:F}=await A;if(e.nextTick(F),W)return;if(w.aborted)throw new B(void 0,{cause:w.reason});({promise:g,resolve:C}=L()),yield D}}(),{signal:w}),write(A,D,W){const F=C;C=null,F({chunk:A,done:!1,cb:W})},final(A){const D=C;C=null,D({done:!0,cb:A})},destroy(A,D){u.abort(),D(A)}}}function E(_){const g=_.readable&&typeof _.readable.read!="function"?N.wrap(_.readable):_.readable,C=_.writable;let u=!!r(g),w=!!n(C),S,A,D,W,F;function X(j){const re=W;W=null,re?re(j):j&&F.destroy(j)}return F=new f({readableObjectMode:!!(g!=null&&g.readableObjectMode),writableObjectMode:!!(C!=null&&C.writableObjectMode),readable:u,writable:w}),w&&(R(C,j=>{w=!1,j&&m(g,j),X(j)}),F._write=function(j,re,te){C.write(j,re)?te():S=te},F._final=function(j){C.end(),A=j},C.on("drain",function(){if(S){const j=S;S=null,j()}}),C.on("finish",function(){if(A){const j=A;A=null,j()}})),u&&(R(g,j=>{u=!1,j&&m(g,j),X(j)}),g.on("readable",function(){if(D){const j=D;D=null,j()}}),g.on("end",function(){F.push(null)}),F._read=function(){for(;;){const j=g.read();if(j===null){D=F._read;return}if(!F.push(j))return}}),F._destroy=function(j,re){!j&&W!==null&&(j=new B),D=null,S=null,A=null,W===null?re(j):(W=re,m(C,j),m(g,j))},F}return bi}var yi,ys;function yt(){if(ys)return yi;ys=1;const{ObjectDefineProperties:e,ObjectGetOwnPropertyDescriptor:t,ObjectKeys:r,ObjectSetPrototypeOf:n}=ye;yi=s;const i=Bn(),o=go();n(s.prototype,i.prototype),n(s,i);{const v=r(o.prototype);for(let R=0;R<v.length;R++){const B=v[R];s.prototype[B]||(s.prototype[B]=o.prototype[B])}}function s(v){if(!(this instanceof s))return new s(v);i.call(this,v),o.call(this,v),v?(this.allowHalfOpen=v.allowHalfOpen!==!1,v.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),v.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}e(s.prototype,{writable:{__proto__:null,...t(o.prototype,"writable")},writableHighWaterMark:{__proto__:null,...t(o.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...t(o.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...t(o.prototype,"writableBuffer")},writableLength:{__proto__:null,...t(o.prototype,"writableLength")},writableFinished:{__proto__:null,...t(o.prototype,"writableFinished")},writableCorked:{__proto__:null,...t(o.prototype,"writableCorked")},writableEnded:{__proto__:null,...t(o.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...t(o.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(v){this._readableState&&this._writableState&&(this._readableState.destroyed=v,this._writableState.destroyed=v)}}});let l;function d(){return l===void 0&&(l={}),l}s.fromWeb=function(v,R){return d().newStreamDuplexFromReadableWritablePair(v,R)},s.toWeb=function(v){return d().newReadableWritablePairFromDuplex(v)};let c;return s.from=function(v){return c||(c=Jf()),c(v,"body")},yi}const{ObjectSetPrototypeOf:Ja,Symbol:Zf}=ye;var Za=_t;const{ERR_METHOD_NOT_IMPLEMENTED:Xf}=Le.codes,po=yt(),{getHighWaterMark:Qf}=Mn;Ja(_t.prototype,po.prototype);Ja(_t,po);const Or=Zf("kCallback");function _t(e){if(!(this instanceof _t))return new _t(e);const t=e?Qf(this,e,"readableHighWaterMark",!0):null;t===0&&(e={...e,highWaterMark:null,readableHighWaterMark:t,writableHighWaterMark:e.writableHighWaterMark||0}),po.call(this,e),this._readableState.sync=!1,this[Or]=null,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",ed)}function Vi(e){typeof this._flush=="function"&&!this.destroyed?this._flush((t,r)=>{if(t){e?e(t):this.destroy(t);return}r!=null&&this.push(r),this.push(null),e&&e()}):(this.push(null),e&&e())}function ed(){this._final!==Vi&&Vi.call(this)}_t.prototype._final=Vi;_t.prototype._transform=function(e,t,r){throw new Xf("_transform()")};_t.prototype._write=function(e,t,r){const n=this._readableState,i=this._writableState,o=n.length;this._transform(e,t,(s,l)=>{if(s){r(s);return}l!=null&&this.push(l),i.ended||o===n.length||n.length<n.highWaterMark?r():this[Or]=r})};_t.prototype._read=function(){if(this[Or]){const e=this[Or];this[Or]=null,e()}};const{ObjectSetPrototypeOf:Xa}=ye;var Qa=ar;const wo=Za;Xa(ar.prototype,wo.prototype);Xa(ar,wo);function ar(e){if(!(this instanceof ar))return new ar(e);wo.call(this,e)}ar.prototype._transform=function(e,t,r){r(null,e)};const Ir=Yt,{ArrayIsArray:td,Promise:rd,SymbolAsyncIterator:nd,SymbolDispose:id}=ye,mn=Nt,{once:od}=ke,sd=hr,_s=yt(),{aggregateTwoErrors:ad,codes:{ERR_INVALID_ARG_TYPE:Ki,ERR_INVALID_RETURN_VALUE:_i,ERR_MISSING_ARGS:ld,ERR_STREAM_DESTROYED:ud,ERR_STREAM_PREMATURE_CLOSE:cd},AbortError:fd}=Le,{validateFunction:dd,validateAbortSignal:hd}=$r,{isIterable:$t,isReadable:mi,isReadableNodeStream:pn,isNodeStream:ms,isTransformStream:rr,isWebStream:gd,isReadableStream:Ei,isReadableFinished:pd}=Et,wd=globalThis.AbortController||Cr().AbortController;let vi,Si,Ai;function Es(e,t,r){let n=!1;e.on("close",()=>{n=!0});const i=mn(e,{readable:t,writable:r},o=>{n=!o});return{destroy:o=>{n||(n=!0,sd.destroyer(e,o||new ud("pipe")))},cleanup:i}}function bd(e){return dd(e[e.length-1],"streams[stream.length - 1]"),e.pop()}function Ri(e){if($t(e))return e;if(pn(e))return yd(e);throw new Ki("val",["Readable","Iterable","AsyncIterable"],e)}async function*yd(e){Si||(Si=Bn()),yield*Si.prototype[nd].call(e)}async function an(e,t,r,{end:n}){let i,o=null;const s=c=>{if(c&&(i=c),o){const v=o;o=null,v()}},l=()=>new rd((c,v)=>{i?v(i):o=()=>{i?v(i):c()}});t.on("drain",s);const d=mn(t,{readable:!1},s);try{t.writableNeedDrain&&await l();for await(const c of e)t.write(c)||await l();n&&(t.end(),await l()),r()}catch(c){r(i!==c?ad(i,c):c)}finally{d(),t.off("drain",s)}}async function Ii(e,t,r,{end:n}){rr(t)&&(t=t.writable);const i=t.getWriter();try{for await(const o of e)await i.ready,i.write(o).catch(()=>{});await i.ready,n&&await i.close(),r()}catch(o){try{await i.abort(o),r(o)}catch(s){r(s)}}}function _d(...e){return el(e,od(bd(e)))}function el(e,t,r){if(e.length===1&&td(e[0])&&(e=e[0]),e.length<2)throw new ld("streams");const n=new wd,i=n.signal,o=r==null?void 0:r.signal,s=[];hd(o,"options.signal");function l(){k(new fd)}Ai=Ai||ke.addAbortListener;let d;o&&(d=Ai(o,l));let c,v;const R=[];let B=0;function M(I){k(I,--B===0)}function k(I,L){var K;if(I&&(!c||c.code==="ERR_STREAM_PREMATURE_CLOSE")&&(c=I),!(!c&&!L)){for(;R.length;)R.shift()(c);(K=d)===null||K===void 0||K[id](),n.abort(),L&&(c||s.forEach(H=>H()),Ir.nextTick(t,c,v))}}let m;for(let I=0;I<e.length;I++){const L=e[I],K=I<e.length-1,H=I>0,G=K||(r==null?void 0:r.end)!==!1,V=I===e.length-1;if(ms(L)){let a=function(f){f&&f.name!=="AbortError"&&f.code!=="ERR_STREAM_PREMATURE_CLOSE"&&M(f)};if(G){const{destroy:f,cleanup:b}=Es(L,K,H);R.push(f),mi(L)&&V&&s.push(b)}L.on("error",a),mi(L)&&V&&s.push(()=>{L.removeListener("error",a)})}if(I===0)if(typeof L=="function"){if(m=L({signal:i}),!$t(m))throw new _i("Iterable, AsyncIterable or Stream","source",m)}else $t(L)||pn(L)||rr(L)?m=L:m=_s.from(L);else if(typeof L=="function"){if(rr(m)){var T;m=Ri((T=m)===null||T===void 0?void 0:T.readable)}else m=Ri(m);if(m=L(m,{signal:i}),K){if(!$t(m,!0))throw new _i("AsyncIterable",`transform[${I-1}]`,m)}else{var N;vi||(vi=Qa);const a=new vi({objectMode:!0}),f=(N=m)===null||N===void 0?void 0:N.then;if(typeof f=="function")B++,f.call(m,_=>{v=_,_!=null&&a.write(_),G&&a.end(),Ir.nextTick(M)},_=>{a.destroy(_),Ir.nextTick(M,_)});else if($t(m,!0))B++,an(m,a,M,{end:G});else if(Ei(m)||rr(m)){const _=m.readable||m;B++,an(_,a,M,{end:G})}else throw new _i("AsyncIterable or Promise","destination",m);m=a;const{destroy:b,cleanup:E}=Es(m,!1,!0);R.push(b),V&&s.push(E)}}else if(ms(L)){if(pn(m)){B+=2;const a=md(m,L,M,{end:G});mi(L)&&V&&s.push(a)}else if(rr(m)||Ei(m)){const a=m.readable||m;B++,an(a,L,M,{end:G})}else if($t(m))B++,an(m,L,M,{end:G});else throw new Ki("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],m);m=L}else if(gd(L)){if(pn(m))B++,Ii(Ri(m),L,M,{end:G});else if(Ei(m)||$t(m))B++,Ii(m,L,M,{end:G});else if(rr(m))B++,Ii(m.readable,L,M,{end:G});else throw new Ki("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],m);m=L}else m=_s.from(L)}return(i!=null&&i.aborted||o!=null&&o.aborted)&&Ir.nextTick(l),m}function md(e,t,r,{end:n}){let i=!1;if(t.on("close",()=>{i||r(new cd)}),e.pipe(t,{end:!1}),n){let o=function(){i=!0,t.end()};pd(e)?Ir.nextTick(o):e.once("end",o)}else r();return mn(e,{readable:!0,writable:!1},o=>{const s=e._readableState;o&&o.code==="ERR_STREAM_PREMATURE_CLOSE"&&s&&s.ended&&!s.errored&&!s.errorEmitted?e.once("end",r).once("error",r):r(o)}),mn(t,{readable:!1,writable:!0},r)}var bo={pipelineImpl:el,pipeline:_d};const{pipeline:Ed}=bo,ln=yt(),{destroyer:vd}=hr,{isNodeStream:un,isReadable:vs,isWritable:Ss,isWebStream:Ti,isTransformStream:Dt,isWritableStream:As,isReadableStream:Rs}=Et,{AbortError:Sd,codes:{ERR_INVALID_ARG_VALUE:Is,ERR_MISSING_ARGS:Ad}}=Le,Rd=Nt;var tl=function(...t){if(t.length===0)throw new Ad("streams");if(t.length===1)return ln.from(t[0]);const r=[...t];if(typeof t[0]=="function"&&(t[0]=ln.from(t[0])),typeof t[t.length-1]=="function"){const M=t.length-1;t[M]=ln.from(t[M])}for(let M=0;M<t.length;++M)if(!(!un(t[M])&&!Ti(t[M]))){if(M<t.length-1&&!(vs(t[M])||Rs(t[M])||Dt(t[M])))throw new Is(`streams[${M}]`,r[M],"must be readable");if(M>0&&!(Ss(t[M])||As(t[M])||Dt(t[M])))throw new Is(`streams[${M}]`,r[M],"must be writable")}let n,i,o,s,l;function d(M){const k=s;s=null,k?k(M):M?l.destroy(M):!B&&!R&&l.destroy()}const c=t[0],v=Ed(t,d),R=!!(Ss(c)||As(c)||Dt(c)),B=!!(vs(v)||Rs(v)||Dt(v));if(l=new ln({writableObjectMode:!!(c!=null&&c.writableObjectMode),readableObjectMode:!!(v!=null&&v.readableObjectMode),writable:R,readable:B}),R){if(un(c))l._write=function(k,m,T){c.write(k,m)?T():n=T},l._final=function(k){c.end(),i=k},c.on("drain",function(){if(n){const k=n;n=null,k()}});else if(Ti(c)){const m=(Dt(c)?c.writable:c).getWriter();l._write=async function(T,N,I){try{await m.ready,m.write(T).catch(()=>{}),I()}catch(L){I(L)}},l._final=async function(T){try{await m.ready,m.close().catch(()=>{}),i=T}catch(N){T(N)}}}const M=Dt(v)?v.readable:v;Rd(M,()=>{if(i){const k=i;i=null,k()}})}if(B){if(un(v))v.on("readable",function(){if(o){const M=o;o=null,M()}}),v.on("end",function(){l.push(null)}),l._read=function(){for(;;){const M=v.read();if(M===null){o=l._read;return}if(!l.push(M))return}};else if(Ti(v)){const k=(Dt(v)?v.readable:v).getReader();l._read=async function(){for(;;)try{const{value:m,done:T}=await k.read();if(!l.push(m))return;if(T){l.push(null);return}}catch{return}}}}return l._destroy=function(M,k){!M&&s!==null&&(M=new Sd),o=null,n=null,i=null,s===null?k(M):(s=k,un(v)&&vd(v,M))},l};const Id=globalThis.AbortController||Cr().AbortController,{codes:{ERR_INVALID_ARG_VALUE:Td,ERR_INVALID_ARG_TYPE:kr,ERR_MISSING_ARGS:Od,ERR_OUT_OF_RANGE:xd},AbortError:st}=Le,{validateAbortSignal:Zt,validateInteger:Ts,validateObject:Xt}=$r,Nd=ye.Symbol("kWeak"),Cd=ye.Symbol("kResistStopPropagation"),{finished:Pd}=Nt,Ld=tl,{addAbortSignalNoValidate:Md}=Ln,{isWritable:Bd,isNodeStream:Dd}=Et,{deprecate:$d}=ke,{ArrayPrototypePush:kd,Boolean:Ud,MathFloor:Os,Number:jd,NumberIsNaN:Wd,Promise:xs,PromiseReject:Ns,PromiseResolve:Fd,PromisePrototypeThen:Cs,Symbol:rl}=ye,En=rl("kEmpty"),Ps=rl("kEof");function qd(e,t){if(t!=null&&Xt(t,"options"),(t==null?void 0:t.signal)!=null&&Zt(t.signal,"options.signal"),Dd(e)&&!Bd(e))throw new Td("stream",e,"must be writable");const r=Ld(this,e);return t!=null&&t.signal&&Md(t.signal,r),r}function Dn(e,t){if(typeof e!="function")throw new kr("fn",["Function","AsyncFunction"],e);t!=null&&Xt(t,"options"),(t==null?void 0:t.signal)!=null&&Zt(t.signal,"options.signal");let r=1;(t==null?void 0:t.concurrency)!=null&&(r=Os(t.concurrency));let n=r-1;return(t==null?void 0:t.highWaterMark)!=null&&(n=Os(t.highWaterMark)),Ts(r,"options.concurrency",1),Ts(n,"options.highWaterMark",0),n+=r,(async function*(){const o=ke.AbortSignalAny([t==null?void 0:t.signal].filter(Ud)),s=this,l=[],d={signal:o};let c,v,R=!1,B=0;function M(){R=!0,k()}function k(){B-=1,m()}function m(){v&&!R&&B<r&&l.length<n&&(v(),v=null)}async function T(){try{for await(let N of s){if(R)return;if(o.aborted)throw new st;try{if(N=e(N,d),N===En)continue;N=Fd(N)}catch(I){N=Ns(I)}B+=1,Cs(N,k,M),l.push(N),c&&(c(),c=null),!R&&(l.length>=n||B>=r)&&await new xs(I=>{v=I})}l.push(Ps)}catch(N){const I=Ns(N);Cs(I,k,M),l.push(I)}finally{R=!0,c&&(c(),c=null)}}T();try{for(;;){for(;l.length>0;){const N=await l[0];if(N===Ps)return;if(o.aborted)throw new st;N!==En&&(yield N),l.shift(),m()}await new xs(N=>{c=N})}}finally{R=!0,v&&(v(),v=null)}}).call(this)}function Hd(e=void 0){return e!=null&&Xt(e,"options"),(e==null?void 0:e.signal)!=null&&Zt(e.signal,"options.signal"),(async function*(){let r=0;for await(const i of this){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new st({cause:e.signal.reason});yield[r++,i]}}).call(this)}async function nl(e,t=void 0){for await(const r of yo.call(this,e,t))return!0;return!1}async function Gd(e,t=void 0){if(typeof e!="function")throw new kr("fn",["Function","AsyncFunction"],e);return!await nl.call(this,async(...r)=>!await e(...r),t)}async function zd(e,t){for await(const r of yo.call(this,e,t))return r}async function Vd(e,t){if(typeof e!="function")throw new kr("fn",["Function","AsyncFunction"],e);async function r(n,i){return await e(n,i),En}for await(const n of Dn.call(this,r,t));}function yo(e,t){if(typeof e!="function")throw new kr("fn",["Function","AsyncFunction"],e);async function r(n,i){return await e(n,i)?n:En}return Dn.call(this,r,t)}class Kd extends Od{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function Yd(e,t,r){var n;if(typeof e!="function")throw new kr("reducer",["Function","AsyncFunction"],e);r!=null&&Xt(r,"options"),(r==null?void 0:r.signal)!=null&&Zt(r.signal,"options.signal");let i=arguments.length>1;if(r!=null&&(n=r.signal)!==null&&n!==void 0&&n.aborted){const c=new st(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await Pd(this.destroy(c)),c}const o=new Id,s=o.signal;if(r!=null&&r.signal){const c={once:!0,[Nd]:this,[Cd]:!0};r.signal.addEventListener("abort",()=>o.abort(),c)}let l=!1;try{for await(const c of this){var d;if(l=!0,r!=null&&(d=r.signal)!==null&&d!==void 0&&d.aborted)throw new st;i?t=await e(t,c,{signal:s}):(t=c,i=!0)}if(!l&&!i)throw new Kd}finally{o.abort()}return t}async function Jd(e){e!=null&&Xt(e,"options"),(e==null?void 0:e.signal)!=null&&Zt(e.signal,"options.signal");const t=[];for await(const n of this){var r;if(e!=null&&(r=e.signal)!==null&&r!==void 0&&r.aborted)throw new st(void 0,{cause:e.signal.reason});kd(t,n)}return t}function Zd(e,t){const r=Dn.call(this,e,t);return(async function*(){for await(const i of r)yield*i}).call(this)}function il(e){if(e=jd(e),Wd(e))return 0;if(e<0)throw new xd("number",">= 0",e);return e}function Xd(e,t=void 0){return t!=null&&Xt(t,"options"),(t==null?void 0:t.signal)!=null&&Zt(t.signal,"options.signal"),e=il(e),(async function*(){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new st;for await(const o of this){var i;if(t!=null&&(i=t.signal)!==null&&i!==void 0&&i.aborted)throw new st;e--<=0&&(yield o)}}).call(this)}function Qd(e,t=void 0){return t!=null&&Xt(t,"options"),(t==null?void 0:t.signal)!=null&&Zt(t.signal,"options.signal"),e=il(e),(async function*(){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new st;for await(const o of this){var i;if(t!=null&&(i=t.signal)!==null&&i!==void 0&&i.aborted)throw new st;if(e-- >0&&(yield o),e<=0)return}}).call(this)}ao.streamReturningOperators={asIndexedPairs:$d(Hd,"readable.asIndexedPairs will be removed in a future version."),drop:Xd,filter:yo,flatMap:Zd,map:Dn,take:Qd,compose:qd};ao.promiseReturningOperators={every:Gd,forEach:Vd,reduce:Yd,toArray:Jd,some:nl,find:zd};var Oi,Ls;function ol(){if(Ls)return Oi;Ls=1;const{ArrayPrototypePop:e,Promise:t}=ye,{isIterable:r,isNodeStream:n,isWebStream:i}=Et,{pipelineImpl:o}=bo,{finished:s}=Nt;sl();function l(...d){return new t((c,v)=>{let R,B;const M=d[d.length-1];if(M&&typeof M=="object"&&!n(M)&&!r(M)&&!i(M)){const k=e(d);R=k.signal,B=k.end}o(d,(k,m)=>{k?v(k):c(m)},{signal:R,end:B})})}return Oi={finished:s,pipeline:l},Oi}var Ms;function sl(){if(Ms)return fi.exports;Ms=1;const{Buffer:e}=Kt,{ObjectDefineProperty:t,ObjectKeys:r,ReflectApply:n}=ye,{promisify:{custom:i}}=ke,{streamReturningOperators:o,promiseReturningOperators:s}=ao,{codes:{ERR_ILLEGAL_CONSTRUCTOR:l}}=Le,d=tl,{setDefaultHighWaterMark:c,getDefaultHighWaterMark:v}=Mn,{pipeline:R}=bo,{destroyer:B}=hr,M=Nt,k=ol(),m=Et,T=fi.exports=ho.Stream;T.isDestroyed=m.isDestroyed,T.isDisturbed=m.isDisturbed,T.isErrored=m.isErrored,T.isReadable=m.isReadable,T.isWritable=m.isWritable,T.Readable=Bn();for(const I of r(o)){let K=function(...H){if(new.target)throw l();return T.Readable.from(n(L,this,H))};const L=o[I];t(K,"name",{__proto__:null,value:L.name}),t(K,"length",{__proto__:null,value:L.length}),t(T.Readable.prototype,I,{__proto__:null,value:K,enumerable:!1,configurable:!0,writable:!0})}for(const I of r(s)){let K=function(...H){if(new.target)throw l();return n(L,this,H)};const L=s[I];t(K,"name",{__proto__:null,value:L.name}),t(K,"length",{__proto__:null,value:L.length}),t(T.Readable.prototype,I,{__proto__:null,value:K,enumerable:!1,configurable:!0,writable:!0})}T.Writable=go(),T.Duplex=yt(),T.Transform=Za,T.PassThrough=Qa,T.pipeline=R;const{addAbortSignal:N}=Ln;return T.addAbortSignal=N,T.finished=M,T.destroy=B,T.compose=d,T.setDefaultHighWaterMark=c,T.getDefaultHighWaterMark=v,t(T,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return k}}),t(R,i,{__proto__:null,enumerable:!0,get(){return k.pipeline}}),t(M,i,{__proto__:null,enumerable:!0,get(){return k.finished}}),T.Stream=T,T._isUint8Array=function(L){return L instanceof Uint8Array},T._uint8ArrayToBuffer=function(L){return e.from(L.buffer,L.byteOffset,L.byteLength)},fi.exports}(function(e){const t=sl(),r=ol(),n=t.Readable.destroy;e.exports=t.Readable,e.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,e.exports._isUint8Array=t._isUint8Array,e.exports.isDisturbed=t.isDisturbed,e.exports.isErrored=t.isErrored,e.exports.isReadable=t.isReadable,e.exports.Readable=t.Readable,e.exports.Writable=t.Writable,e.exports.Duplex=t.Duplex,e.exports.Transform=t.Transform,e.exports.PassThrough=t.PassThrough,e.exports.addAbortSignal=t.addAbortSignal,e.exports.finished=t.finished,e.exports.destroy=t.destroy,e.exports.destroy=n,e.exports.pipeline=t.pipeline,e.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return r}}),e.exports.Stream=t.Stream,e.exports.default=e.exports})(fa);var $n=fa.exports,al=Pr;Pr.default=Pr;Pr.stable=cl;Pr.stableStringify=cl;var vn="[...]",ll="[Circular]",Gt=[],jt=[];function ul(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function Pr(e,t,r,n){typeof n>"u"&&(n=ul()),Yi(e,"",0,[],void 0,0,n);var i;try{jt.length===0?i=JSON.stringify(e,t,r):i=JSON.stringify(e,fl(t),r)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;Gt.length!==0;){var o=Gt.pop();o.length===4?Object.defineProperty(o[0],o[1],o[3]):o[0][o[1]]=o[2]}}return i}function or(e,t,r,n){var i=Object.getOwnPropertyDescriptor(n,r);i.get!==void 0?i.configurable?(Object.defineProperty(n,r,{value:e}),Gt.push([n,r,t,i])):jt.push([t,r,e]):(n[r]=e,Gt.push([n,r,t]))}function Yi(e,t,r,n,i,o,s){o+=1;var l;if(typeof e=="object"&&e!==null){for(l=0;l<n.length;l++)if(n[l]===e){or(ll,e,t,i);return}if(typeof s.depthLimit<"u"&&o>s.depthLimit){or(vn,e,t,i);return}if(typeof s.edgesLimit<"u"&&r+1>s.edgesLimit){or(vn,e,t,i);return}if(n.push(e),Array.isArray(e))for(l=0;l<e.length;l++)Yi(e[l],l,l,n,e,o,s);else{var d=Object.keys(e);for(l=0;l<d.length;l++){var c=d[l];Yi(e[c],c,l,n,e,o,s)}}n.pop()}}function eh(e,t){return e<t?-1:e>t?1:0}function cl(e,t,r,n){typeof n>"u"&&(n=ul());var i=Ji(e,"",0,[],void 0,0,n)||e,o;try{jt.length===0?o=JSON.stringify(i,t,r):o=JSON.stringify(i,fl(t),r)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;Gt.length!==0;){var s=Gt.pop();s.length===4?Object.defineProperty(s[0],s[1],s[3]):s[0][s[1]]=s[2]}}return o}function Ji(e,t,r,n,i,o,s){o+=1;var l;if(typeof e=="object"&&e!==null){for(l=0;l<n.length;l++)if(n[l]===e){or(ll,e,t,i);return}try{if(typeof e.toJSON=="function")return}catch{return}if(typeof s.depthLimit<"u"&&o>s.depthLimit){or(vn,e,t,i);return}if(typeof s.edgesLimit<"u"&&r+1>s.edgesLimit){or(vn,e,t,i);return}if(n.push(e),Array.isArray(e))for(l=0;l<e.length;l++)Ji(e[l],l,l,n,e,o,s);else{var d={},c=Object.keys(e).sort(eh);for(l=0;l<c.length;l++){var v=c[l];Ji(e[v],v,l,n,e,o,s),d[v]=e[v]}if(typeof i<"u")Gt.push([i,t,e]),i[t]=d;else return d}n.pop()}}function fl(e){return e=typeof e<"u"?e:function(t,r){return r},function(t,r){if(jt.length>0)for(var n=0;n<jt.length;n++){var i=jt[n];if(i[1]===t&&i[0]===r){r=i[2],jt.splice(n,1);break}}return e.call(this,t,r)}}const th=fr(al);var _o={exports:{}},rh=dl;function dl(e,t){if(e&&t)return dl(e)(t);if(typeof e!="function")throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(n){r[n]=e[n]}),r;function r(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];var o=e.apply(this,n),s=n[n.length-1];return typeof o=="function"&&o!==s&&Object.keys(s).forEach(function(l){o[l]=s[l]}),o}}var hl=rh;_o.exports=hl(wn);_o.exports.strict=hl(gl);wn.proto=wn(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return wn(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return gl(this)},configurable:!0})});function wn(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function gl(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},r=e.name||"Function wrapped with `once`";return t.onceError=r+" shouldn't be called more than once",t.called=!1,t}var mo=_o.exports;const nh=fr(mo);var ih=mo,oh=function(){},sh=globalThis.Bare?queueMicrotask:yn.nextTick.bind(yn),ah=function(e){return e.setHeader&&typeof e.abort=="function"},lh=function(e){return e.stdio&&Array.isArray(e.stdio)&&e.stdio.length===3},pl=function(e,t,r){if(typeof t=="function")return pl(e,null,t);t||(t={}),r=ih(r||oh);var n=e._writableState,i=e._readableState,o=t.readable||t.readable!==!1&&e.readable,s=t.writable||t.writable!==!1&&e.writable,l=!1,d=function(){e.writable||c()},c=function(){s=!1,o||r.call(e)},v=function(){o=!1,s||r.call(e)},R=function(T){r.call(e,T?new Error("exited with error code: "+T):null)},B=function(T){r.call(e,T)},M=function(){sh(k)},k=function(){if(!l){if(o&&!(i&&i.ended&&!i.destroyed))return r.call(e,new Error("premature close"));if(s&&!(n&&n.ended&&!n.destroyed))return r.call(e,new Error("premature close"))}},m=function(){e.req.on("finish",c)};return ah(e)?(e.on("complete",c),e.on("abort",M),e.req?m():e.on("request",m)):s&&!n&&(e.on("end",d),e.on("close",d)),lh(e)&&e.on("exit",R),e.on("end",v),e.on("finish",c),t.error!==!1&&e.on("error",B),e.on("close",M),function(){l=!0,e.removeListener("complete",c),e.removeListener("abort",M),e.removeListener("request",m),e.req&&e.req.removeListener("finish",c),e.removeListener("end",d),e.removeListener("close",d),e.removeListener("finish",c),e.removeListener("exit",R),e.removeListener("end",v),e.removeListener("error",B),e.removeListener("close",M)}},wl=pl;const Bs=fr(wl);var uh=mo,ch=wl,bn;try{bn=Uu}catch{}var Lr=function(){},fh=typeof yn>"u"?!1:/^v?\.0/.test(yn.version),kn=function(e){return typeof e=="function"},dh=function(e){return!fh||!bn?!1:(e instanceof(bn.ReadStream||Lr)||e instanceof(bn.WriteStream||Lr))&&kn(e.close)},hh=function(e){return e.setHeader&&kn(e.abort)},gh=function(e,t,r,n){n=uh(n);var i=!1;e.on("close",function(){i=!0}),ch(e,{readable:t,writable:r},function(s){if(s)return n(s);i=!0,n()});var o=!1;return function(s){if(!i&&!o){if(o=!0,dh(e))return e.close(Lr);if(hh(e))return e.abort();if(kn(e.destroy))return e.destroy();n(s||new Error("stream was destroyed"))}}},Ds=function(e){e()},ph=function(e,t){return e.pipe(t)},wh=function(){var e=Array.prototype.slice.call(arguments),t=kn(e[e.length-1]||Lr)&&e.pop()||Lr;if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new Error("pump requires two streams per minimum");var r,n=e.map(function(i,o){var s=o<e.length-1,l=o>0;return gh(i,s,l,function(d){r||(r=d),d&&n.forEach(Ds),!s&&(n.forEach(Ds),t(r))})});return e.reduce(ph)},bh=wh;const $s=fr(bh);function cn(){}const ks="SYN",xi="ACK",Us="BRK";class js extends $n.Duplex{constructor(t){let{name:r,target:n,targetWindow:i=window,targetOrigin:o="*"}=t;if(super({objectMode:!0}),ee(this,"_init",void 0),ee(this,"_haveSyn",void 0),ee(this,"_name",void 0),ee(this,"_target",void 0),ee(this,"_targetWindow",void 0),ee(this,"_targetOrigin",void 0),ee(this,"_onMessage",void 0),ee(this,"_synIntervalId",void 0),!r||!n)throw new Error("Invalid input.");this._init=!1,this._haveSyn=!1,this._name=r,this._target=n,this._targetWindow=i,this._targetOrigin=o,this._onMessage=this.onMessage.bind(this),this._synIntervalId=null,window.addEventListener("message",this._onMessage,!1),this._handShake()}_break(){this.cork(),this._write(Us,null,cn),this._haveSyn=!1,this._init=!1}_handShake(){this._write(ks,null,cn),this.cork()}_onData(t){if(!this._init)t===ks?(this._haveSyn=!0,this._write(xi,null,cn)):t===xi&&(this._init=!0,this._haveSyn||this._write(xi,null,cn),this.uncork());else if(t===Us)this._break();else try{this.push(t)}catch(r){this.emit("error",r)}}_postMessage(t){const r=this._targetOrigin;this._targetWindow.postMessage({target:this._target,data:t},r)}onMessage(t){const r=t.data;this._targetOrigin!=="*"&&t.origin!==this._targetOrigin||t.source!==this._targetWindow||typeof r!="object"||r.target!==this._name||!r.data||this._onData(r.data)}_read(){}_write(t,r,n){this._postMessage(t),n()}_destroy(){window.removeEventListener("message",this._onMessage,!1)}}const yh={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}},Ws={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}},Fs=yh.rpc.internal,_h="Unspecified error message. This is a bug, please report it.";function bl(e){return Number.isInteger(e)}function qs(e){return typeof e=="string"&&e.length>0}function Hs(e){return!!e&&typeof e=="object"&&!Array.isArray(e)}function yl(e){const t=e;return!(!t||!bl(t.code)||!qs(t.message)||t.stack&&!qs(t.stack))}function mh(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_h;if(bl(e)){const r=e.toString();if(Object.hasOwn(Ws,r))return Ws[r].message}return t}const Eh={code:Fs,message:mh(Fs)};function Zi(e){try{JSON.parse(JSON.stringify(e,(t,r)=>{if(t==="__proto__"||t==="constructor")throw new Error("Not valid json");if(typeof r=="function"||typeof r=="symbol")throw new Error("Not valid json");return r}),(t,r)=>{if(!(t==="__proto__"||t==="constructor"))return r})}catch{return!1}return!0}function Gs(e){return Object.getOwnPropertyNames(e).reduce((t,r)=>{const n=e[r];return Zi(n)&&(t[r]=n),t},{})}function vh(e){return Array.isArray(e)?e.map(t=>Zi(t)?t:Hs(t)?Gs(t):null):Hs(e)?Gs(e):Zi(e)?e:null}function Sh(e,t){if(e&&typeof e=="object"&&"serialize"in e&&typeof e.serialize=="function")return e.serialize();if(yl(e))return e;const r=vh(e);return Ve(Ve({},t),{},{data:{cause:r}})}function zs(e){let{fallbackError:t=Eh,shouldIncludeStack:r=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!yl(t))throw new Error("Must provide fallback error with integer number code and string message.");const n=Sh(e,t);return r||delete n.stack,n}function Vs(e,t,r){try{Reflect.apply(e,t,r)}catch(n){setTimeout(()=>{throw n})}}function Ah(e){const t=e.length,r=new Array(t);for(let n=0;n<t;n+=1)r[n]=e[n];return r}class Un extends Br.EventEmitter{emit(t){let r=t==="error";const n=this._events;if(n!==void 0)r=r&&n.error===void 0;else if(!r)return!1;for(var i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];if(r){let d;if(o.length>0&&([d]=o),d instanceof Error)throw d;const c=new Error(`Unhandled error.${d?` (${d.message})`:""}`);throw c.context=d,c}const l=n[t];if(l===void 0)return!1;if(typeof l=="function")Vs(l,this,o);else{const d=l.length,c=Ah(l);for(let v=0;v<d;v+=1)Vs(c[v],this,o)}return!0}}class Ar extends Error{constructor(t){let{code:r,message:n,data:i}=t;if(!Number.isInteger(r))throw new Error("code must be an integer");if(!n||typeof n!="string")throw new Error("message must be string");super(n),ee(this,"code",void 0),ee(this,"data",void 0),this.code=r,i!==void 0&&(this.data=i)}toString(){return th({code:this.code,message:this.message,data:this.data,stack:this.stack})}}const Xi=function(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return(n,i)=>{n||i.error?t(n||i.error):!r||Array.isArray(i)?e(i):e(i.result)}};function Rh(){const e={};function t(){return!1}const r=new Un;function n(d){const c=e[d.id];if(!c)throw new Error(`StreamMiddleware - Unknown response id "${d.id}"`);delete e[d.id],Object.assign(c.res,d),setTimeout(c.end)}function i(d){r.emit("notification",d)}function o(d,c,v){let R;try{!d.id?i(d):n(d)}catch(B){R=B}v(R)}const s=new $n.Duplex({objectMode:!0,read:t,write:o});return{events:r,middleware:(d,c,v,R)=>{s.push(d),e[d.id]={req:d,res:c,next:v,end:R}},stream:s}}function Ih(){return(e,t,r,n)=>{const i=e.id,o=Math.random().toString(36).slice(2);e.id=o,t.id=o,r(s=>{e.id=i,t.id=i,s()})}}class ht extends Un{constructor(){super(),ee(this,"_middleware",void 0),this._middleware=[]}static async _runAllMiddleware(t,r,n){const i=[];let o=null,s=!1;for(const l of n)if([o,s]=await ht._runMiddleware(t,r,l,i),s)break;return[o,s,i.reverse()]}static _runMiddleware(t,r,n,i){return new Promise(o=>{const s=d=>{const c=d||r.error;c&&(typeof c=="object"&&Object.keys(c).includes("stack")===!1&&(c.stack="Stack trace is not available."),r.error=zs(c,{shouldIncludeStack:!0,fallbackError:{message:(c==null?void 0:c.message)||(c==null?void 0:c.toString()),code:(c==null?void 0:c.code)||-32603,stack:(c==null?void 0:c.stack)||"Stack trace is not available.",data:(c==null?void 0:c.data)||(c==null?void 0:c.message)||(c==null?void 0:c.toString())}})),o([c,!0])},l=d=>{r.error?s(r.error):(d&&(typeof d!="function"&&s(new Ar({code:-32603,message:"JRPCEngine: 'next' return handlers must be functions"})),i.push(d)),o([null,!1]))};try{n(t,r,l,s)}catch(d){s(d)}})}static async _runReturnHandlers(t){for(const r of t)await new Promise((n,i)=>{r(o=>o?i(o):n())})}static _checkForCompletion(t,r,n){if(!("result"in r)&&!("error"in r))throw new Ar({code:-32603,message:"Response has no error or result for request"});if(!n)throw new Ar({code:-32603,message:"Nothing ended request"})}push(t){this._middleware.push(t)}handle(t,r){if(r&&typeof r!="function")throw new Error('"callback" must be a function if provided.');return Array.isArray(t)?r?this._handleBatch(t,r):this._handleBatch(t):r?this._handle(t,r):this._promiseHandle(t)}asMiddleware(){return async(t,r,n,i)=>{try{const[o,s,l]=await ht._runAllMiddleware(t,r,this._middleware);return s?(await ht._runReturnHandlers(l),i(o)):n(async d=>{try{await ht._runReturnHandlers(l)}catch(c){return d(c)}return d()})}catch(o){return i(o)}}}async _handleBatch(t,r){try{const n=await Promise.all(t.map(this._promiseHandle.bind(this)));return r?r(null,n):n}catch(n){if(r)return r(n);throw n}}_promiseHandle(t){return new Promise((r,n)=>{this._handle(t,(i,o)=>{i&&o===void 0?n(i):r(o)}).catch(n)})}async _handle(t,r){if(!t||Array.isArray(t)||typeof t!="object"){const M=new Ar({code:-32603,message:"request must be plain object"});return r(M,{id:void 0,jsonrpc:"2.0",error:M})}if(typeof t.method!="string"){const M=new Ar({code:-32603,message:"method must be string"});return r(M,{id:t.id,jsonrpc:"2.0",error:M})}const n=Ve({},t),i={id:n.id,jsonrpc:n.jsonrpc};let o=null;try{await this._processRequest(n,i)}catch(M){o=M}if(o&&(delete i.result,!i.error)){var s,l,d,c,v,R,B;typeof o=="object"&&Object.keys(o).includes("stack")===!1&&(o.stack="Stack trace is not available."),i.error=zs(o,{shouldIncludeStack:!0,fallbackError:{message:((s=o)===null||s===void 0?void 0:s.message)||((l=o)===null||l===void 0?void 0:l.toString()),code:((d=o)===null||d===void 0?void 0:d.code)||-32603,stack:((c=o)===null||c===void 0?void 0:c.stack)||"Stack trace is not available.",data:((v=o)===null||v===void 0?void 0:v.data)||((R=o)===null||R===void 0?void 0:R.message)||((B=o)===null||B===void 0?void 0:B.toString())}})}return r(o,i)}async _processRequest(t,r){const[n,i,o]=await ht._runAllMiddleware(t,r,this._middleware);if(ht._checkForCompletion(t,r,i),await ht._runReturnHandlers(o),n)throw n}}class Th extends $n.Duplex{constructor(t){let{parent:r,name:n}=t;super({objectMode:!0}),ee(this,"_parent",void 0),ee(this,"_name",void 0),this._parent=r,this._name=n}_read(){}_write(t,r,n){this._parent.push({name:this._name,data:t}),n()}}const Ks=Symbol("IGNORE_SUBSTREAM");class Oh extends $n.Duplex{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(Ve(Ve({},t),{},{objectMode:!0})),ee(this,"_substreams",void 0),ee(this,"getStream",void 0),this._substreams={}}createStream(t){if(!t)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[t])throw new Error(`ObjectMultiplex - Substream for name "${t}" already exists`);const r=new Th({parent:this,name:t});return this._substreams[t]=r,xh(this,n=>r.destroy(n||void 0)),r}ignoreStream(t){if(!t)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[t])throw new Error(`ObjectMultiplex - Substream for name "${t}" already exists`);this._substreams[t]=Ks}_read(){}_write(t,r,n){const{name:i,data:o}=t;if(!i)return window.console.warn(`ObjectMultiplex - malformed chunk without name "${t}"`),n();const s=this._substreams[i];return s?(s!==Ks&&s.push(o),n()):(window.console.warn(`ObjectMultiplex - orphaned data for stream "${i}"`),n())}}function xh(e,t){const r=nh(t);Bs(e,{readable:!1},r),Bs(e,{writable:!1},r)}var Sn={exports:{}};Sn.exports;(function(e,t){var r=200,n="__lodash_hash_undefined__",i=800,o=16,s=9007199254740991,l="[object Arguments]",d="[object Array]",c="[object AsyncFunction]",v="[object Boolean]",R="[object Date]",B="[object Error]",M="[object Function]",k="[object GeneratorFunction]",m="[object Map]",T="[object Number]",N="[object Null]",I="[object Object]",L="[object Proxy]",K="[object RegExp]",H="[object Set]",G="[object String]",V="[object Undefined]",a="[object WeakMap]",f="[object ArrayBuffer]",b="[object DataView]",E="[object Float32Array]",_="[object Float64Array]",g="[object Int8Array]",C="[object Int16Array]",u="[object Int32Array]",w="[object Uint8Array]",S="[object Uint8ClampedArray]",A="[object Uint16Array]",D="[object Uint32Array]",W=/[\\^$.*+?()[\]{}|]/g,F=/^\[object .+?Constructor\]$/,X=/^(?:0|[1-9]\d*)$/,j={};j[E]=j[_]=j[g]=j[C]=j[u]=j[w]=j[S]=j[A]=j[D]=!0,j[l]=j[d]=j[f]=j[v]=j[b]=j[R]=j[B]=j[M]=j[m]=j[T]=j[I]=j[K]=j[H]=j[G]=j[a]=!1;var re=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,te=typeof self=="object"&&self&&self.Object===Object&&self,ie=re||te||Function("return this")(),se=t&&!t.nodeType&&t,Ee=se&&!0&&e&&!e.nodeType&&e,Ae=Ee&&Ee.exports===se,Re=Ae&&re.process,_e=function(){try{var p=Ee&&Ee.require&&Ee.require("util").types;return p||Re&&Re.binding&&Re.binding("util")}catch{}}(),me=_e&&_e.isTypedArray;function O(p,x,$){switch($.length){case 0:return p.call(x);case 1:return p.call(x,$[0]);case 2:return p.call(x,$[0],$[1]);case 3:return p.call(x,$[0],$[1],$[2])}return p.apply(x,$)}function P(p,x){for(var $=-1,Z=Array(p);++$<p;)Z[$]=x($);return Z}function U(p){return function(x){return p(x)}}function Y(p,x){return p==null?void 0:p[x]}function Q(p,x){return function($){return p(x($))}}var ce=Array.prototype,ge=Function.prototype,le=Object.prototype,Ue=ie["__core-js_shared__"],ne=ge.toString,xe=le.hasOwnProperty,Qt=function(){var p=/[^.]+$/.exec(Ue&&Ue.keys&&Ue.keys.IE_PROTO||"");return p?"Symbol(src)_1."+p:""}(),Fr=le.toString,zn=ne.call(Object),qr=RegExp("^"+ne.call(xe).replace(W,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),er=Ae?ie.Buffer:void 0,Ct=ie.Symbol,pr=ie.Uint8Array;er&&er.allocUnsafe;var Pt=Q(Object.getPrototypeOf,Object),Hr=Object.create,Vn=le.propertyIsEnumerable,Gr=ce.splice,lt=Ct?Ct.toStringTag:void 0,tr=function(){try{var p=Qn(Object,"defineProperty");return p({},"",{}),p}catch{}}(),Kn=er?er.isBuffer:void 0,wr=Math.max,zr=Date.now,Vr=Qn(ie,"Map"),vt=Qn(Object,"create"),br=function(){function p(){}return function(x){if(!Mt(x))return{};if(Hr)return Hr(x);p.prototype=x;var $=new p;return p.prototype=void 0,$}}();function ut(p){var x=-1,$=p==null?0:p.length;for(this.clear();++x<$;){var Z=p[x];this.set(Z[0],Z[1])}}function Yn(){this.__data__=vt?vt(null):{},this.size=0}function yr(p){var x=this.has(p)&&delete this.__data__[p];return this.size-=x?1:0,x}function Kr(p){var x=this.__data__;if(vt){var $=x[p];return $===n?void 0:$}return xe.call(x,p)?x[p]:void 0}function h(p){var x=this.__data__;return vt?x[p]!==void 0:xe.call(x,p)}function y(p,x){var $=this.__data__;return this.size+=this.has(p)?0:1,$[p]=vt&&x===void 0?n:x,this}ut.prototype.clear=Yn,ut.prototype.delete=yr,ut.prototype.get=Kr,ut.prototype.has=h,ut.prototype.set=y;function q(p){var x=-1,$=p==null?0:p.length;for(this.clear();++x<$;){var Z=p[x];this.set(Z[0],Z[1])}}function z(){this.__data__=[],this.size=0}function J(p){var x=this.__data__,$=Qr(x,p);if($<0)return!1;var Z=x.length-1;return $==Z?x.pop():Gr.call(x,$,1),--this.size,!0}function Ie(p){var x=this.__data__,$=Qr(x,p);return $<0?void 0:x[$][1]}function Me(p){return Qr(this.__data__,p)>-1}function Yr(p,x){var $=this.__data__,Z=Qr($,p);return Z<0?(++this.size,$.push([p,x])):$[Z][1]=x,this}q.prototype.clear=z,q.prototype.delete=J,q.prototype.get=Ie,q.prototype.has=Me,q.prototype.set=Yr;function Be(p){var x=-1,$=p==null?0:p.length;for(this.clear();++x<$;){var Z=p[x];this.set(Z[0],Z[1])}}function Jr(){this.size=0,this.__data__={hash:new ut,map:new(Vr||q),string:new ut}}function Jn(p){var x=tn(this,p).delete(p);return this.size-=x?1:0,x}function Zr(p){return tn(this,p).get(p)}function Xr(p){return tn(this,p).has(p)}function _r(p,x){var $=tn(this,p),Z=$.size;return $.set(p,x),this.size+=$.size==Z?0:1,this}Be.prototype.clear=Jr,Be.prototype.delete=Jn,Be.prototype.get=Zr,Be.prototype.has=Xr,Be.prototype.set=_r;function et(p){var x=this.__data__=new q(p);this.size=x.size}function mr(){this.__data__=new q,this.size=0}function Lt(p){var x=this.__data__,$=x.delete(p);return this.size=x.size,$}function ct(p){return this.__data__.get(p)}function Ye(p){return this.__data__.has(p)}function Wl(p,x){var $=this.__data__;if($ instanceof q){var Z=$.__data__;if(!Vr||Z.length<r-1)return Z.push([p,x]),this.size=++$.size,this;$=this.__data__=new Be(Z)}return $.set(p,x),this.size=$.size,this}et.prototype.clear=mr,et.prototype.delete=Lt,et.prototype.get=ct,et.prototype.has=Ye,et.prototype.set=Wl;function Fl(p,x){var $=ri(p),Z=!$&&ti(p),ae=!$&&!Z&&$o(p),fe=!$&&!Z&&!ae&&Uo(p),pe=$||Z||ae||fe,ue=pe?P(p.length,String):[],we=ue.length;for(var Je in p)pe&&(Je=="length"||ae&&(Je=="offset"||Je=="parent")||fe&&(Je=="buffer"||Je=="byteLength"||Je=="byteOffset")||Bo(Je,we))||ue.push(Je);return ue}function Zn(p,x,$){($!==void 0&&!rn(p[x],$)||$===void 0&&!(x in p))&&Xn(p,x,$)}function ql(p,x,$){var Z=p[x];(!(xe.call(p,x)&&rn(Z,$))||$===void 0&&!(x in p))&&Xn(p,x,$)}function Qr(p,x){for(var $=p.length;$--;)if(rn(p[$][0],x))return $;return-1}function Xn(p,x,$){x=="__proto__"&&tr?tr(p,x,{configurable:!0,enumerable:!0,value:$,writable:!0}):p[x]=$}var Hl=nu();function en(p){return p==null?p===void 0?V:N:lt&&lt in Object(p)?iu(p):cu(p)}function Lo(p){return Er(p)&&en(p)==l}function Gl(p){if(!Mt(p)||lu(p))return!1;var x=ii(p)?qr:F;return x.test(gu(p))}function zl(p){return Er(p)&&ko(p.length)&&!!j[en(p)]}function Vl(p){if(!Mt(p))return uu(p);var x=Do(p),$=[];for(var Z in p)Z=="constructor"&&(x||!xe.call(p,Z))||$.push(Z);return $}function Mo(p,x,$,Z,ae){p!==x&&Hl(x,function(fe,pe){if(ae||(ae=new et),Mt(fe))Kl(p,x,pe,$,Mo,Z,ae);else{var ue=Z?Z(ei(p,pe),fe,pe+"",p,x,ae):void 0;ue===void 0&&(ue=fe),Zn(p,pe,ue)}},jo)}function Kl(p,x,$,Z,ae,fe,pe){var ue=ei(p,$),we=ei(x,$),Je=pe.get(we);if(Je){Zn(p,$,Je);return}var je=fe?fe(ue,we,$+"",p,x,pe):void 0,vr=je===void 0;if(vr){var oi=ri(we),si=!oi&&$o(we),Fo=!oi&&!si&&Uo(we);je=we,oi||si||Fo?ri(ue)?je=ue:pu(ue)?je=eu(ue):si?(vr=!1,je=Zl(we)):Fo?(vr=!1,je=Ql(we)):je=[]:wu(we)||ti(we)?(je=ue,ti(ue)?je=bu(ue):(!Mt(ue)||ii(ue))&&(je=ou(we))):vr=!1}vr&&(pe.set(we,je),ae(je,we,Z,fe,pe),pe.delete(we)),Zn(p,$,je)}function Yl(p,x){return du(fu(p,x,Wo),p+"")}var Jl=tr?function(p,x){return tr(p,"toString",{configurable:!0,enumerable:!1,value:_u(x),writable:!0})}:Wo;function Zl(p,x){return p.slice()}function Xl(p){var x=new p.constructor(p.byteLength);return new pr(x).set(new pr(p)),x}function Ql(p,x){var $=Xl(p.buffer);return new p.constructor($,p.byteOffset,p.length)}function eu(p,x){var $=-1,Z=p.length;for(x||(x=Array(Z));++$<Z;)x[$]=p[$];return x}function tu(p,x,$,Z){var ae=!$;$||($={});for(var fe=-1,pe=x.length;++fe<pe;){var ue=x[fe],we=void 0;we===void 0&&(we=p[ue]),ae?Xn($,ue,we):ql($,ue,we)}return $}function ru(p){return Yl(function(x,$){var Z=-1,ae=$.length,fe=ae>1?$[ae-1]:void 0,pe=ae>2?$[2]:void 0;for(fe=p.length>3&&typeof fe=="function"?(ae--,fe):void 0,pe&&su($[0],$[1],pe)&&(fe=ae<3?void 0:fe,ae=1),x=Object(x);++Z<ae;){var ue=$[Z];ue&&p(x,ue,Z,fe)}return x})}function nu(p){return function(x,$,Z){for(var ae=-1,fe=Object(x),pe=Z(x),ue=pe.length;ue--;){var we=pe[++ae];if($(fe[we],we,fe)===!1)break}return x}}function tn(p,x){var $=p.__data__;return au(x)?$[typeof x=="string"?"string":"hash"]:$.map}function Qn(p,x){var $=Y(p,x);return Gl($)?$:void 0}function iu(p){var x=xe.call(p,lt),$=p[lt];try{p[lt]=void 0;var Z=!0}catch{}var ae=Fr.call(p);return Z&&(x?p[lt]=$:delete p[lt]),ae}function ou(p){return typeof p.constructor=="function"&&!Do(p)?br(Pt(p)):{}}function Bo(p,x){var $=typeof p;return x=x??s,!!x&&($=="number"||$!="symbol"&&X.test(p))&&p>-1&&p%1==0&&p<x}function su(p,x,$){if(!Mt($))return!1;var Z=typeof x;return(Z=="number"?ni($)&&Bo(x,$.length):Z=="string"&&x in $)?rn($[x],p):!1}function au(p){var x=typeof p;return x=="string"||x=="number"||x=="symbol"||x=="boolean"?p!=="__proto__":p===null}function lu(p){return!!Qt&&Qt in p}function Do(p){var x=p&&p.constructor,$=typeof x=="function"&&x.prototype||le;return p===$}function uu(p){var x=[];if(p!=null)for(var $ in Object(p))x.push($);return x}function cu(p){return Fr.call(p)}function fu(p,x,$){return x=wr(x===void 0?p.length-1:x,0),function(){for(var Z=arguments,ae=-1,fe=wr(Z.length-x,0),pe=Array(fe);++ae<fe;)pe[ae]=Z[x+ae];ae=-1;for(var ue=Array(x+1);++ae<x;)ue[ae]=Z[ae];return ue[x]=$(pe),O(p,this,ue)}}function ei(p,x){if(!(x==="constructor"&&typeof p[x]=="function")&&x!="__proto__")return p[x]}var du=hu(Jl);function hu(p){var x=0,$=0;return function(){var Z=zr(),ae=o-(Z-$);if($=Z,ae>0){if(++x>=i)return arguments[0]}else x=0;return p.apply(void 0,arguments)}}function gu(p){if(p!=null){try{return ne.call(p)}catch{}try{return p+""}catch{}}return""}function rn(p,x){return p===x||p!==p&&x!==x}var ti=Lo(function(){return arguments}())?Lo:function(p){return Er(p)&&xe.call(p,"callee")&&!Vn.call(p,"callee")},ri=Array.isArray;function ni(p){return p!=null&&ko(p.length)&&!ii(p)}function pu(p){return Er(p)&&ni(p)}var $o=Kn||mu;function ii(p){if(!Mt(p))return!1;var x=en(p);return x==M||x==k||x==c||x==L}function ko(p){return typeof p=="number"&&p>-1&&p%1==0&&p<=s}function Mt(p){var x=typeof p;return p!=null&&(x=="object"||x=="function")}function Er(p){return p!=null&&typeof p=="object"}function wu(p){if(!Er(p)||en(p)!=I)return!1;var x=Pt(p);if(x===null)return!0;var $=xe.call(x,"constructor")&&x.constructor;return typeof $=="function"&&$ instanceof $&&ne.call($)==zn}var Uo=me?U(me):zl;function bu(p){return tu(p,jo(p))}function jo(p){return ni(p)?Fl(p):Vl(p)}var yu=ru(function(p,x,$){Mo(p,x,$)});function _u(p){return function(){return p}}function Wo(p){return p}function mu(){return!1}e.exports=yu})(Sn,Sn.exports);Sn.exports;var _l={exports:{}};(function(e){(function(t,r){e.exports?e.exports=r():t.log=r()})(Su,function(){var t=function(){},r="undefined",n=typeof window!==r&&typeof window.navigator!==r&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"],o={},s=null;function l(m,T){var N=m[T];if(typeof N.bind=="function")return N.bind(m);try{return Function.prototype.bind.call(N,m)}catch{return function(){return Function.prototype.apply.apply(N,[m,arguments])}}}function d(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function c(m){return m==="debug"&&(m="log"),typeof console===r?!1:m==="trace"&&n?d:console[m]!==void 0?l(console,m):console.log!==void 0?l(console,"log"):t}function v(){for(var m=this.getLevel(),T=0;T<i.length;T++){var N=i[T];this[N]=T<m?t:this.methodFactory(N,m,this.name)}if(this.log=this.debug,typeof console===r&&m<this.levels.SILENT)return"No console available for logging"}function R(m){return function(){typeof console!==r&&(v.call(this),this[m].apply(this,arguments))}}function B(m,T,N){return c(m)||R.apply(this,arguments)}function M(m,T){var N=this,I,L,K,H="loglevel";typeof m=="string"?H+=":"+m:typeof m=="symbol"&&(H=void 0);function G(E){var _=(i[E]||"silent").toUpperCase();if(!(typeof window===r||!H)){try{window.localStorage[H]=_;return}catch{}try{window.document.cookie=encodeURIComponent(H)+"="+_+";"}catch{}}}function V(){var E;if(!(typeof window===r||!H)){try{E=window.localStorage[H]}catch{}if(typeof E===r)try{var _=window.document.cookie,g=encodeURIComponent(H),C=_.indexOf(g+"=");C!==-1&&(E=/^([^;]+)/.exec(_.slice(C+g.length+1))[1])}catch{}return N.levels[E]===void 0&&(E=void 0),E}}function a(){if(!(typeof window===r||!H)){try{window.localStorage.removeItem(H)}catch{}try{window.document.cookie=encodeURIComponent(H)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function f(E){var _=E;if(typeof _=="string"&&N.levels[_.toUpperCase()]!==void 0&&(_=N.levels[_.toUpperCase()]),typeof _=="number"&&_>=0&&_<=N.levels.SILENT)return _;throw new TypeError("log.setLevel() called with invalid level: "+E)}N.name=m,N.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},N.methodFactory=T||B,N.getLevel=function(){return K??L??I},N.setLevel=function(E,_){return K=f(E),_!==!1&&G(K),v.call(N)},N.setDefaultLevel=function(E){L=f(E),V()||N.setLevel(E,!1)},N.resetLevel=function(){K=null,a(),v.call(N)},N.enableAll=function(E){N.setLevel(N.levels.TRACE,E)},N.disableAll=function(E){N.setLevel(N.levels.SILENT,E)},N.rebuild=function(){if(s!==N&&(I=f(s.getLevel())),v.call(N),s===N)for(var E in o)o[E].rebuild()},I=f(s?s.getLevel():"WARN");var b=V();b!=null&&(K=f(b)),v.call(N)}s=new M,s.getLogger=function(T){if(typeof T!="symbol"&&typeof T!="string"||T==="")throw new TypeError("You must supply a name when creating a logger.");var N=o[T];return N||(N=o[T]=new M(T,s.methodFactory)),N};var k=typeof window!==r?window.log:void 0;return s.noConflict=function(){return typeof window!==r&&window.log===s&&(window.log=k),s},s.getLoggers=function(){return o},s.default=s,s})})(_l);var ml=_l.exports;const An=fr(ml),Nh=An.getLogger("http-helpers");Nh.setLevel(ml.levels.INFO);function Ys(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function Ch(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function jn(e,...t){if(!Ch(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function Ph(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Ys(e.outputLen),Ys(e.blockLen)}function Rn(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Lh(e,t){jn(e);const r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}const Ni=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ci=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),tt=(e,t)=>e<<32-t|e>>>t;new Uint8Array(new Uint32Array([287454020]).buffer)[0];function Mh(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Eo(e){return typeof e=="string"&&(e=Mh(e)),jn(e),e}function Bh(...e){let t=0;for(let n=0;n<e.length;n++){const i=e[n];jn(i),t+=i.length}const r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){const o=e[n];r.set(o,i),i+=o.length}return r}class El{clone(){return this._cloneInto()}}function Dh(e){const t=n=>e().update(Eo(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function $h(e=32){if(Ni&&typeof Ni.getRandomValues=="function")return Ni.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}function kh(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);const i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),l=Number(r&o),d=n?4:0,c=n?0:4;e.setUint32(t+d,s,n),e.setUint32(t+c,l,n)}const Uh=(e,t,r)=>e&t^~e&r,jh=(e,t,r)=>e&t^e&r^t&r;class Wh extends El{constructor(t,r,n,i){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Ci(this.buffer)}update(t){Rn(this);const{view:r,buffer:n,blockLen:i}=this;t=Eo(t);const o=t.length;for(let s=0;s<o;){const l=Math.min(i-this.pos,o-s);if(l===i){const d=Ci(t);for(;i<=o-s;s+=i)this.process(d,s);continue}n.set(t.subarray(s,s+l),this.pos),this.pos+=l,s+=l,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Rn(this),Lh(t,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:o}=this;let{pos:s}=this;r[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(n,0),s=0);for(let R=s;R<i;R++)r[R]=0;kh(n,i-8,BigInt(this.length*8),o),this.process(n,0);const l=Ci(t),d=this.outputLen;if(d%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=d/4,v=this.get();if(c>v.length)throw new Error("_sha2: outputLen bigger than state");for(let R=0;R<c;R++)l.setUint32(4*R,v[R],o)}digest(){const{buffer:t,outputLen:r}=this;this.digestInto(t);const n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:o,destroyed:s,pos:l}=this;return t.length=i,t.pos=l,t.finished=o,t.destroyed=s,i%r&&t.buffer.set(n),t}}const Fh=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),At=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Rt=new Uint32Array(64);class qh extends Wh{constructor(){super(64,32,8,!1),this.A=At[0]|0,this.B=At[1]|0,this.C=At[2]|0,this.D=At[3]|0,this.E=At[4]|0,this.F=At[5]|0,this.G=At[6]|0,this.H=At[7]|0}get(){const{A:t,B:r,C:n,D:i,E:o,F:s,G:l,H:d}=this;return[t,r,n,i,o,s,l,d]}set(t,r,n,i,o,s,l,d){this.A=t|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=l|0,this.H=d|0}process(t,r){for(let R=0;R<16;R++,r+=4)Rt[R]=t.getUint32(r,!1);for(let R=16;R<64;R++){const B=Rt[R-15],M=Rt[R-2],k=tt(B,7)^tt(B,18)^B>>>3,m=tt(M,17)^tt(M,19)^M>>>10;Rt[R]=m+Rt[R-7]+k+Rt[R-16]|0}let{A:n,B:i,C:o,D:s,E:l,F:d,G:c,H:v}=this;for(let R=0;R<64;R++){const B=tt(l,6)^tt(l,11)^tt(l,25),M=v+B+Uh(l,d,c)+Fh[R]+Rt[R]|0,m=(tt(n,2)^tt(n,13)^tt(n,22))+jh(n,i,o)|0;v=c,c=d,d=l,l=s+M|0,s=o,o=i,i=n,n=M+m|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,l=l+this.E|0,d=d+this.F|0,c=c+this.G|0,v=v+this.H|0,this.set(n,i,o,s,l,d,c,v)}roundClean(){Rt.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Hh=Dh(()=>new qh);class vl extends El{constructor(t,r){super(),this.finished=!1,this.destroyed=!1,Ph(t);const n=Eo(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,o=new Uint8Array(i);o.set(n.length>i?t.create().update(n).digest():n);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=t.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),o.fill(0)}update(t){return Rn(this),this.iHash.update(t),this}digestInto(t){Rn(this),jn(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:i,destroyed:o,blockLen:s,outputLen:l}=this;return t=t,t.finished=i,t.destroyed=o,t.blockLen=s,t.outputLen=l,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Sl=(e,t,r)=>new vl(e,t).update(r).digest();Sl.create=(e,t)=>new vl(e,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Al=BigInt(0),Wn=BigInt(1),Gh=BigInt(2);function zt(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function Ur(e){if(!zt(e))throw new Error("Uint8Array expected")}const zh=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function lr(e){Ur(e);let t="";for(let r=0;r<e.length;r++)t+=zh[e[r]];return t}function Rl(e){const t=e.toString(16);return t.length&1?`0${t}`:t}function vo(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}const dt={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function Js(e){if(e>=dt._0&&e<=dt._9)return e-dt._0;if(e>=dt._A&&e<=dt._F)return e-(dt._A-10);if(e>=dt._a&&e<=dt._f)return e-(dt._a-10)}function ur(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let i=0,o=0;i<r;i++,o+=2){const s=Js(e.charCodeAt(o)),l=Js(e.charCodeAt(o+1));if(s===void 0||l===void 0){const d=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+d+'" at index '+o)}n[i]=s*16+l}return n}function qt(e){return vo(lr(e))}function So(e){return Ur(e),vo(lr(Uint8Array.from(e).reverse()))}function cr(e,t){return ur(e.toString(16).padStart(t*2,"0"))}function Ao(e,t){return cr(e,t).reverse()}function Vh(e){return ur(Rl(e))}function Xe(e,t,r){let n;if(typeof t=="string")try{n=ur(t)}catch(o){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${o}`)}else if(zt(t))n=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);const i=n.length;if(typeof r=="number"&&i!==r)throw new Error(`${e} expected ${r} bytes, got ${i}`);return n}function Mr(...e){let t=0;for(let n=0;n<e.length;n++){const i=e[n];Ur(i),t+=i.length}const r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){const o=e[n];r.set(o,i),i+=o.length}return r}function Kh(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return r===0}function Yh(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Jh(e){let t;for(t=0;e>Al;e>>=Wn,t+=1);return t}function Zh(e,t){return e>>BigInt(t)&Wn}function Xh(e,t,r){return e|(r?Wn:Al)<<BigInt(t)}const Ro=e=>(Gh<<BigInt(e-1))-Wn,Pi=e=>new Uint8Array(e),Zs=e=>Uint8Array.from(e);function Il(e,t,r){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=Pi(e),i=Pi(e),o=0;const s=()=>{n.fill(1),i.fill(0),o=0},l=(...R)=>r(i,n,...R),d=(R=Pi())=>{i=l(Zs([0]),R),n=l(),R.length!==0&&(i=l(Zs([1]),R),n=l())},c=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let R=0;const B=[];for(;R<t;){n=l();const M=n.slice();B.push(M),R+=n.length}return Mr(...B)};return(R,B)=>{s(),d(R);let M;for(;!(M=B(c()));)d();return s(),M}}const Qh={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||zt(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function jr(e,t,r={}){const n=(i,o,s)=>{const l=Qh[o];if(typeof l!="function")throw new Error(`Invalid validator "${o}", expected function`);const d=e[i];if(!(s&&d===void 0)&&!l(d,e))throw new Error(`Invalid param ${String(i)}=${d} (${typeof d}), expected ${o}`)};for(const[i,o]of Object.entries(t))n(i,o,!1);for(const[i,o]of Object.entries(r))n(i,o,!0);return e}const eg=Object.freeze(Object.defineProperty({__proto__:null,abytes:Ur,bitGet:Zh,bitLen:Jh,bitMask:Ro,bitSet:Xh,bytesToHex:lr,bytesToNumberBE:qt,bytesToNumberLE:So,concatBytes:Mr,createHmacDrbg:Il,ensureBytes:Xe,equalBytes:Kh,hexToBytes:ur,hexToNumber:vo,isBytes:zt,numberToBytesBE:cr,numberToBytesLE:Ao,numberToHexUnpadded:Rl,numberToVarBytesBE:Vh,utf8ToBytes:Yh,validateObject:jr},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Oe=BigInt(0),ve=BigInt(1),kt=BigInt(2),tg=BigInt(3),Qi=BigInt(4),Xs=BigInt(5),Qs=BigInt(8);BigInt(9);BigInt(16);function $e(e,t){const r=e%t;return r>=Oe?r:t+r}function rg(e,t,r){if(r<=Oe||t<Oe)throw new Error("Expected power/modulo > 0");if(r===ve)return Oe;let n=ve;for(;t>Oe;)t&ve&&(n=n*e%r),e=e*e%r,t>>=ve;return n}function Fe(e,t,r){let n=e;for(;t-- >Oe;)n*=n,n%=r;return n}function eo(e,t){if(e===Oe||t<=Oe)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=$e(e,t),n=t,i=Oe,o=ve;for(;r!==Oe;){const l=n/r,d=n%r,c=i-o*l;n=r,r=d,i=o,o=c}if(n!==ve)throw new Error("invert: does not exist");return $e(i,t)}function ng(e){const t=(e-ve)/kt;let r,n,i;for(r=e-ve,n=0;r%kt===Oe;r/=kt,n++);for(i=kt;i<e&&rg(i,t,e)!==e-ve;i++);if(n===1){const s=(e+ve)/Qi;return function(d,c){const v=d.pow(c,s);if(!d.eql(d.sqr(v),c))throw new Error("Cannot find square root");return v}}const o=(r+ve)/kt;return function(l,d){if(l.pow(d,t)===l.neg(l.ONE))throw new Error("Cannot find square root");let c=n,v=l.pow(l.mul(l.ONE,i),r),R=l.pow(d,o),B=l.pow(d,r);for(;!l.eql(B,l.ONE);){if(l.eql(B,l.ZERO))return l.ZERO;let M=1;for(let m=l.sqr(B);M<c&&!l.eql(m,l.ONE);M++)m=l.sqr(m);const k=l.pow(v,ve<<BigInt(c-M-1));v=l.sqr(k),R=l.mul(R,k),B=l.mul(B,v),c=M}return R}}function ig(e){if(e%Qi===tg){const t=(e+ve)/Qi;return function(n,i){const o=n.pow(i,t);if(!n.eql(n.sqr(o),i))throw new Error("Cannot find square root");return o}}if(e%Qs===Xs){const t=(e-Xs)/Qs;return function(n,i){const o=n.mul(i,kt),s=n.pow(o,t),l=n.mul(i,s),d=n.mul(n.mul(l,kt),s),c=n.mul(l,n.sub(d,n.ONE));if(!n.eql(n.sqr(c),i))throw new Error("Cannot find square root");return c}}return ng(e)}const og=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function sg(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=og.reduce((n,i)=>(n[i]="function",n),t);return jr(e,r)}function ag(e,t,r){if(r<Oe)throw new Error("Expected power > 0");if(r===Oe)return e.ONE;if(r===ve)return t;let n=e.ONE,i=t;for(;r>Oe;)r&ve&&(n=e.mul(n,i)),i=e.sqr(i),r>>=ve;return n}function lg(e,t){const r=new Array(t.length),n=t.reduce((o,s,l)=>e.is0(s)?o:(r[l]=o,e.mul(o,s)),e.ONE),i=e.inv(n);return t.reduceRight((o,s,l)=>e.is0(s)?o:(r[l]=e.mul(o,r[l]),e.mul(o,s)),i),r}function Tl(e,t){const r=t!==void 0?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function ug(e,t,r=!1,n={}){if(e<=Oe)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:i,nByteLength:o}=Tl(e,t);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");const s=ig(e),l=Object.freeze({ORDER:e,BITS:i,BYTES:o,MASK:Ro(i),ZERO:Oe,ONE:ve,create:d=>$e(d,e),isValid:d=>{if(typeof d!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof d}`);return Oe<=d&&d<e},is0:d=>d===Oe,isOdd:d=>(d&ve)===ve,neg:d=>$e(-d,e),eql:(d,c)=>d===c,sqr:d=>$e(d*d,e),add:(d,c)=>$e(d+c,e),sub:(d,c)=>$e(d-c,e),mul:(d,c)=>$e(d*c,e),pow:(d,c)=>ag(l,d,c),div:(d,c)=>$e(d*eo(c,e),e),sqrN:d=>d*d,addN:(d,c)=>d+c,subN:(d,c)=>d-c,mulN:(d,c)=>d*c,inv:d=>eo(d,e),sqrt:n.sqrt||(d=>s(l,d)),invertBatch:d=>lg(l,d),cmov:(d,c,v)=>v?c:d,toBytes:d=>r?Ao(d,o):cr(d,o),fromBytes:d=>{if(d.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${d.length}`);return r?So(d):qt(d)}});return Object.freeze(l)}function Ol(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function xl(e){const t=Ol(e);return t+Math.ceil(t/2)}function cg(e,t,r=!1){const n=e.length,i=Ol(t),o=xl(t);if(n<16||n<o||n>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${n}`);const s=r?qt(e):So(e),l=$e(s,t-ve)+ve;return r?Ao(l,i):cr(l,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const fg=BigInt(0),Li=BigInt(1);function dg(e,t){const r=(i,o)=>{const s=o.negate();return i?s:o},n=i=>{const o=Math.ceil(t/i)+1,s=2**(i-1);return{windows:o,windowSize:s}};return{constTimeNegate:r,unsafeLadder(i,o){let s=e.ZERO,l=i;for(;o>fg;)o&Li&&(s=s.add(l)),l=l.double(),o>>=Li;return s},precomputeWindow(i,o){const{windows:s,windowSize:l}=n(o),d=[];let c=i,v=c;for(let R=0;R<s;R++){v=c,d.push(v);for(let B=1;B<l;B++)v=v.add(c),d.push(v);c=v.double()}return d},wNAF(i,o,s){const{windows:l,windowSize:d}=n(i);let c=e.ZERO,v=e.BASE;const R=BigInt(2**i-1),B=2**i,M=BigInt(i);for(let k=0;k<l;k++){const m=k*d;let T=Number(s&R);s>>=M,T>d&&(T-=B,s+=Li);const N=m,I=m+Math.abs(T)-1,L=k%2!==0,K=T<0;T===0?v=v.add(r(L,o[N])):c=c.add(r(K,o[I]))}return{p:c,f:v}},wNAFCached(i,o,s,l){const d=i._WINDOW_SIZE||1;let c=o.get(i);return c||(c=this.precomputeWindow(i,d),d!==1&&o.set(i,l(c))),this.wNAF(d,c,s)}}}function Nl(e){return sg(e.Fp),jr(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Tl(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function hg(e){const t=Nl(e);jr(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:i}=t;if(r){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:gg,hexToBytes:pg}=eg,Wt={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(e){const{Err:t}=Wt;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");const r=e[1],n=e.subarray(2,r+2);if(!r||n.length!==r)throw new t("Invalid signature integer: wrong length");if(n[0]&128)throw new t("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:gg(n),l:e.subarray(r+2)}},toSig(e){const{Err:t}=Wt,r=typeof e=="string"?pg(e):e;Ur(r);let n=r.length;if(n<2||r[0]!=48)throw new t("Invalid signature tag");if(r[1]!==n-2)throw new t("Invalid signature: incorrect length");const{d:i,l:o}=Wt._parseInt(r.subarray(2)),{d:s,l}=Wt._parseInt(o);if(l.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s}},hexFromSig(e){const t=c=>Number.parseInt(c[0],16)&8?"00"+c:c,r=c=>{const v=c.toString(16);return v.length&1?`0${v}`:v},n=t(r(e.s)),i=t(r(e.r)),o=n.length/2,s=i.length/2,l=r(o),d=r(s);return`30${r(s+o+4)}02${d}${i}02${l}${n}`}},gt=BigInt(0),ze=BigInt(1);BigInt(2);const ea=BigInt(3);BigInt(4);function wg(e){const t=hg(e),{Fp:r}=t,n=t.toBytes||((k,m,T)=>{const N=m.toAffine();return Mr(Uint8Array.from([4]),r.toBytes(N.x),r.toBytes(N.y))}),i=t.fromBytes||(k=>{const m=k.subarray(1),T=r.fromBytes(m.subarray(0,r.BYTES)),N=r.fromBytes(m.subarray(r.BYTES,2*r.BYTES));return{x:T,y:N}});function o(k){const{a:m,b:T}=t,N=r.sqr(k),I=r.mul(N,k);return r.add(r.add(I,r.mul(k,m)),T)}if(!r.eql(r.sqr(t.Gy),o(t.Gx)))throw new Error("bad generator point: equation left != right");function s(k){return typeof k=="bigint"&&gt<k&&k<t.n}function l(k){if(!s(k))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function d(k){const{allowedPrivateKeyLengths:m,nByteLength:T,wrapPrivateKey:N,n:I}=t;if(m&&typeof k!="bigint"){if(zt(k)&&(k=lr(k)),typeof k!="string"||!m.includes(k.length))throw new Error("Invalid key");k=k.padStart(T*2,"0")}let L;try{L=typeof k=="bigint"?k:qt(Xe("private key",k,T))}catch{throw new Error(`private key must be ${T} bytes, hex or bigint, not ${typeof k}`)}return N&&(L=$e(L,I)),l(L),L}const c=new Map;function v(k){if(!(k instanceof R))throw new Error("ProjectivePoint expected")}class R{constructor(m,T,N){if(this.px=m,this.py=T,this.pz=N,m==null||!r.isValid(m))throw new Error("x required");if(T==null||!r.isValid(T))throw new Error("y required");if(N==null||!r.isValid(N))throw new Error("z required")}static fromAffine(m){const{x:T,y:N}=m||{};if(!m||!r.isValid(T)||!r.isValid(N))throw new Error("invalid affine point");if(m instanceof R)throw new Error("projective point not allowed");const I=L=>r.eql(L,r.ZERO);return I(T)&&I(N)?R.ZERO:new R(T,N,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(m){const T=r.invertBatch(m.map(N=>N.pz));return m.map((N,I)=>N.toAffine(T[I])).map(R.fromAffine)}static fromHex(m){const T=R.fromAffine(i(Xe("pointHex",m)));return T.assertValidity(),T}static fromPrivateKey(m){return R.BASE.multiply(d(m))}_setWindowSize(m){this._WINDOW_SIZE=m,c.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:m,y:T}=this.toAffine();if(!r.isValid(m)||!r.isValid(T))throw new Error("bad point: x or y not FE");const N=r.sqr(T),I=o(m);if(!r.eql(N,I))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:m}=this.toAffine();if(r.isOdd)return!r.isOdd(m);throw new Error("Field doesn't support isOdd")}equals(m){v(m);const{px:T,py:N,pz:I}=this,{px:L,py:K,pz:H}=m,G=r.eql(r.mul(T,H),r.mul(L,I)),V=r.eql(r.mul(N,H),r.mul(K,I));return G&&V}negate(){return new R(this.px,r.neg(this.py),this.pz)}double(){const{a:m,b:T}=t,N=r.mul(T,ea),{px:I,py:L,pz:K}=this;let H=r.ZERO,G=r.ZERO,V=r.ZERO,a=r.mul(I,I),f=r.mul(L,L),b=r.mul(K,K),E=r.mul(I,L);return E=r.add(E,E),V=r.mul(I,K),V=r.add(V,V),H=r.mul(m,V),G=r.mul(N,b),G=r.add(H,G),H=r.sub(f,G),G=r.add(f,G),G=r.mul(H,G),H=r.mul(E,H),V=r.mul(N,V),b=r.mul(m,b),E=r.sub(a,b),E=r.mul(m,E),E=r.add(E,V),V=r.add(a,a),a=r.add(V,a),a=r.add(a,b),a=r.mul(a,E),G=r.add(G,a),b=r.mul(L,K),b=r.add(b,b),a=r.mul(b,E),H=r.sub(H,a),V=r.mul(b,f),V=r.add(V,V),V=r.add(V,V),new R(H,G,V)}add(m){v(m);const{px:T,py:N,pz:I}=this,{px:L,py:K,pz:H}=m;let G=r.ZERO,V=r.ZERO,a=r.ZERO;const f=t.a,b=r.mul(t.b,ea);let E=r.mul(T,L),_=r.mul(N,K),g=r.mul(I,H),C=r.add(T,N),u=r.add(L,K);C=r.mul(C,u),u=r.add(E,_),C=r.sub(C,u),u=r.add(T,I);let w=r.add(L,H);return u=r.mul(u,w),w=r.add(E,g),u=r.sub(u,w),w=r.add(N,I),G=r.add(K,H),w=r.mul(w,G),G=r.add(_,g),w=r.sub(w,G),a=r.mul(f,u),G=r.mul(b,g),a=r.add(G,a),G=r.sub(_,a),a=r.add(_,a),V=r.mul(G,a),_=r.add(E,E),_=r.add(_,E),g=r.mul(f,g),u=r.mul(b,u),_=r.add(_,g),g=r.sub(E,g),g=r.mul(f,g),u=r.add(u,g),E=r.mul(_,u),V=r.add(V,E),E=r.mul(w,u),G=r.mul(C,G),G=r.sub(G,E),E=r.mul(C,_),a=r.mul(w,a),a=r.add(a,E),new R(G,V,a)}subtract(m){return this.add(m.negate())}is0(){return this.equals(R.ZERO)}wNAF(m){return M.wNAFCached(this,c,m,T=>{const N=r.invertBatch(T.map(I=>I.pz));return T.map((I,L)=>I.toAffine(N[L])).map(R.fromAffine)})}multiplyUnsafe(m){const T=R.ZERO;if(m===gt)return T;if(l(m),m===ze)return this;const{endo:N}=t;if(!N)return M.unsafeLadder(this,m);let{k1neg:I,k1:L,k2neg:K,k2:H}=N.splitScalar(m),G=T,V=T,a=this;for(;L>gt||H>gt;)L&ze&&(G=G.add(a)),H&ze&&(V=V.add(a)),a=a.double(),L>>=ze,H>>=ze;return I&&(G=G.negate()),K&&(V=V.negate()),V=new R(r.mul(V.px,N.beta),V.py,V.pz),G.add(V)}multiply(m){l(m);let T=m,N,I;const{endo:L}=t;if(L){const{k1neg:K,k1:H,k2neg:G,k2:V}=L.splitScalar(T);let{p:a,f}=this.wNAF(H),{p:b,f:E}=this.wNAF(V);a=M.constTimeNegate(K,a),b=M.constTimeNegate(G,b),b=new R(r.mul(b.px,L.beta),b.py,b.pz),N=a.add(b),I=f.add(E)}else{const{p:K,f:H}=this.wNAF(T);N=K,I=H}return R.normalizeZ([N,I])[0]}multiplyAndAddUnsafe(m,T,N){const I=R.BASE,L=(H,G)=>G===gt||G===ze||!H.equals(I)?H.multiplyUnsafe(G):H.multiply(G),K=L(this,T).add(L(m,N));return K.is0()?void 0:K}toAffine(m){const{px:T,py:N,pz:I}=this,L=this.is0();m==null&&(m=L?r.ONE:r.inv(I));const K=r.mul(T,m),H=r.mul(N,m),G=r.mul(I,m);if(L)return{x:r.ZERO,y:r.ZERO};if(!r.eql(G,r.ONE))throw new Error("invZ was invalid");return{x:K,y:H}}isTorsionFree(){const{h:m,isTorsionFree:T}=t;if(m===ze)return!0;if(T)return T(R,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:m,clearCofactor:T}=t;return m===ze?this:T?T(R,this):this.multiplyUnsafe(t.h)}toRawBytes(m=!0){return this.assertValidity(),n(R,this,m)}toHex(m=!0){return lr(this.toRawBytes(m))}}R.BASE=new R(t.Gx,t.Gy,r.ONE),R.ZERO=new R(r.ZERO,r.ONE,r.ZERO);const B=t.nBitLength,M=dg(R,t.endo?Math.ceil(B/2):B);return{CURVE:t,ProjectivePoint:R,normPrivateKeyToScalar:d,weierstrassEquation:o,isWithinCurveOrder:s}}function bg(e){const t=Nl(e);return jr(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function yg(e){const t=bg(e),{Fp:r,n}=t,i=r.BYTES+1,o=2*r.BYTES+1;function s(u){return gt<u&&u<r.ORDER}function l(u){return $e(u,n)}function d(u){return eo(u,n)}const{ProjectivePoint:c,normPrivateKeyToScalar:v,weierstrassEquation:R,isWithinCurveOrder:B}=wg({...t,toBytes(u,w,S){const A=w.toAffine(),D=r.toBytes(A.x),W=Mr;return S?W(Uint8Array.from([w.hasEvenY()?2:3]),D):W(Uint8Array.from([4]),D,r.toBytes(A.y))},fromBytes(u){const w=u.length,S=u[0],A=u.subarray(1);if(w===i&&(S===2||S===3)){const D=qt(A);if(!s(D))throw new Error("Point is not on curve");const W=R(D);let F;try{F=r.sqrt(W)}catch(re){const te=re instanceof Error?": "+re.message:"";throw new Error("Point is not on curve"+te)}const X=(F&ze)===ze;return(S&1)===1!==X&&(F=r.neg(F)),{x:D,y:F}}else if(w===o&&S===4){const D=r.fromBytes(A.subarray(0,r.BYTES)),W=r.fromBytes(A.subarray(r.BYTES,2*r.BYTES));return{x:D,y:W}}else throw new Error(`Point of length ${w} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}}),M=u=>lr(cr(u,t.nByteLength));function k(u){const w=n>>ze;return u>w}function m(u){return k(u)?l(-u):u}const T=(u,w,S)=>qt(u.slice(w,S));class N{constructor(w,S,A){this.r=w,this.s=S,this.recovery=A,this.assertValidity()}static fromCompact(w){const S=t.nByteLength;return w=Xe("compactSignature",w,S*2),new N(T(w,0,S),T(w,S,2*S))}static fromDER(w){const{r:S,s:A}=Wt.toSig(Xe("DER",w));return new N(S,A)}assertValidity(){if(!B(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!B(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(w){return new N(this.r,this.s,w)}recoverPublicKey(w){const{r:S,s:A,recovery:D}=this,W=V(Xe("msgHash",w));if(D==null||![0,1,2,3].includes(D))throw new Error("recovery id invalid");const F=D===2||D===3?S+t.n:S;if(F>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const X=D&1?"03":"02",j=c.fromHex(X+M(F)),re=d(F),te=l(-W*re),ie=l(A*re),se=c.BASE.multiplyAndAddUnsafe(j,te,ie);if(!se)throw new Error("point at infinify");return se.assertValidity(),se}hasHighS(){return k(this.s)}normalizeS(){return this.hasHighS()?new N(this.r,l(-this.s),this.recovery):this}toDERRawBytes(){return ur(this.toDERHex())}toDERHex(){return Wt.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return ur(this.toCompactHex())}toCompactHex(){return M(this.r)+M(this.s)}}const I={isValidPrivateKey(u){try{return v(u),!0}catch{return!1}},normPrivateKeyToScalar:v,randomPrivateKey:()=>{const u=xl(t.n);return cg(t.randomBytes(u),t.n)},precompute(u=8,w=c.BASE){return w._setWindowSize(u),w.multiply(BigInt(3)),w}};function L(u,w=!0){return c.fromPrivateKey(u).toRawBytes(w)}function K(u){const w=zt(u),S=typeof u=="string",A=(w||S)&&u.length;return w?A===i||A===o:S?A===2*i||A===2*o:u instanceof c}function H(u,w,S=!0){if(K(u))throw new Error("first arg must be private key");if(!K(w))throw new Error("second arg must be public key");return c.fromHex(w).multiply(v(u)).toRawBytes(S)}const G=t.bits2int||function(u){const w=qt(u),S=u.length*8-t.nBitLength;return S>0?w>>BigInt(S):w},V=t.bits2int_modN||function(u){return l(G(u))},a=Ro(t.nBitLength);function f(u){if(typeof u!="bigint")throw new Error("bigint expected");if(!(gt<=u&&u<a))throw new Error(`bigint expected < 2^${t.nBitLength}`);return cr(u,t.nByteLength)}function b(u,w,S=E){if(["recovered","canonical"].some(Ae=>Ae in S))throw new Error("sign() legacy options not supported");const{hash:A,randomBytes:D}=t;let{lowS:W,prehash:F,extraEntropy:X}=S;W==null&&(W=!0),u=Xe("msgHash",u),F&&(u=Xe("prehashed msgHash",A(u)));const j=V(u),re=v(w),te=[f(re),f(j)];if(X!=null&&X!==!1){const Ae=X===!0?D(r.BYTES):X;te.push(Xe("extraEntropy",Ae))}const ie=Mr(...te),se=j;function Ee(Ae){const Re=G(Ae);if(!B(Re))return;const _e=d(Re),me=c.BASE.multiply(Re).toAffine(),O=l(me.x);if(O===gt)return;const P=l(_e*l(se+O*re));if(P===gt)return;let U=(me.x===O?0:2)|Number(me.y&ze),Y=P;return W&&k(P)&&(Y=m(P),U^=1),new N(O,Y,U)}return{seed:ie,k2sig:Ee}}const E={lowS:t.lowS,prehash:!1},_={lowS:t.lowS,prehash:!1};function g(u,w,S=E){const{seed:A,k2sig:D}=b(u,w,S),W=t;return Il(W.hash.outputLen,W.nByteLength,W.hmac)(A,D)}c.BASE._setWindowSize(8);function C(u,w,S,A=_){var me;const D=u;if(w=Xe("msgHash",w),S=Xe("publicKey",S),"strict"in A)throw new Error("options.strict was renamed to lowS");const{lowS:W,prehash:F}=A;let X,j;try{if(typeof D=="string"||zt(D))try{X=N.fromDER(D)}catch(O){if(!(O instanceof Wt.Err))throw O;X=N.fromCompact(D)}else if(typeof D=="object"&&typeof D.r=="bigint"&&typeof D.s=="bigint"){const{r:O,s:P}=D;X=new N(O,P)}else throw new Error("PARSE");j=c.fromHex(S)}catch(O){if(O.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(W&&X.hasHighS())return!1;F&&(w=t.hash(w));const{r:re,s:te}=X,ie=V(w),se=d(te),Ee=l(ie*se),Ae=l(re*se),Re=(me=c.BASE.multiplyAndAddUnsafe(j,Ee,Ae))==null?void 0:me.toAffine();return Re?l(Re.x)===re:!1}return{CURVE:t,getPublicKey:L,getSharedSecret:H,sign:g,verify:C,ProjectivePoint:c,Signature:N,utils:I}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function _g(e){return{hash:e,hmac:(t,...r)=>Sl(e,t,Bh(...r)),randomBytes:$h}}function mg(e,t){const r=n=>yg({...e,..._g(n)});return Object.freeze({...r(t),create:r})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Cl=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),ta=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Eg=BigInt(1),to=BigInt(2),ra=(e,t)=>(e+t/to)/t;function vg(e){const t=Cl,r=BigInt(3),n=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),l=BigInt(44),d=BigInt(88),c=e*e*e%t,v=c*c*e%t,R=Fe(v,r,t)*v%t,B=Fe(R,r,t)*v%t,M=Fe(B,to,t)*c%t,k=Fe(M,i,t)*M%t,m=Fe(k,o,t)*k%t,T=Fe(m,l,t)*m%t,N=Fe(T,d,t)*T%t,I=Fe(N,l,t)*m%t,L=Fe(I,r,t)*v%t,K=Fe(L,s,t)*k%t,H=Fe(K,n,t)*c%t,G=Fe(H,to,t);if(!ro.eql(ro.sqr(G),e))throw new Error("Cannot find square root");return G}const ro=ug(Cl,void 0,void 0,{sqrt:vg}),Io=mg({a:BigInt(0),b:BigInt(7),Fp:ro,n:ta,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=ta,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-Eg*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,s=BigInt("0x100000000000000000000000000000000"),l=ra(o*e,t),d=ra(-n*e,t);let c=$e(e-l*r-d*i,t),v=$e(-l*n-d*o,t);const R=c>s,B=v>s;if(R&&(c=t-c),B&&(v=t-v),c>s||v>s)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:R,k1:c,k2neg:B,k2:v}}}},Hh);BigInt(0);Io.ProjectivePoint;function Sg(e){let t=e;if(typeof t!="string")throw new Error(`[padToEven] value must be type 'string', received ${typeof t}`);return t.length%2&&(t=`0${t}`),t}BigInt(0);const no={},io={};for(let e=0;e<16;e++){const t=e,r=e*16,n=e.toString(16).toLowerCase();io[n]=t,io[n.toUpperCase()]=t,no[n]=r,no[n.toUpperCase()]=r}function Ag(e){const t=e.length,r=new Uint8Array(t/2);for(let n=0;n<t;n+=2)r[n/2]=no[e[n]]+io[e[n+1]];return r}Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));for(let e=0;e<=256*256-1;e++)BigInt(e);const Fn=e=>{if(typeof e!="string")throw new Error(`hex argument type ${typeof e} must be of type string`);if(!/^0x[0-9a-fA-F]*$/.test(e))throw new Error(`Input must be a 0x-prefixed hexadecimal string, got ${e}`);const t=e.slice(2);return Ag(t.length%2===0?t:Sg(t))},Rg=e=>{if(!Number.isSafeInteger(e)||e<0)throw new Error(`Received an invalid integer type: ${e}`);return`0x${e.toString(16)}`},Wr=e=>{const t=Rg(e);return Fn(t)};BigInt("0xffffffffffffffff");BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");BigInt("115792089237316195423570985008687907853269984665640564039457584007913129639935");Io.CURVE.n;Io.CURVE.n/BigInt(2);BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");const Ig="0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470";Fn(Ig);const Tg="0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347";Fn(Tg);const Og="0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421";Fn(Og);Uint8Array.from([128]);BigInt(-1);BigInt(0);BigInt(1);BigInt(2);BigInt(3);BigInt(7);BigInt(8);BigInt(27);BigInt(28);BigInt(31);BigInt(32);BigInt(64);BigInt(128);BigInt(255);BigInt(256);BigInt(96);BigInt(100);BigInt(160);BigInt(224);BigInt(7922816251426434e13);BigInt(1461501637330903e33);BigInt(2695994666715064e52);BigInt(1e9);Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));var na;(function(e){e.String="string",e.Bytes="view",e.Number="number"})(na||(na={}));var ia;(function(e){e.String="string",e.Bytes="view",e.JSON="json"})(ia||(ia={}));var oa;(function(e){e[e.Number=0]="Number",e[e.BigInt=1]="BigInt",e[e.Uint8Array=2]="Uint8Array",e[e.PrefixedHexString=3]="PrefixedHexString"})(oa||(oa={}));var sa;(function(e){e[e.Deposit=0]="Deposit",e[e.Withdrawal=1]="Withdrawal",e[e.Consolidation=2]="Consolidation"})(sa||(sa={}));var Vt;(function(e){e[e.Version=0]="Version",e[e.Balance=1]="Balance",e[e.Nonce=2]="Nonce",e[e.CodeHash=3]="CodeHash",e[e.CodeSize=4]="CodeSize"})(Vt||(Vt={}));Wr(Vt.Version);Wr(Vt.Balance);Wr(Vt.Nonce);Wr(Vt.CodeHash);Wr(Vt.CodeSize);BigInt(256)**BigInt(31);var xg={exports:{}},To={},Oo={};Object.defineProperty(Oo,"__esModule",{value:!0});function Ng(e){var t=4,r=e.length,n=r%t;if(!n)return e;var i=r,o=t-n,s=r+o,l=Qe.alloc(s);for(l.write(e);o--;)l.write("=",i++);return l.toString()}Oo.default=Ng;Object.defineProperty(To,"__esModule",{value:!0});var Cg=Oo;function Pl(e,t){return t===void 0&&(t="utf8"),Qe.isBuffer(e)?oo(e.toString("base64")):oo(Qe.from(e,t).toString("base64"))}function Pg(e,t){return t===void 0&&(t="utf8"),Qe.from(xo(e),"base64").toString(t)}function xo(e){return e=e.toString(),Cg.default(e).replace(/\-/g,"+").replace(/_/g,"/")}function oo(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Lg(e){return Qe.from(xo(e),"base64")}var gr=Pl;gr.encode=Pl;gr.decode=Pg;gr.toBase64=xo;gr.fromBase64=oo;gr.toBuffer=Lg;To.default=gr;(function(e){e.exports=To.default,e.exports.default=e.exports})(xg);const he={MAINNET:"mainnet",TESTNET:"testnet",CYAN:"cyan",AQUA:"aqua",CELESTE:"celeste"},Tt={SAPPHIRE_DEVNET:"sapphire_devnet",SAPPHIRE_MAINNET:"sapphire_mainnet"};he.MAINNET+"",he.TESTNET+"",he.CYAN+"",he.AQUA+"",he.CELESTE+"";he.AQUA+"",Tt.SAPPHIRE_MAINNET,he.CELESTE+"",Tt.SAPPHIRE_MAINNET,he.CYAN+"",Tt.SAPPHIRE_MAINNET,he.MAINNET+"",Tt.SAPPHIRE_MAINNET,he.TESTNET+"",Tt.SAPPHIRE_DEVNET;he.MAINNET+"",he.TESTNET+"",he.CYAN+"",he.AQUA+"",he.CELESTE+"";Tt.SAPPHIRE_MAINNET+"",Tt.SAPPHIRE_DEVNET+"",he.MAINNET+"",he.TESTNET+"",he.CYAN+"",he.AQUA+"",he.CELESTE+"";he.MAINNET+"",he.TESTNET+"",he.CYAN+"",he.AQUA+"",he.CELESTE+"";function aa(e){let t=!1,r=0,n;try{n=window[e],t=!0,r=n.length;const i="__storage_test__";return n.setItem(i,i),n.removeItem(i),!0}catch(i){const o=i;return o&&(o.code===22||o.code===1014||o.name==="QuotaExceededError"||o.name==="NS_ERROR_DOM_QUOTA_REACHED")&&t&&r!==0}}class Mg{constructor(){ee(this,"store",new Map)}getItem(t){return this.store.get(t)||null}setItem(t,r){this.store.set(t,r)}removeItem(t){this.store.delete(t)}}class Bg{constructor(t,r){ee(this,"storage",void 0),ee(this,"_storeKey",void 0),this.storage=r,this._storeKey=t;try{r.getItem(t)||this.resetStore()}catch{}}static getInstance(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"local";if(!this.instanceMap.has(t)){let n;r==="local"&&aa("localStorage")?n=window.localStorage:r==="session"&&aa("sessionStorage")?n=window.sessionStorage:n=new Mg,this.instanceMap.set(t,new this(t,n))}return this.instanceMap.get(t)}toJSON(){return this.storage.getItem(this._storeKey)}resetStore(){const t=this.getStore();return this.storage.removeItem(this._storeKey),t}getStore(){return JSON.parse(this.storage.getItem(this._storeKey)||"{}")}get(t){return JSON.parse(this.storage.getItem(this._storeKey)||"{}")[t]}set(t,r){const n=JSON.parse(this.storage.getItem(this._storeKey)||"{}");n[t]=r,this.storage.setItem(this._storeKey,JSON.stringify(n))}}ee(Bg,"instanceMap",new Map);Ve(Ve({},Tt),he);class Dg extends Error{}Dg.prototype.name="InvalidTokenError";const fn={IFRAME_STATUS:"iframe_status",CLOSE_WINDOW:"close_window",USER_LOGGED_IN:"user_logged_in",USER_LOGGED_OUT:"user_logged_out"},pt={LOGOUT:"logout",WALLET_INSTANCE_ID:"wallet_instance_id",USER_INFO:"user_info",SET_PROVIDER:"set_provider",TOPUP:"topup",IFRAME_STATUS:"iframe_status",CLOSED_WINDOW:"closed_window",WINDOW_BLOCKED:"window_blocked",GET_PROVIDER_STATE:"get_provider_state",LOGIN_WITH_PRIVATE_KEY:"login_with_private_key",SHOW_WALLET_CONNECT:"show_wallet_connect",SHOW_CHECKOUT:"show_checkout",SHOW_WALLET_UI:"show_wallet_ui",LOGIN_WITH_SESSION_ID:"login_with_session_id"},$g={GET_PROVIDER_STATE:"wallet_get_provider_state"},Mi={ACCOUNTS_CHANGED:"wallet_accounts_changed",CHAIN_CHANGED:"wallet_chain_changed",UNLOCK_STATE_CHANGED:"wallet_unlock_state_changed"};function kg(e){return function(r,n,i){i(o=>{n.error&&An.warn(`Error in RPC response:
`,n),!r.isTorusInternal&&(An.info(`RPC (${e.origin}):`,r,"->",n),o())})}}var bt={},Ot={};Object.defineProperty(Ot,"__esModule",{value:!0});Ot.EthereumProviderError=Ot.EthereumRpcError=void 0;const Ug=al;class Ll extends Error{constructor(t,r,n){if(!Number.isInteger(t))throw new Error('"code" must be an integer.');if(!r||typeof r!="string")throw new Error('"message" must be a nonempty string.');super(r),this.code=t,n!==void 0&&(this.data=n)}serialize(){const t={code:this.code,message:this.message};return this.data!==void 0&&(t.data=this.data),this.stack&&(t.stack=this.stack),t}toString(){return Ug.default(this.serialize(),Fg,2)}}Ot.EthereumRpcError=Ll;class jg extends Ll{constructor(t,r,n){if(!Wg(t))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(t,r,n)}}Ot.EthereumProviderError=jg;function Wg(e){return Number.isInteger(e)&&e>=1e3&&e<=4999}function Fg(e,t){if(t!=="[Circular]")return t}var No={},xt={};Object.defineProperty(xt,"__esModule",{value:!0});xt.errorValues=xt.errorCodes=void 0;xt.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}};xt.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.serializeError=e.isValidCode=e.getMessageFromCode=e.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const t=xt,r=Ot,n=t.errorCodes.rpc.internal,i="Unspecified error message. This is a bug, please report it.",o={code:n,message:s(n)};e.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.";function s(B,M=i){if(Number.isInteger(B)){const k=B.toString();if(R(t.errorValues,k))return t.errorValues[k].message;if(c(B))return e.JSON_RPC_SERVER_ERROR_MESSAGE}return M}e.getMessageFromCode=s;function l(B){if(!Number.isInteger(B))return!1;const M=B.toString();return!!(t.errorValues[M]||c(B))}e.isValidCode=l;function d(B,{fallbackError:M=o,shouldIncludeStack:k=!1}={}){var m,T;if(!M||!Number.isInteger(M.code)||typeof M.message!="string")throw new Error("Must provide fallback error with integer number code and string message.");if(B instanceof r.EthereumRpcError)return B.serialize();const N={};if(B&&typeof B=="object"&&!Array.isArray(B)&&R(B,"code")&&l(B.code)){const L=B;N.code=L.code,L.message&&typeof L.message=="string"?(N.message=L.message,R(L,"data")&&(N.data=L.data)):(N.message=s(N.code),N.data={originalError:v(B)})}else{N.code=M.code;const L=(m=B)===null||m===void 0?void 0:m.message;N.message=L&&typeof L=="string"?L:M.message,N.data={originalError:v(B)}}const I=(T=B)===null||T===void 0?void 0:T.stack;return k&&B&&I&&typeof I=="string"&&(N.stack=I),N}e.serializeError=d;function c(B){return B>=-32099&&B<=-32e3}function v(B){return B&&typeof B=="object"&&!Array.isArray(B)?Object.assign({},B):B}function R(B,M){return Object.prototype.hasOwnProperty.call(B,M)}})(No);var qn={};Object.defineProperty(qn,"__esModule",{value:!0});qn.ethErrors=void 0;const Co=Ot,Ml=No,Ce=xt;qn.ethErrors={rpc:{parse:e=>qe(Ce.errorCodes.rpc.parse,e),invalidRequest:e=>qe(Ce.errorCodes.rpc.invalidRequest,e),invalidParams:e=>qe(Ce.errorCodes.rpc.invalidParams,e),methodNotFound:e=>qe(Ce.errorCodes.rpc.methodNotFound,e),internal:e=>qe(Ce.errorCodes.rpc.internal,e),server:e=>{if(!e||typeof e!="object"||Array.isArray(e))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:t}=e;if(!Number.isInteger(t)||t>-32005||t<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return qe(t,e)},invalidInput:e=>qe(Ce.errorCodes.rpc.invalidInput,e),resourceNotFound:e=>qe(Ce.errorCodes.rpc.resourceNotFound,e),resourceUnavailable:e=>qe(Ce.errorCodes.rpc.resourceUnavailable,e),transactionRejected:e=>qe(Ce.errorCodes.rpc.transactionRejected,e),methodNotSupported:e=>qe(Ce.errorCodes.rpc.methodNotSupported,e),limitExceeded:e=>qe(Ce.errorCodes.rpc.limitExceeded,e)},provider:{userRejectedRequest:e=>Rr(Ce.errorCodes.provider.userRejectedRequest,e),unauthorized:e=>Rr(Ce.errorCodes.provider.unauthorized,e),unsupportedMethod:e=>Rr(Ce.errorCodes.provider.unsupportedMethod,e),disconnected:e=>Rr(Ce.errorCodes.provider.disconnected,e),chainDisconnected:e=>Rr(Ce.errorCodes.provider.chainDisconnected,e),custom:e=>{if(!e||typeof e!="object"||Array.isArray(e))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:t,message:r,data:n}=e;if(!r||typeof r!="string")throw new Error('"message" must be a nonempty string');return new Co.EthereumProviderError(t,r,n)}}};function qe(e,t){const[r,n]=Bl(t);return new Co.EthereumRpcError(e,r||Ml.getMessageFromCode(e),n)}function Rr(e,t){const[r,n]=Bl(t);return new Co.EthereumProviderError(e,r||Ml.getMessageFromCode(e),n)}function Bl(e){if(e){if(typeof e=="string")return[e];if(typeof e=="object"&&!Array.isArray(e)){const{message:t,data:r}=e;if(t&&typeof t!="string")throw new Error("Must specify string message.");return[t||void 0,r]}}return[]}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getMessageFromCode=e.serializeError=e.EthereumProviderError=e.EthereumRpcError=e.ethErrors=e.errorCodes=void 0;const t=Ot;Object.defineProperty(e,"EthereumRpcError",{enumerable:!0,get:function(){return t.EthereumRpcError}}),Object.defineProperty(e,"EthereumProviderError",{enumerable:!0,get:function(){return t.EthereumProviderError}});const r=No;Object.defineProperty(e,"serializeError",{enumerable:!0,get:function(){return r.serializeError}}),Object.defineProperty(e,"getMessageFromCode",{enumerable:!0,get:function(){return r.getMessageFromCode}});const n=qn;Object.defineProperty(e,"ethErrors",{enumerable:!0,get:function(){return n.ethErrors}});const i=xt;Object.defineProperty(e,"errorCodes",{enumerable:!0,get:function(){return i.errorCodes}})})(bt);var qg=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,i,o;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(i=n;i--!==0;)if(!e(t[i],r[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(o=Object.keys(t),n=o.length,n!==Object.keys(r).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(r,o[i]))return!1;for(i=n;i--!==0;){var s=o[i];if(!e(t[s],r[s]))return!1}return!0}return t!==t&&r!==r};const Hg=fr(qg);var Gg="2.1.0";function Dl(e){return e!==null&&typeof e=="object"&&typeof e.pipe=="function"}function zg(e){return Dl(e)&&e.writable!==!1&&typeof e._write=="function"&&typeof e._writableState=="object"}function Vg(e){return Dl(e)&&e.readable!==!1&&typeof e._read=="function"&&typeof e._readableState=="object"}function Kg(e){return zg(e)&&Vg(e)}var it={errors:{disconnected:()=>"Torus: Lost connection to Torus.",permanentlyDisconnected:()=>"Torus: Disconnected from iframe. Page reload required.",unsupportedSync:e=>`Torus: The Torus Ethereum provider does not support synchronous methods like ${e} without a callback parameter.`,invalidDuplexStream:()=>"Must provide a Node.js-style duplex stream.",invalidOptions:e=>`Invalid options. Received: { maxEventListeners: ${e}}`,invalidRequestArgs:()=>"Expected a single, non-array, object argument.",invalidRequestMethod:()=>"'args.method' must be a non-empty string.",invalidRequestParams:()=>"'args.params' must be an object or array if provided.",invalidLoggerObject:()=>"'args.logger' must be an object if provided.",invalidLoggerMethod:e=>`'args.logger' must include required method '${e}'.`},info:{connected:e=>`Torus: Connected to chain with ID "${e}".`},warnings:{}};const Yg={PRODUCTION:"production",DEVELOPMENT:"development",TESTING:"testing"},Tr={BOTTOM_LEFT:"bottom-left",TOP_LEFT:"top-left",BOTTOM_RIGHT:"bottom-right",TOP_RIGHT:"top-right"},Bi={GOOGLE:"google",FACEBOOK:"facebook",REDDIT:"reddit",DISCORD:"discord",TWITCH:"twitch",APPLE:"apple",LINE:"line",GITHUB:"github",KAKAO:"kakao",LINKEDIN:"linkedin",TWITTER:"twitter",WEIBO:"weibo",WECHAT:"wechat",EMAIL_PASSWORDLESS:"email_passwordless"},Jg={en:{embed:{continue:"Continue",actionRequired:"Authorization required",pendingAction:"Click continue to proceed with your request in a popup",cookiesRequired:"Cookies Required",enableCookies:"Please enable cookies in your browser preferences to access Torus",clickHere:"More Info"}},de:{embed:{continue:"Fortsetzen",actionRequired:"Autorisierung erforderlich",pendingAction:"Klicken Sie in einem Popup auf Weiter, um mit Ihrer Anfrage fortzufahren",cookiesRequired:"Cookies benötigt",enableCookies:"Bitte aktivieren Sie Cookies in Ihren Browsereinstellungen, um auf Torus zuzugreifen",clickHere:"Mehr Info"}},ja:{embed:{continue:"継続する",actionRequired:"認証が必要です",pendingAction:"続行をクリックして、ポップアップでリクエストを続行します",cookiesRequired:"必要なクッキー",enableCookies:"Torusにアクセスするには、ブラウザの設定でCookieを有効にしてください。",clickHere:"詳しくは"}},ko:{embed:{continue:"계속하다",actionRequired:"승인 필요",pendingAction:"팝업에서 요청을 진행하려면 계속을 클릭하십시오.",cookiesRequired:"쿠키 필요",enableCookies:"브라우저 환경 설정에서 쿠키를 활성화하여 Torus에 액세스하십시오.",clickHere:"더 많은 정보"}},zh:{embed:{continue:"继续",actionRequired:"需要授权",pendingAction:"单击继续以在弹出窗口中继续您的请求",cookiesRequired:"必填Cookie",enableCookies:"请在您的浏览器首选项中启用cookie以访问Torus。",clickHere:"更多信息"}}};var Po={supportedVerifierList:[Bi.GOOGLE,Bi.REDDIT,Bi.DISCORD],api:"https://api.tor.us",translations:Jg,prodTorusUrl:"",localStorageKeyPrefix:"torus-"},de=An.getLogger("solana-embed");function Zg(){return(e,t,r)=>{(typeof e.method!="string"||!e.method)&&(t.error=bt.ethErrors.rpc.invalidRequest({message:"The request 'method' must be a non-empty string.",data:e})),r(n=>{const{error:i}=t;return i&&de.error(`Torus - RPC Error: ${i.message}`,i),n()})}}function Xg(e,t,r){let n=`Torus: Lost connection to "${e}".`;t!=null&&t.stack&&(n+=`
${t.stack}`),de.warn(n),r&&r.listenerCount("error")>0&&r.emit("error",n)}const dn=()=>Math.random().toString(36).slice(2),$l=async e=>{let t,r;switch(e){case"testing":t="https://solana-testing.tor.us",r="debug";break;case"development":t="http://localhost:8080",r="debug";break;default:t="https://solana.tor.us",r="error";break}return{torusUrl:t,logLevel:r}},Qg=()=>{let e=window.navigator.language||"en-US";const t=e.split("-");return e=Object.prototype.hasOwnProperty.call(Po.translations,t[0])?t[0]:"en",e},ep={height:660,width:375},tp={height:740,width:1315},rp={height:700,width:1200},kl={height:600,width:400};function np(e){let t;try{t=window[e];const r="__storage_test__";return t.setItem(r,r),t.removeItem(r),!0}catch(r){const n=r;return n&&(n.code===22||n.code===1014||n.name==="QuotaExceededError"||n.name==="NS_ERROR_DOM_QUOTA_REACHED")&&t&&t.length!==0}}function xr(e){let{width:t,height:r}=e;const n=window.screenLeft!==void 0?window.screenLeft:window.screenX,i=window.screenTop!==void 0?window.screenTop:window.screenY,o=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:window.screen.width,s=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:window.screen.height,l=1,d=Math.abs((o-t)/2/l+n),c=Math.abs((s-r)/2/l+i);return`titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=${r/l},width=${t/l},top=${c},left=${d}`}class Ul extends Un{constructor(t,r){let{maxEventListeners:n=100,jsonRpcStreamName:i="provider"}=r;if(super(),ee(this,"isTorus",void 0),ee(this,"_rpcEngine",void 0),ee(this,"jsonRpcConnectionEvents",void 0),ee(this,"_state",void 0),!Kg(t))throw new Error(it.errors.invalidDuplexStream());this.isTorus=!0,this.setMaxListeners(n),this._handleConnect=this._handleConnect.bind(this),this._handleDisconnect=this._handleDisconnect.bind(this),this._handleStreamDisconnect=this._handleStreamDisconnect.bind(this),this._rpcRequest=this._rpcRequest.bind(this),this._initializeState=this._initializeState.bind(this),this.request=this.request.bind(this),this.sendAsync=this.sendAsync.bind(this);const o=new Oh;$s(t,o,t,this._handleStreamDisconnect.bind(this,"Torus")),o.ignoreStream("phishing");const s=Rh();$s(s.stream,o.createStream(i),s.stream,this._handleStreamDisconnect.bind(this,"Torus RpcProvider"));const l=new ht;l.push(Ih()),l.push(Zg()),l.push(kg({origin:location.origin})),l.push(s.middleware),this._rpcEngine=l,this.jsonRpcConnectionEvents=s.events}async request(t){if(!t||typeof t!="object"||Array.isArray(t))throw bt.ethErrors.rpc.invalidRequest({message:it.errors.invalidRequestArgs(),data:t});const{method:r,params:n}=t;if(typeof r!="string"||r.length===0)throw bt.ethErrors.rpc.invalidRequest({message:it.errors.invalidRequestMethod(),data:t});if(n!==void 0&&!Array.isArray(n)&&(typeof n!="object"||n===null))throw bt.ethErrors.rpc.invalidRequest({message:it.errors.invalidRequestParams(),data:t});return new Promise((i,o)=>{this._rpcRequest({method:r,params:n},Xi(i,o))})}send(t,r){this._rpcRequest(t,r)}sendAsync(t){return new Promise((r,n)=>{this._rpcRequest(t,Xi(r,n))})}_handleStreamDisconnect(t,r){Xg(t,r,this),this._handleDisconnect(!1,r?r.message:void 0)}}const sr=e=>{const t=window.document.createElement("template"),r=e.trim();return t.innerHTML=r,t.content.firstChild};function hn(e){return e.version===void 0}class jl extends Un{constructor(t){let{url:r,target:n,features:i,timeout:o=3e4}=t;super(),ee(this,"url",void 0),ee(this,"target",void 0),ee(this,"features",void 0),ee(this,"window",void 0),ee(this,"windowTimer",void 0),ee(this,"iClosedWindow",void 0),ee(this,"timeout",void 0),this.url=r,this.target=n||"_blank",this.features=i||xr(rp),this.window=void 0,this.windowTimer=void 0,this.iClosedWindow=!1,this.timeout=o,this._setupTimer()}_setupTimer(){this.windowTimer=Number(setInterval(()=>{this.window&&this.window.closed&&(clearInterval(this.windowTimer),setTimeout(()=>{this.iClosedWindow||this.emit("close"),this.iClosedWindow=!1,this.window=void 0},this.timeout)),this.window===void 0&&clearInterval(this.windowTimer)},500))}open(){var t;return this.window=window.open(this.url.href,this.target,this.features),(t=this.window)!=null&&t.focus&&this.window.focus(),Promise.resolve()}close(){this.iClosedWindow=!0,this.window&&this.window.close()}redirect(t){t?window.location.replace(this.url.href):window.location.href=this.url.href}}class Hn extends Ul{constructor(t,r){let{maxEventListeners:n=100,jsonRpcStreamName:i="provider"}=r;super(t,{maxEventListeners:n,jsonRpcStreamName:i}),ee(this,"embedTranslations",void 0),ee(this,"torusUrl",void 0),ee(this,"dappStorageKey",void 0),ee(this,"windowRefs",void 0),ee(this,"tryWindowHandle",void 0),ee(this,"torusAlertContainer",void 0),ee(this,"torusIframe",void 0),this._state=Ve({},Hn._defaultState),this.torusUrl="",this.dappStorageKey="";const o=Po.translations[Qg()];this.embedTranslations=o.embed,this.windowRefs={},this.on("connect",()=>{this._state.isConnected=!0});const s=l=>{const{method:d,params:c}=l;if(d===fn.IFRAME_STATUS){const{isFullScreen:v,rid:R}=c;this._displayIframe({isFull:v,rid:R})}else if(d==="create_window"){const{windowId:v,url:R}=c;this._createPopupBlockAlert(v,R)}else if(d===fn.CLOSE_WINDOW)this._handleCloseWindow(c);else if(d===fn.USER_LOGGED_IN){const{currentLoginProvider:v}=c;this._state.isLoggedIn=!0,this._state.currentLoginProvider=v}else d===fn.USER_LOGGED_OUT&&(this._state.isLoggedIn=!1,this._state.currentLoginProvider=null,this._displayIframe())};this.jsonRpcConnectionEvents.on("notification",s)}get isLoggedIn(){return this._state.isLoggedIn}get isIFrameFullScreen(){return this._state.isIFrameFullScreen}isConnected(){return this._state.isConnected}async _initializeState(t){try{const{torusUrl:r,dappStorageKey:n,torusAlertContainer:i,torusIframe:o}=t;this.torusUrl=r,this.dappStorageKey=n,this.torusAlertContainer=i,this.torusIframe=o,this.torusIframe.addEventListener("load",()=>{this._state.isIFrameFullScreen||this._displayIframe()});const{currentLoginProvider:s,isLoggedIn:l}=await this.request({method:pt.GET_PROVIDER_STATE,params:[]});this._handleConnect(s,l)}catch(r){de.error("Torus: Failed to get initial state. Please report this bug.",r)}finally{de.info("initialized communication state"),this._state.initialized=!0,this.emit("_initialized")}}_handleWindow(t){let{url:r,target:n,features:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o=new URL(r||`${this.torusUrl}/redirect?windowId=${t}`);this.dappStorageKey&&(o.hash?o.hash+=`&dappStorageKey=${this.dappStorageKey}`:o.hash=`#dappStorageKey=${this.dappStorageKey}`);const s=new jl({url:o,target:n,features:i});if(s.open(),!s.window){this._createPopupBlockAlert(t,o.href);return}this.windowRefs[t]=s,this.request({method:"opened_window",params:{windowId:t}}),s.once("close",()=>{delete this.windowRefs[t],this.request({method:pt.CLOSED_WINDOW,params:{windowId:t}})})}_displayIframe(){let{isFull:t=!1,rid:r=""}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n={};if(t)n.display="block",n.width="100%",n.height="100%",n.top="0px",n.right="0px",n.left="0px",n.bottom="0px";else switch(n.display=this._state.torusWidgetVisibility?"block":"none",n.height="70px",n.width="70px",this._state.buttonPosition){case Tr.TOP_LEFT:n.top="0px",n.left="0px",n.right="auto",n.bottom="auto";break;case Tr.TOP_RIGHT:n.top="0px",n.right="0px",n.left="auto",n.bottom="auto";break;case Tr.BOTTOM_RIGHT:n.bottom="0px",n.right="0px",n.top="auto",n.left="auto";break;case Tr.BOTTOM_LEFT:default:n.bottom="0px",n.left="0px",n.top="auto",n.right="auto";break}Object.assign(this.torusIframe.style,n),this._state.isIFrameFullScreen=t,this.request({method:pt.IFRAME_STATUS,params:{isIFrameFullScreen:t,rid:r}})}hideTorusButton(){this._state.torusWidgetVisibility=!1,this._displayIframe()}showTorusButton(){this._state.torusWidgetVisibility=!0,this._displayIframe()}_rpcRequest(t,r){const n=r,i=t;Array.isArray(i)||i.jsonrpc||(i.jsonrpc="2.0"),this.tryWindowHandle(i,n)}_handleConnect(t,r){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{currentLoginProvider:t,isLoggedIn:r}),de.debug(it.info.connected(t)))}_handleDisconnect(t,r){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!t){this._state.isConnected=!1;let n;t?(n=new bt.EthereumRpcError(1013,r||it.errors.disconnected()),de.debug(n)):(n=new bt.EthereumRpcError(1011,r||it.errors.permanentlyDisconnected()),de.error(n),this._state.currentLoginProvider=null,this._state.isLoggedIn=!1,this._state.torusWidgetVisibility=!1,this._state.isIFrameFullScreen=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",n)}}_handleCloseWindow(t){const{windowId:r}=t;this.windowRefs[r]&&(this.windowRefs[r].close(),delete this.windowRefs[r])}async _createPopupBlockAlert(t,r){const n=this.getLogoUrl(),i=sr(`<div id="torusAlert" class="torus-alert--v2"><div id="torusAlert__logo"><img src="${n}" /></div><div><h1 id="torusAlert__title">${this.embedTranslations.actionRequired}</h1><p id="torusAlert__desc">${this.embedTranslations.pendingAction}</p></div></div>`),o=sr(`<div><a id="torusAlert__btn">${this.embedTranslations.continue}</a></div>`),s=sr('<div id="torusAlert__btn-container"></div>');s.appendChild(o),i.appendChild(s);const l=()=>{o.addEventListener("click",()=>{this._handleWindow(t,{url:r,target:"_blank",features:xr(kl)}),i.remove(),this.torusAlertContainer.children.length===0&&(this.torusAlertContainer.style.display="none")})};(()=>{this.torusAlertContainer.appendChild(i)})(),l(),this.torusAlertContainer.style.display="block"}getLogoUrl(){return`${this.torusUrl}/images/torus_icon-blue.svg`}}ee(Hn,"_defaultState",{buttonPosition:"bottom-left",currentLoginProvider:null,isIFrameFullScreen:!1,hasEmittedConnection:!1,torusWidgetVisibility:!1,initialized:!1,isLoggedIn:!1,isPermanentlyDisconnected:!1,isConnected:!1});class Gn extends Ul{constructor(t,r){let{maxEventListeners:n=100,jsonRpcStreamName:i="provider"}=r;super(t,{maxEventListeners:n,jsonRpcStreamName:i}),ee(this,"chainId",void 0),ee(this,"selectedAddress",void 0),ee(this,"tryWindowHandle",void 0),this._state=Ve({},Gn._defaultState),this.selectedAddress=null,this.chainId=null,this._handleAccountsChanged=this._handleAccountsChanged.bind(this),this._handleChainChanged=this._handleChainChanged.bind(this),this._handleUnlockStateChanged=this._handleUnlockStateChanged.bind(this),this.on("connect",()=>{this._state.isConnected=!0});const o=s=>{const{method:l,params:d}=s;l===Mi.ACCOUNTS_CHANGED?this._handleAccountsChanged(d):l===Mi.UNLOCK_STATE_CHANGED?this._handleUnlockStateChanged(d):l===Mi.CHAIN_CHANGED&&this._handleChainChanged(d)};this.jsonRpcConnectionEvents.on("notification",o)}isConnected(){return this._state.isConnected}async _initializeState(){try{const{accounts:t,chainId:r,isUnlocked:n}=await this.request({method:$g.GET_PROVIDER_STATE,params:[]});this.emit("connect",{chainId:r}),this._handleChainChanged({chainId:r}),this._handleUnlockStateChanged({accounts:t,isUnlocked:n}),this._handleAccountsChanged(t)}catch(t){de.error("Torus: Failed to get initial state. Please report this bug.",t)}finally{de.info("initialized provider state"),this._state.initialized=!0,this.emit("_initialized")}}_rpcRequest(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=r;const o=t;if(!Array.isArray(o)){if(o.jsonrpc||(o.jsonrpc="2.0"),o.method==="solana_accounts"||o.method==="solana_requestAccounts")i=(s,l)=>{this._handleAccountsChanged(l.result||[],o.method==="solana_accounts",n),r(s,l)};else if(o.method==="wallet_getProviderState"){this._rpcEngine.handle(t,i);return}}this.tryWindowHandle(o,i)}_handleConnect(t){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{chainId:t}),de.debug(it.info.connected(t)))}_handleDisconnect(t,r){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!t){this._state.isConnected=!1;let n;t?(n=new bt.EthereumRpcError(1013,r||it.errors.disconnected()),de.debug(n)):(n=new bt.EthereumRpcError(1011,r||it.errors.permanentlyDisconnected()),de.error(n),this.chainId=null,this._state.accounts=null,this.selectedAddress=null,this._state.isUnlocked=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",n)}}_handleAccountsChanged(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=t;Array.isArray(i)||(de.error("Torus: Received non-array accounts parameter. Please report this bug.",i),i=[]);for(const o of t)if(typeof o!="string"){de.error("Torus: Received non-string account. Please report this bug.",t),i=[];break}Hg(this._state.accounts,i)||(r&&Array.isArray(this._state.accounts)&&this._state.accounts.length>0&&!n&&de.error('Torus: "solana_accounts" unexpectedly updated accounts. Please report this bug.',i),this._state.accounts=i,this.emit("accountsChanged",i)),this.selectedAddress!==i[0]&&(this.selectedAddress=i[0]||null)}_handleChainChanged(){let{chainId:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!t){de.error("Torus: Received invalid network parameters. Please report this bug.",{chainId:t});return}t==="loading"?this._handleDisconnect(!0):(this._handleConnect(t),t!==this.chainId&&(this.chainId=t,this._state.initialized&&this.emit("chainChanged",this.chainId)))}_handleUnlockStateChanged(){let{accounts:t,isUnlocked:r}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(typeof r!="boolean"){de.error("Torus: Received invalid isUnlocked parameter. Please report this bug.",{isUnlocked:r});return}r!==this._state.isUnlocked&&(this._state.isUnlocked=r,this._handleAccountsChanged(t||[]))}}ee(Gn,"_defaultState",{accounts:null,isConnected:!1,isUnlocked:!1,initialized:!1,isPermanentlyDisconnected:!1,hasEmittedConnection:!1});function la(e){return new Promise((t,r)=>{try{const n=document.createElement("img");n.onload=()=>t(!0),n.onerror=()=>t(!1),n.src=e}catch(n){r(n)}})}const ip=e=>{const{document:t}=e,r=t.querySelector('head > meta[property="og:site_name"]');if(r)return r.content;const n=t.querySelector('head > meta[name="title"]');return n?n.content:t.title&&t.title.length>0?t.title:e.location.hostname};async function op(e){try{const{document:t}=e;let r=t.querySelector('head > link[rel="shortcut icon"]');return r&&await la(r.href)||(r=Array.from(t.querySelectorAll('head > link[rel="icon"]')).find(n=>!!n.href),r&&await la(r.href))?r.href:""}catch{return""}}const sp=async()=>({name:ip(window),icon:await op(window)}),ap=["send_transaction","sign_transaction","sign_all_transactions","sign_message","connect"],lp=[pt.SET_PROVIDER],up=np("localStorage");(async function(){try{if(typeof document>"u")return;const t=document.createElement("link"),{torusUrl:r}=await $l("production");t.href=`${r}/frame`,t.crossOrigin="anonymous",t.type="text/html",t.rel="prefetch",t.relList&&t.relList.supports&&t.relList.supports("prefetch")&&document.head.appendChild(t)}catch(t){de.warn(t)}})();class wp{constructor(){let{modalZIndex:t=99999}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ee(this,"isInitialized",void 0),ee(this,"torusAlert",void 0),ee(this,"modalZIndex",void 0),ee(this,"alertZIndex",void 0),ee(this,"requestedLoginProvider",void 0),ee(this,"provider",void 0),ee(this,"communicationProvider",void 0),ee(this,"dappStorageKey",void 0),ee(this,"isTopupHidden",!1),ee(this,"torusAlertContainer",void 0),ee(this,"torusUrl",void 0),ee(this,"torusIframe",void 0),ee(this,"styleLink",void 0),this.torusUrl="",this.isInitialized=!1,this.requestedLoginProvider=null,this.modalZIndex=t,this.alertZIndex=t+1e3,this.dappStorageKey=""}get isLoggedIn(){return this.communicationProvider?this.communicationProvider.isLoggedIn:!1}async init(){let{buildEnv:t=Yg.PRODUCTION,enableLogging:r=!1,network:n,showTorusButton:i=!1,useLocalStorage:o=!1,buttonPosition:s=Tr.BOTTOM_LEFT,apiKey:l="torus-default",extraParams:d={},whiteLabel:c}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.isInitialized)throw new Error("Already initialized");const{torusUrl:v,logLevel:R}=await $l(t);de.enableAll(),de.info(v,"url loaded"),de.info(`Solana Embed Version :${Gg}`),this.torusUrl=v,de.setDefaultLevel(R),r?de.enableAll():de.disableAll();const B=this.handleDappStorageKey(o),M=new URL(v);M.pathname.endsWith("/")?M.pathname+="frame":M.pathname+="/frame";const k=new URLSearchParams;return B&&k.append("dappStorageKey",B),k.append("origin",window.location.origin),M.hash=k.toString(),this.torusIframe=sr(`<iframe
        id="torusIframe"
        class="torusIframe"
        src="${M.href}"
        style="display: none; position: fixed; top: 0; right: 0; width: 100%;
        height: 100%; border: none; border-radius: 0; z-index: ${this.modalZIndex.toString()}"
      ></iframe>`),this.torusAlertContainer=sr(`<div id="torusAlertContainer" style="display:none; z-index: ${this.alertZIndex.toString()}"></div>`),this.styleLink=sr(`<link href="${v}/css/widget.css" rel="stylesheet" type="text/css">`),new Promise((m,T)=>{try{this.torusIframe.addEventListener("load",async()=>{const N=await sp();this.torusIframe.contentWindow.postMessage({buttonPosition:s,apiKey:l,network:n,dappMetadata:N,extraParams:d,whiteLabel:c},M.origin),await this._setupWeb3({torusUrl:v}),i&&this.showTorusButton(),c!=null&&c.topupHide?this.isTopupHidden=c.topupHide:this.hideTorusButton(),this.isInitialized=!0,window.torus=this,m()}),window.document.head.appendChild(this.styleLink),window.document.body.appendChild(this.torusIframe),window.document.body.appendChild(this.torusAlertContainer)}catch(N){T(N)}})}async login(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.isInitialized)throw new Error("Call init() first");try{this.requestedLoginProvider=t.loginProvider||null,this.requestedLoginProvider||this.communicationProvider._displayIframe({isFull:!0});const r=await new Promise((n,i)=>{this.provider._rpcRequest({method:"solana_requestAccounts",params:[this.requestedLoginProvider,t.login_hint]},Xi(n,i))});if(Array.isArray(r)&&r.length>0)return r;throw new Error("Login failed")}catch(r){throw de.error("login failed",r),r}finally{this.communicationProvider.isIFrameFullScreen&&this.communicationProvider._displayIframe()}}async loginWithPrivateKey(t){if(!this.isInitialized)throw new Error("Call init() first");const{privateKey:r,userInfo:n}=t,{success:i}=await this.communicationProvider.request({method:"login_with_private_key",params:{privateKey:r,userInfo:n}});if(!i)throw new Error("Login Failed")}async logout(){if(!this.communicationProvider.isLoggedIn)throw new Error("Not logged in");await this.communicationProvider.request({method:pt.LOGOUT,params:[]}),this.requestedLoginProvider=null}async cleanUp(){this.communicationProvider.isLoggedIn&&await this.logout(),this.clearInit()}clearInit(){function t(r){return r instanceof Element||r instanceof Document}t(this.styleLink)&&window.document.body.contains(this.styleLink)&&(this.styleLink.remove(),this.styleLink=void 0),t(this.torusIframe)&&window.document.body.contains(this.torusIframe)&&(this.torusIframe.remove(),this.torusIframe=void 0),t(this.torusAlertContainer)&&window.document.body.contains(this.torusAlertContainer)&&(this.torusAlert=void 0,this.torusAlertContainer.remove(),this.torusAlertContainer=void 0),this.isInitialized=!1}hideTorusButton(){this.communicationProvider.hideTorusButton()}showTorusButton(){this.communicationProvider.showTorusButton()}async setProvider(t){await this.communicationProvider.request({method:pt.SET_PROVIDER,params:Ve({},t)})}async showWallet(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=await this.communicationProvider.request({method:pt.WALLET_INSTANCE_ID,params:[]}),i=t?`/${t}`:"",o=new URL(`${this.torusUrl}/wallet${i}`);o.searchParams.append("instanceId",n),Object.keys(r).forEach(l=>{o.searchParams.append(l,r[l])}),this.dappStorageKey&&(o.hash=`#dappStorageKey=${this.dappStorageKey}`),new jl({url:o,features:xr(tp)}).open()}async getUserInfo(){return await this.communicationProvider.request({method:pt.USER_INFO,params:[]})}async initiateTopup(t,r){if(!this.isInitialized)throw new Error("Torus is not initialized");const n=dn();return this.communicationProvider._handleWindow(n),await this.communicationProvider.request({method:pt.TOPUP,params:{provider:t,params:r,windowId:n}})}async getAccounts(){return await this.provider.request({method:"getAccounts",params:[]})}async sendTransaction(t){const r=hn(t),n=r?t.serialize({requireAllSignatures:!1}).toString("hex"):Qe.from(t.serialize()).toString("hex");return await this.provider.request({method:"send_transaction",params:{message:n,isLegacyTransaction:r}})}async signAndSendTransaction(t,r){const n=hn(t),i=n?t.serialize({requireAllSignatures:!1}).toString("hex"):Qe.from(t.serialize()).toString("hex");return{signature:await this.provider.request({method:"send_transaction",params:{message:i,options:r,isLegacyTransaction:n}})}}async signTransaction(t){const r=hn(t),n=r?t.serializeMessage().toString("hex"):Qe.from(t.message.serialize()).toString("hex"),i=await this.provider.request({method:"sign_transaction",params:{message:n,messageOnly:!0,isLegacyTransaction:r}}),o=JSON.parse(i),s={publicKey:new qo(o.publicKey),signature:Qe.from(o.signature,"hex")};return t.addSignature(s.publicKey,s.signature),t}async signAllTransactions(t){let r;const n=t.map(s=>(r=hn(s),r?s.serializeMessage().toString("hex"):Qe.from(s.message.serialize()).toString("hex"))),o=(await this.provider.request({method:"sign_all_transactions",params:{message:n,messageOnly:!0,isLegacyTransaction:r}})).map(s=>{const l=JSON.parse(s);return{publicKey:new qo(l.publicKey),signature:Qe.from(l.signature,"hex")}});return t.forEach((s,l)=>(s.addSignature(o[l].publicKey,o[l].signature),s)),t}async signMessage(t){return await this.provider.request({method:"sign_message",params:{data:t}})}async getGaslessPublicKey(){return await this.provider.request({method:"get_gasless_public_key",params:[]})}handleDappStorageKey(t){const r=`${Po.localStorageKeyPrefix}${window.location.hostname}`;let n="";if(up&&t){const i=window.localStorage.getItem(r);if(i)n=i;else{const o=`torus-app-${dn()}`;window.localStorage.setItem(r,o),n=o}}return this.dappStorageKey=n,n}async _setupWeb3(t){de.info("setupWeb3 running");const r=new js({name:"embed_torus",target:"iframe_torus",targetWindow:this.torusIframe.contentWindow}),n=new js({name:"embed_communication",target:"iframe_communication",targetWindow:this.torusIframe.contentWindow}),i=new Gn(r,{}),o=new Hn(n,{});i.tryWindowHandle=(c,v)=>{const R=c;if(!Array.isArray(R)&&ap.includes(R.method)){if(!this.communicationProvider.isLoggedIn)throw new Error("User Not Logged In");const B=dn();o._handleWindow(B,{target:"_blank",features:xr(kl)}),R.windowId=B}i._rpcEngine.handle(R,v)},o.tryWindowHandle=(c,v)=>{const R=c;if(!Array.isArray(R)&&lp.includes(R.method)){const B=dn();o._handleWindow(B,{target:"_blank",features:xr(ep)}),R.params.windowId=B}o._rpcEngine.handle(R,v)};const s=c=>{const v=i[c],R=this;i[c]=function(M,k){const{method:m,params:T=[]}=M;if(m==="solana_requestAccounts"){if(!k)return R.login({loginProvider:T[0]});R.login({loginProvider:T[0]}).then(N=>k(null,N)).catch(N=>k(N))}return v.apply(this,[M,k])}};s("request"),s("sendAsync"),s("send");const l=new Proxy(i,{deleteProperty:()=>!0}),d=new Proxy(o,{deleteProperty:()=>!0});this.provider=l,this.communicationProvider=d,await Promise.all([i._initializeState(),o._initializeState(Ve(Ve({},t),{},{dappStorageKey:this.dappStorageKey,torusAlertContainer:this.torusAlertContainer,torusIframe:this.torusIframe}))]),de.debug("Torus - injected provider")}}export{Tr as BUTTON_POSITION,Bi as LOGIN_PROVIDER,Yg as TORUS_BUILD_ENV,Gn as TorusInPageProvider,wp as default};
